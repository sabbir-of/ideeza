LavaPack.loadBundle([[5285,{"../../../../shared/constants/metametrics":4077,"../../../../shared/constants/swaps":4086,"../../../../shared/lib/swaps-utils":4096,"../../../../shared/lib/token-util.ts":4098,"../../../../shared/lib/transactions-controller-utils":4099,"../../../../shared/modules/conversion.utils":4105,"../../../../shared/modules/string-utils":4119,"../../../../shared/modules/swaps.utils":4120,"../../../components/component-library":4582,"../../../components/component-library/modal-content/deprecated":4590,"../../../components/component-library/modal-header/deprecated":4599,"../../../components/ui/box":4749,"../../../contexts/i18n":4890,"../../../contexts/metametrics":4891,"../../../ducks/metamask/metamask":4906,"../../../ducks/swaps/swaps":4910,"../../../helpers/constants/design-system":4914,"../../../helpers/constants/routes":4919,"../../../helpers/utils/util":4956,"../../../hooks/useEqualityCheck":4979,"../../../hooks/useEthFiatAmount":4980,"../../../hooks/usePrevious":4990,"../../../hooks/useTokenFiatAmount":5004,"../../../hooks/useTokenTracker":5005,"../../../hooks/useTokensToSearch":5006,"../../../selectors":5338,"../../../store/actionConstants":5344,"../../../store/actions":5345,"../import-token":5275,"../list-with-search/list-with-search":5277,"../selected-token/selected-token":5304,"../swaps-banner-alert/swaps-banner-alert":5315,"../swaps-footer":5316,"../swaps.util":5318,"../transaction-settings/transaction-settings":5319,"./quotes-loading-animation":5286,"./review-quote":5287,"./smart-transactions-popover":5289,"@metamask/etherscan-link":1213,"bignumber.js":2364,classnames:2479,lodash:3444,"prop-types":3583,react:3799,"react-redux":3764,"react-router-dom":3784},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=J;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=X(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=Q(e("bignumber.js")),o=Q(e("prop-types")),s=e("react-redux"),i=e("lodash"),l=e("react-router-dom"),u=e("@metamask/etherscan-link"),c=Q(e("classnames")),d=e("../../../contexts/metametrics"),p=e("../../../hooks/useTokensToSearch"),m=e("../../../hooks/useEqualityCheck"),f=e("../../../contexts/i18n"),g=e("../../../ducks/metamask/metamask"),E=Q(e("../../../components/ui/box")),T=e("../../../helpers/constants/design-system"),_=e("../../../ducks/swaps/swaps"),S=e("../../../selectors"),h=e("../../../../shared/modules/conversion.utils"),v=e("../../../helpers/utils/util"),y=e("../../../hooks/usePrevious"),b=e("../../../hooks/useTokenTracker"),k=e("../../../hooks/useTokenFiatAmount"),w=e("../../../hooks/useEthFiatAmount"),A=e("../../../../shared/modules/swaps.utils"),I=e("../../../../shared/constants/metametrics"),C=e("../../../../shared/constants/swaps"),O=e("../../../store/actions"),N=e("../../../store/actionConstants"),x=e("../swaps.util"),P=e("../../../../shared/lib/token-util.ts"),D=e("../../../../shared/modules/string-utils"),R=e("../../../../shared/lib/transactions-controller-utils"),M=e("../../../../shared/lib/swaps-utils"),L=e("../../../components/component-library"),F=e("../../../components/component-library/modal-content/deprecated"),j=e("../../../components/component-library/modal-header/deprecated"),U=e("../../../helpers/constants/routes"),G=Q(e("../import-token")),W=Q(e("../transaction-settings/transaction-settings")),B=Q(e("../swaps-banner-alert/swaps-banner-alert")),q=Q(e("../swaps-footer")),H=Q(e("../selected-token/selected-token")),V=Q(e("../list-with-search/list-with-search")),K=Q(e("./smart-transactions-popover")),$=Q(e("./quotes-loading-animation")),Y=Q(e("./review-quote"));function Q(e){return e&&e.__esModule?e:{default:e}}function X(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(X=function(e){return e?a:t})(e)}function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},z.apply(this,arguments)}let Z;function J({ethBalance:e,selectedAccountAddress:t,shuffledTokensList:a}){const o=(0,n.useContext)(f.I18nContext),Q=(0,s.useDispatch)(),X=(0,l.useHistory)(),J=(0,n.useContext)(d.MetaMetricsContext),[ee,te]=(0,n.useState)(undefined),[ae,ne]=(0,n.useState)(!1),[re,oe]=(0,n.useState)(),[se,ie]=(0,n.useState)(!1),le=()=>ie(!1),[ue,ce]=(0,n.useState)(!1),de=()=>ce(!1),[pe,me]=(0,n.useState)(!1),[fe,ge]=(0,n.useState)(null),[Ee,Te]=(0,n.useState)(""),[_e,Se]=(0,n.useState)(""),[he,ve]=(0,n.useState)(0),[ye,be]=(0,n.useState)(!1),[ke,we]=(0,n.useState)(!1),Ae=(0,s.useSelector)(_.getIsFeatureFlagLoaded),Ie=(0,s.useSelector)(_.getBalanceError),Ce=(0,s.useSelector)(_.getFetchParams,i.isEqual),{sourceTokenInfo:Oe={},destinationTokenInfo:Ne={}}=(null==Ce?void 0:Ce.metaData)||{},xe=(0,s.useSelector)(g.getTokens,i.isEqual),Pe=(0,s.useSelector)(_.getTopAssets,i.isEqual),De=(0,s.useSelector)(_.getFromToken,i.isEqual),Re=(0,s.useSelector)(_.getFromTokenInputValue),Me=(0,s.useSelector)(_.getFromTokenError),Le=(0,s.useSelector)(_.getMaxSlippage),Fe=(0,s.useSelector)(_.getToToken,i.isEqual)||Ne,je=(0,s.useSelector)(S.getSwapsDefaultToken,i.isEqual),Ue=(0,s.useSelector)(S.getCurrentChainId),Ge=(0,s.useSelector)(S.getRpcPrefsForCurrentProvider,s.shallowEqual),We=(0,s.useSelector)(S.getTokenList,i.isEqual),Be=(0,s.useSelector)(_.getQuotes,i.isEqual),qe=(0,s.useSelector)(_.getLatestAddedTokenTo,i.isEqual),He=Object.keys(Be).length,Ve=He>0,Ke=(0,s.useSelector)(_.getSwapsErrorKey),$e=(0,s.useSelector)(_.getAggregatorMetadata,s.shallowEqual),Ye=(0,s.useSelector)(_.getTransactionSettingsOpened,s.shallowEqual),Qe=$e?Object.keys($e).length:0,Xe=(0,s.useSelector)(S.getTokenExchangeRates,i.isEqual),ze=(0,s.useSelector)(g.getConversionRate),Ze=(0,s.useSelector)(S.isHardwareWallet),Je=(0,s.useSelector)(S.getHardwareWalletType),et=(0,s.useSelector)(_.getSmartTransactionsOptInStatus),tt=(0,s.useSelector)(_.getSmartTransactionsEnabled),at=(0,s.useSelector)(_.getCurrentSmartTransactionsEnabled),nt=at&&et,rt=et!==undefined,ot=(0,s.useSelector)(_.getCurrentSmartTransactionsError),st=(0,s.useSelector)(S.getCurrentCurrency),it=(0,s.useSelector)(_.getFetchingQuotes),lt=!it&&Ve,ut=tt&&!rt,ct=(0,A.isSwapsDefaultTokenSymbol)(null==Oe?void 0:Oe.symbol,Ue)?je:Oe,{tokensWithBalances:dt}=(0,b.useTokenTracker)({tokens:xe}),pt=!(0,A.isSwapsDefaultTokenSymbol)(null==De?void 0:De.symbol,Ue)&&null!=De&&De.balance?[De]:[],mt=(0,i.uniqBy)([...dt,...xe,...pt],"address"),ft=(0,m.useEqualityCheck)(mt),gt=(0,p.getRenderableTokenData)(De||ct,Xe,ze,st,Ue,We),Et=(0,p.useTokensToSearch)({usersTokens:ft,topTokens:Pe,shuffledTokensList:a,tokenBucketPriority:C.TokenBucketPriority.owned}),Tt=(0,p.useTokensToSearch)({usersTokens:ft,topTokens:Pe,shuffledTokensList:a,tokenBucketPriority:C.TokenBucketPriority.top}),_t=Et.find((({address:e})=>(0,D.isEqualCaseInsensitive)(e,null==Fe?void 0:Fe.address)))||Fe,St=(null==_t?void 0:_t.address)&&!(0,A.isSwapsDefaultTokenAddress)(null==_t?void 0:_t.address,Ue),ht=Number((null==_t?void 0:_t.occurances)||(null==_t?void 0:_t.occurrences)||0),{address:vt,symbol:yt,string:bt,decimals:kt,balance:wt}=gt||{},{address:At}=_t||{},It=wt&&(0,R.calcTokenAmount)(wt,kt).toString(10),Ct=(0,y.usePrevious)(It),Ot=(0,k.useTokenFiatAmount)(vt,Re||0,yt,{showFiat:!0},!0),Nt=(0,w.useEthFiatAmount)(Re||0,{showFiat:!0},!0),xt=(0,A.isSwapsDefaultTokenSymbol)(yt,Ue)?Nt:Ot,Pt=(0,n.useCallback)(((e,t)=>{Q((0,_.setFromTokenInputValue)(e));const a=new r.default(e||0).gt(t||0);Ie!==a&&Q((0,_.setBalanceError)(a)),Q((0,_.setFromTokenError)(De&&(0,x.countDecimals)(e)>De.decimals?"tooManyDecimals":null))}),[Q,De,Ie]);(0,n.useEffect)((()=>{let e;if(!ye)return void ve(0);e=lt?20:500+Math.floor(1500*Math.random());const t=setTimeout((()=>{he<Qe?ve(he+1):he===Qe&&lt&&(async()=>{await Q((0,O.setBackgroundSwapRouteState)("")),be(!1),Ke!==C.ERROR_FETCHING_QUOTES&&Ke!==C.QUOTES_NOT_AVAILABLE_ERROR||Q((0,O.setSwapsErrorKey)(C.QUOTES_NOT_AVAILABLE_ERROR))})()}),e);return function(){clearTimeout(t)}}),[it,he,lt,He,Q,X,Ke,Qe,ye]);const Dt=e=>{null!=e&&e.address&&!xt&&null!==ee?(0,x.fetchTokenPrice)(e.address).then((e=>{null!==e&&e!==undefined&&te(e)})):te(null),null!=e&&e.address&&!ft.find((t=>(0,D.isEqualCaseInsensitive)(t.address,e.address)))&&(0,P.fetchTokenBalance)(e.address,t,global.ethereumProvider).then((t=>{if(null!=t&&t.balance){const a=t.balance.toString(10),n=(0,R.calcTokenAmount)(a,e.decimals);Q((0,_.setSwapsFromToken)({...e,string:n.toString(10),balance:a}))}})),Q((0,_.setSwapsFromToken)(e)),Pt(Re,e.string,e.decimals)},Rt=(0,u.getTokenTrackerLink)(_t.address,Ue,null,null,{blockExplorerUrl:C.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[Ue]??null}),Mt=Ge.blockExplorerUrl?(0,v.getURLHostName)(Rt):o("etherscan"),{address:Lt}=Fe||{},Ft=(0,n.useCallback)((e=>{qe&&e.address!==Lt&&Q((0,O.ignoreTokens)({tokensToIgnore:Lt,dontShowLoadingIndicator:!0})),Q((0,_.setSwapToToken)(e)),ne(!1)}),[Q,qe,Lt]),jt=dt.find((e=>(0,D.isEqualCaseInsensitive)(e.address,null==De?void 0:De.address))),Ut=(0,y.usePrevious)(jt);(0,n.useEffect)((()=>{const e=!(0,A.isSwapsDefaultTokenAddress)(null==jt?void 0:jt.address,Ue),t=(0,D.isEqualCaseInsensitive)(null==jt?void 0:jt.address,null==Ut?void 0:Ut.address),a=(null==jt?void 0:jt.balance)!==(null==Ut?void 0:Ut.balance);e&&t&&a&&Q((0,_.setSwapsFromToken)({...De,balance:null==jt?void 0:jt.balance,string:null==jt?void 0:jt.string}))}),[Q,jt,Ut,De,Ue]),(0,n.useEffect)((()=>{(0,A.isSwapsDefaultTokenAddress)(null==De?void 0:De.address,Ue)&&(null==De?void 0:De.balance)!==(0,h.hexToDecimal)(e)&&Q((0,_.setSwapsFromToken)({...De,balance:(0,h.hexToDecimal)(e),string:(0,h.getValueFromWeiHex)({value:e,numberOfDecimals:4,toDenomination:"ETH"})}))}),[Q,De,e,Ue]),(0,n.useEffect)((()=>{null!=De&&De.symbol||null!=ct&&ct.symbol||Q((0,_.setSwapsFromToken)(je))}),[]),(0,n.useEffect)((()=>{Ct!==It&&Pt(Re,It)}),[Pt,Ct,Re,It]);const Gt=(0,n.useCallback)((()=>{J({event:"Prepare Swap Page Loaded",category:I.MetaMetricsEventCategory.Swaps,sensitiveProperties:{is_hardware_wallet:Ze,hardware_wallet_type:Je,stx_enabled:tt,current_stx_enabled:at,stx_user_opt_in:et}})}),[J,Ze,Je,tt,at,et]);(0,n.useEffect)((()=>{Q((0,O.resetSwapsPostFetchState)()),Q((0,_.setReviewSwapClickedTimestamp)()),Gt()}),[Q,Gt]);const Wt=()=>n.default.createElement("a",{className:"prepare-swap-page__token-etherscan-link",key:"prepare-swap-page-etherscan-link",onClick:()=>{J({event:I.MetaMetricsEventName.ExternalLinkClicked,category:I.MetaMetricsEventCategory.Swaps,properties:{link_type:I.MetaMetricsEventLinkType.TokenTracker,location:"Swaps Confirmation",url_domain:(0,v.getURLHostName)(Rt)}}),global.platform.openTab({url:Rt})},target:"_blank",rel:"noopener noreferrer"},Mt),Bt=`${o("balance")}: ${bt||"0"}`,qt=`${o("balance")}: ${(null==_t?void 0:_t.string)||"0"}`,Ht=(0,M.shouldEnableDirectWrapping)(Ue,vt,_t.address),Vt=Me||!Ae||!Number(Re)||!(null!=_t&&_t.address)||!vt||Number(Le)<0||Number(Le)>C.MAX_ALLOWED_SLIPPAGE||St&&ht<2&&!ae;let Kt;(0,n.useEffect)((()=>{Q((0,O.clearSwapsQuotes)()),Q((0,O.stopPollingForQuotes)());return Z=setTimeout((()=>{Z=null,Vt||(nt&&((0,O.clearSmartTransactionFees)(),Q({type:N.SET_SMART_TRANSACTIONS_ERROR,payload:null})),(async()=>{be(!0),await Q((0,_.fetchQuotesAndSetQuoteState)(X,Re,Le,J,!0))})())}),1e3),()=>clearTimeout(Z)}),[Q,X,Le,J,Vt,Re,vt,At,et,nt]),Kt=Ke&&Ke===C.QUOTES_NOT_AVAILABLE_ERROR?o("swapQuotesNotAvailableErrorTitle"):Vt?null!=_t&&_t.address&&vt?o("swapEnterAmount"):o("swapSelectToken"):o("swapFetchingQuotes");const $t=(0,n.useCallback)((e=>(0,D.isEqualCaseInsensitive)(e.address,vt)),[vt]),Yt=(0,n.useCallback)((e=>(0,D.isEqualCaseInsensitive)(e.address,null==_t?void 0:_t.address)),[null==_t?void 0:_t.address]),Qt=!Ke&&!Vt&&Ve,Xt=!Ke&&!Vt&&!Ve,zt=!Me&&Ie&&yt,Zt=1===ht;(0,n.useEffect)((()=>{Ke===C.QUOTES_EXPIRED_ERROR&&X.push(U.SWAPS_NOTIFICATION_ROUTE)}),[Ke,X]),(0,n.useEffect)((()=>{Xt&&oe("")}),[Xt]);const Jt={onImportTokenCloseClick:()=>{me(!1)},onImportTokenClick:()=>{J({event:"Token Imported",category:I.MetaMetricsEventCategory.Swaps,sensitiveProperties:{symbol:null==fe?void 0:fe.symbol,address:null==fe?void 0:fe.address,chain_id:Ue,is_hardware_wallet:Ze,hardware_wallet_type:Je,stx_enabled:tt,current_stx_enabled:at,stx_user_opt_in:et}}),null==Ft||Ft(fe),ge(null)},setIsImportTokenModalOpen:me,tokenForImport:fe};let ea,ta,aa;re&&!Vt&&(ea=(0,x.formatSwapsValueForDisplay)(re),ta=(0,x.getClassNameForCharLength)(ea,"prepare-swap-page__receive-amount")),Re&&(aa=(0,x.getClassNameForCharLength)(Re,"prepare-swap-page__from-token-amount"));const na=yt&&!(0,A.isSwapsDefaultTokenSymbol)(yt,Ue)&&wt>0;return n.default.createElement("div",{className:"prepare-swap-page"},n.default.createElement("div",{className:"prepare-swap-page__content"},fe&&pe&&n.default.createElement(G.default,z({isOpen:!0},Jt)),n.default.createElement(L.Modal,{onClose:le,isOpen:se,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(L.ModalOverlay,null),n.default.createElement(F.ModalContent,null,n.default.createElement(j.ModalHeader,{onClose:le},o("swapSwapTo")),n.default.createElement(E.default,{paddingTop:10,paddingRight:0,paddingBottom:0,paddingLeft:0,display:T.DISPLAY.FLEX},n.default.createElement(V.default,{selectedItem:_t,itemsToSearch:Tt,onClickItem:e=>{null==Ft||Ft(e),le()},maxListItems:30,searchQuery:_e,setSearchQuery:Se,hideItemIf:$t,shouldSearchForImports:!0,onOpenImportTokenModalClick:e=>{ge(e),me(!0),le(),Se("")}})))),n.default.createElement(L.Modal,{onClose:de,isOpen:ue,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(L.ModalOverlay,null),n.default.createElement(F.ModalContent,null,n.default.createElement(j.ModalHeader,{onClose:de},o("swapSwapFrom")),n.default.createElement(E.default,{paddingTop:10,paddingRight:0,paddingBottom:0,paddingLeft:0,display:T.DISPLAY.FLEX},n.default.createElement(V.default,{selectedItem:gt,itemsToSearch:Et,onClickItem:e=>{null==Dt||Dt(e),de()},maxListItems:30,searchQuery:Ee,setSearchQuery:Te,hideItemIf:Yt})))),n.default.createElement(K.default,{onStartSwapping:()=>{(0,O.setSmartTransactionsOptInStatus)(!0,et)},onManageStxInSettings:e=>{null==e||e.preventDefault(),(0,O.setSmartTransactionsOptInStatus)(!0,et),Q((0,_.setTransactionSettingsOpened)(!0))},isOpen:ut}),n.default.createElement("div",{className:"prepare-swap-page__swap-from-content"},n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.center},n.default.createElement(H.default,{onClick:()=>ce(!0),onClose:de,selectedToken:gt,testId:"prepare-swap-page-swap-from"}),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,alignItems:T.AlignItems.center},n.default.createElement(L.TextField,{className:(0,c.default)("prepare-swap-page__from-token-amount",{[aa]:aa}),size:L.TextFieldSize.Sm,placeholder:"0",onChange:e=>{e.stopPropagation();const t="."===e.target.value?"0.":e.target.value;""===t||/^(\.\d+|\d+(\.\d+)?|\d+\.)$/u.test(t)?Pt(t,It):Pt(Re||"",It)},value:Re,truncate:!1,testId:"prepare-swap-page-from-token-amount"}))),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.stretch},n.default.createElement("div",{className:"prepare-swap-page__balance-message"},yt&&Bt,na&&n.default.createElement("div",{className:"prepare-swap-page__max-balance","data-testid":"prepare-swap-page-max-balance",onClick:()=>Pt(It||"0",It)},o("max"))),Re&&xt&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.flexEnd,alignItems:T.AlignItems.flexEnd},n.default.createElement(L.Text,{variant:T.TextVariant.bodySm,color:T.TextColor.textAlternative},xt))),zt&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.flexStart},n.default.createElement(L.Text,{variant:T.TextVariant.bodySmBold,color:T.TextColor.textAlternative,marginTop:0},o("swapsNotEnoughToken",[yt]))),Me&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.flexStart},n.default.createElement(L.Text,{variant:T.TextVariant.bodySmBold,color:T.TextColor.textAlternative,marginTop:0},o("swapTooManyDecimalsError",[yt,kt]))),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.center},n.default.createElement("div",{className:(0,c.default)("prepare-swap-page__switch-tokens",{"prepare-swap-page__switch-tokens--rotate":ke,"prepare-swap-page__switch-tokens--disabled":Xt}),"data-testid":"prepare-swap-page-switch-tokens",onClick:()=>{Xt||(Ft(gt),Dt(_t),we(!ke))},title:o("swapSwapSwitch")},n.default.createElement(L.Icon,{name:L.IconName.Arrow2Down,size:L.IconSize.Lg})))),n.default.createElement("div",{className:"prepare-swap-page__swap-to-content"},n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.center},n.default.createElement(H.default,{onClick:()=>ie(!0),onClose:le,selectedToken:_t,testId:"prepare-swap-page-swap-to"}),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,alignItems:T.AlignItems.center,marginLeft:2,className:"prepare-swap-page__receive-amount-container"},n.default.createElement(L.Text,{as:"h6","data-testid":"prepare-swap-page-receive-amount",className:(0,c.default)("prepare-swap-page__receive-amount",{[ta]:ta})},ea))),n.default.createElement(E.default,{display:T.DISPLAY.FLEX,justifyContent:T.JustifyContent.spaceBetween,alignItems:T.AlignItems.stretch},n.default.createElement("div",{className:"prepare-swap-page__balance-message"},(null==_t?void 0:_t.string)&&qt))),!Qt&&St&&ht<2&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,marginTop:2},n.default.createElement(L.BannerAlert,{severity:Zt?T.SEVERITIES.WARNING:T.SEVERITIES.DANGER,title:o(Zt?"swapTokenVerifiedOn1SourceTitle":"swapTokenAddedManuallyTitle"),titleProps:{"data-testid":"swaps-banner-title"},width:T.BLOCK_SIZES.FULL},n.default.createElement(E.default,null,n.default.createElement(L.Text,{variant:T.TextVariant.bodyMd,as:"h6","data-testid":"mm-banner-alert-notification-text"},Zt?o("swapTokenVerifiedOn1SourceDescription",[null==_t?void 0:_t.symbol,n.default.createElement(Wt,{key:"block-explorer-link"})]):o("swapTokenAddedManuallyDescription",[n.default.createElement(Wt,{key:"block-explorer-link"})])),!ae&&n.default.createElement(L.ButtonLink,{size:L.ButtonLinkSize.Inherit,textProps:{variant:T.TextVariant.bodyMd,alignItems:T.AlignItems.flexStart},onClick:e=>{e.preventDefault(),ne(!0)}},o("swapContinueSwapping"))))),Ke&&n.default.createElement(E.default,{display:T.DISPLAY.FLEX,marginTop:2},n.default.createElement(B.default,{swapsErrorKey:Ke,currentSlippage:Le})),Ye&&(tt||!tt&&!Ht)&&n.default.createElement(W.default,{onSelect:e=>{Q((0,_.setMaxSlippage)(e))},maxAllowedSlippage:C.MAX_ALLOWED_SLIPPAGE,currentSlippage:Le,smartTransactionsEnabled:tt,smartTransactionsOptInStatus:et,setSmartTransactionsOptInStatus:O.setSmartTransactionsOptInStatus,currentSmartTransactionsError:ot,isDirectWrappingEnabled:Ht,onModalClose:()=>{Q((0,_.setTransactionSettingsOpened)(!1))}}),Xt&&n.default.createElement($.default,{quoteCount:he,numberOfAggregators:Qe}),Qt&&n.default.createElement(Y.default,{setReceiveToAmount:oe})),!Ve&&n.default.createElement(q.default,{submitText:Kt,disabled:!0,hideCancel:!0,showTermsOfService:!0}))}J.propTypes={ethBalance:o.default.string,selectedAccountAddress:o.default.string,shuffledTokensList:o.default.array}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/prepare-swap-page.js"}],[5286,{"../../../components/component-library":4582,"../../../components/ui/box":4749,"../../../contexts/i18n":4890,"../../../helpers/constants/design-system":4914,"../mascot-background-animation/mascot-background-animation":5283,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=c(e("prop-types")),o=e("../../../contexts/i18n"),s=c(e("../../../components/ui/box")),i=e("../../../helpers/constants/design-system"),l=e("../../../components/component-library"),u=c(e("../mascot-background-animation/mascot-background-animation"));function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e){const{quoteCount:t,numberOfAggregators:a}=e,r=(0,n.useContext)(o.I18nContext);return n.default.createElement(s.default,{marginTop:4,display:i.DISPLAY.FLEX,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center,flexDirection:i.FLEX_DIRECTION.COLUMN},n.default.createElement(s.default,{display:i.DISPLAY.FLEX,justifyContent:i.JustifyContent.center,alignItems:i.AlignItems.center},n.default.createElement(l.Text,{variant:i.TextVariant.bodyMd,as:"h6",color:i.TextColor.textAlternative,marginLeft:1,marginRight:1},r("swapFetchingQuote")),n.default.createElement(l.Text,{variant:i.TextVariant.bodyMdBold,as:"h6",color:i.TextColor.textAlternative},r("swapQuoteNofM",[Math.min(t+1,a),a]))),n.default.createElement(u.default,null))}p.propTypes={quoteCount:r.default.number.isRequired,numberOfAggregators:r.default.number.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/quotes-loading-animation.js"}],[5287,{"../../../../app/scripts/lib/util":90,"../../../../shared/constants/gas":4072,"../../../../shared/constants/metametrics":4077,"../../../../shared/constants/network":4078,"../../../../shared/constants/swaps":4086,"../../../../shared/lib/metamask-controller-utils":4094,"../../../../shared/lib/swaps-utils":4096,"../../../../shared/lib/transactions-controller-utils":4099,"../../../../shared/modules/conversion.utils":4105,"../../../../shared/modules/string-utils":4119,"../../../../shared/modules/transaction.utils":4121,"../../../components/component-library":4582,"../../../components/ui/box":4749,"../../../components/ui/info-tooltip":4807,"../../../contexts/i18n":4890,"../../../contexts/metametrics":4891,"../../../ducks/metamask/metamask":4906,"../../../ducks/swaps/swaps":4910,"../../../helpers/constants/design-system":4914,"../../../helpers/constants/routes":4919,"../../../helpers/utils/optimism/fetchEstimatedL1Fee":4949,"../../../hooks/experiences/useRamps":4960,"../../../hooks/gasFeeInput/useGasFeeInputs":4963,"../../../hooks/useEqualityCheck":4979,"../../../hooks/useEthFiatAmount":4980,"../../../hooks/usePrevious":4990,"../../../hooks/useTokenTracker":5005,"../../../selectors":5338,"../../../store/actions":5345,"../../confirm-approve/confirm-approve.util":5028,"../countdown-timer":5263,"../exchange-rate-display":5271,"../select-quote-popover":5297,"../swaps-footer":5316,"../swaps.util":5318,"./slippage-notification-modal":5288,"./view-quote-price-difference":5290,"@sentry/browser":1878,"bignumber.js":2364,classnames:2479,lodash:3444,"prop-types":3583,react:3799,"react-redux":3764,"react-router-dom":3784},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=Z;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=Q(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=Y(e("bignumber.js")),i=e("lodash"),l=Y(e("classnames")),u=e("@sentry/browser"),c=Y(e("prop-types")),d=e("../../../contexts/i18n"),p=Y(e("../select-quote-popover")),m=e("../../../hooks/useEthFiatAmount"),f=e("../../../hooks/useEqualityCheck"),g=e("../../../hooks/usePrevious"),E=e("../../../hooks/gasFeeInput/useGasFeeInputs"),T=e("../../../contexts/metametrics"),_=e("../../../ducks/swaps/swaps"),S=e("../../../selectors"),h=e("../../../ducks/metamask/metamask"),v=e("../../../store/actions"),y=e("../../../helpers/constants/routes"),b=e("../../../../shared/constants/network"),k=e("../../../../shared/modules/conversion.utils"),w=e("../../confirm-approve/confirm-approve.util"),A=e("../swaps.util"),I=e("../../../hooks/useTokenTracker"),C=e("../../../../shared/constants/swaps"),O=e("../../../../shared/constants/gas"),N=Y(e("../countdown-timer")),x=Y(e("../swaps-footer")),P=Y(e("../../../components/ui/box")),D=e("../../../helpers/constants/design-system"),R=e("../../../components/component-library"),M=e("../../../../shared/constants/metametrics"),L=e("../../../../shared/modules/string-utils"),F=e("../../../../shared/modules/transaction.utils"),j=e("../../../../shared/lib/metamask-controller-utils"),U=e("../../../../shared/lib/transactions-controller-utils"),G=e("../../../../app/scripts/lib/util"),W=e("../../../../shared/lib/swaps-utils"),B=Y(e("../../../helpers/utils/optimism/fetchEstimatedL1Fee")),q=Y(e("../exchange-rate-display")),H=Y(e("../../../components/ui/info-tooltip")),V=Y(e("../../../hooks/experiences/useRamps")),K=Y(e("./view-quote-price-difference")),$=Y(e("./slippage-notification-modal"));function Y(e){return e&&e.__esModule?e:{default:e}}function Q(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(Q=function(e){return e?a:t})(e)}let X;const z="https://community.metamask.io/t/what-is-gas-why-do-transactions-take-so-long/3172";function Z({setReceiveToAmount:e}){var t,a,c,Y,Q,Z;const J=(0,o.useHistory)(),ee=(0,r.useDispatch)(),te=(0,n.useContext)(d.I18nContext),ae=(0,n.useContext)(T.MetaMetricsContext),[ne,re]=(0,n.useState)(!1),[oe,se]=(0,n.useState)(!1),[ie]=(0,n.useState)(!1),[le,ue]=(0,n.useState)(null),[ce,de]=(0,n.useState)(null),[pe,me]=(0,n.useState)(null),[fe]=(0,n.useState)(Date.now()),{openBuyCryptoInPdapp:ge}=(0,V.default)(),[Ee,Te]=(0,n.useState)(!1),[_e,Se]=(0,n.useState)(!1),he=[O.GasRecommendations.high,O.GasRecommendations.medium],ve=(0,r.useSelector)(_.getBackgroundSwapRouteState),ye=(0,r.useSelector)(_.getQuotes,i.isEqual);(0,n.useEffect)((()=>{Object.values(ye).length?"awaiting"===ve&&J.push(y.AWAITING_SWAP_ROUTE):J.push(y.PREPARE_SWAP_ROUTE)}),[J,ye,ve]);const be=(0,r.useSelector)(_.getQuotesLastFetched),ke=(0,g.usePrevious)(be),we=(0,r.useSelector)(_.getUsedSwapsGasPrice),Ae=(0,r.useSelector)(_.getCustomSwapsGas),Ie=(0,r.useSelector)(_.getCustomMaxFeePerGas),Ce=(0,r.useSelector)(_.getCustomMaxPriorityFeePerGas),Oe=(0,r.useSelector)(_.getSwapsUserFeeLevel),Ne=(0,r.useSelector)(S.getTokenExchangeRates,i.isEqual),xe=(0,f.useEqualityCheck)(Ne),{balance:Pe}=(0,r.useSelector)(S.getSelectedAccount,r.shallowEqual),De=(0,r.useSelector)(S.conversionRateSelector),Re=(0,r.useSelector)(S.getUSDConversionRate),Me=(0,r.useSelector)(S.getIsMultiLayerFeeNetwork),Le=(0,r.useSelector)(S.getCurrentCurrency),Fe=(0,r.useSelector)(h.getTokens,i.isEqual),je=(0,r.useSelector)(S.checkNetworkAndAccountSupports1559),Ue=(0,r.useSelector)(_.getBalanceError),Ge=(0,r.useSelector)(_.getFetchParams,i.isEqual),We=(0,r.useSelector)(_.getApproveTxParams,r.shallowEqual),Be=(0,r.useSelector)(_.getSelectedQuote,i.isEqual),qe=(0,r.useSelector)(_.getTopQuote,i.isEqual),He=Be||qe,Ve=(null==He||null===(t=He.trade)||void 0===t?void 0:t.value)??"0x0",Ke=(0,r.useSelector)(S.getSwapsDefaultToken,i.isEqual),$e=(0,r.useSelector)(S.getCurrentChainId),Ye=(0,r.useSelector)(h.getNativeCurrency),Qe=(0,r.useSelector)(_.getReviewSwapClickedTimestamp),Xe=(0,r.useSelector)(_.getSmartTransactionsOptInStatus),ze=(0,r.useSelector)(_.getSmartTransactionsEnabled),Ze=(0,r.useSelector)(_.getSwapsSTXLoading),Je=(0,r.useSelector)(_.getCurrentSmartTransactionsError),et=(0,r.useSelector)(_.getSmartTransactionsError),tt=(0,r.useSelector)(_.getCurrentSmartTransactionsEnabled),at=(0,r.useSelector)(_.getSmartTransactionFees,i.isEqual),nt=(0,r.useSelector)(_.getSwapsNetworkConfig,r.shallowEqual),rt=He.trade,ot=tt&&Xe,[st]=(0,n.useState)((()=>{const e=Number(null==Ge?void 0:Ge.slippage);return e>0&&e<=1?C.SLIPPAGE_LOW_ERROR:e>=5&&e<=C.MAX_ALLOWED_SLIPPAGE?C.SLIPPAGE_HIGH_ERROR:""}));let it;je&&(it=(0,E.useGasFeeInputs)(O.GasRecommendations.high,{userFeeLevel:Oe||O.GasRecommendations.high}));const lt=null==Ge?void 0:Ge.sourceToken,ut={reg_tx_fee_in_usd:undefined,reg_tx_fee_in_eth:undefined,reg_tx_max_fee_in_usd:undefined,reg_tx_max_fee_in_eth:undefined,stx_fee_in_usd:undefined,stx_fee_in_eth:undefined,stx_max_fee_in_usd:undefined,stx_max_fee_in_eth:undefined},ct=(null==He?void 0:He.gasEstimateWithRefund)||`0x${(0,k.decimalToHex)((null==He?void 0:He.averageGas)||0)}`,dt=(null==He?void 0:He.gasEstimate)||"0x0",pt=new s.default(dt,16).times((null==He?void 0:He.gasMultiplier)||_.FALLBACK_GAS_MULTIPLIER,10).round(0).toString(16),mt=null!=He&&He.gasEstimate?pt:`0x${(0,k.decimalToHex)((null==He?void 0:He.maxGas)||0)}`,ft=Ae||mt;let gt,Et,Tt;if(je){const{maxFeePerGas:e,maxPriorityFeePerGas:t,gasFeeEstimates:{estimatedBaseFee:a="0"}}=it;gt=Ie||(0,k.decGWEIToHexWEI)(e),Et=Ce||(0,k.decGWEIToHexWEI)(t),Tt=(0,k.addHexes)((0,k.decGWEIToHexWEI)(a),Et)}let _t=(0,U.calcGasTotal)(ft,gt||we);null!==ce&&(_t=(0,k.sumHexes)(_t||"0x0",ce||"0x0"));const{tokensWithBalances:St}=(0,I.useTokenTracker)({tokens:Fe,includeFailedTokens:!0}),ht=lt===Ke.address?Ke:St.find((({address:e})=>(0,L.isEqualCaseInsensitive)(e,lt))),vt=ht||He.sourceTokenInfo,yt=(null==St?void 0:St.length)&&(0,U.calcTokenAmount)(vt.balance||"0x0",vt.decimals).toFixed(9),bt=St&&ht===undefined,kt=(0,F.parseStandardTokenTransactionData)(null==We?void 0:We.data),wt=kt&&(0,j.getTokenValueParam)(kt),At=wt&&(null==vt?void 0:vt.decimals)!==undefined&&(0,U.calcTokenAmount)(wt,vt.decimals).toFixed(9),It=null==We?void 0:We.gas,Ct=(0,n.useMemo)((()=>(0,A.quotesToRenderableData)({quotes:ye,gasPrice:je?Tt:we,conversionRate:De,currentCurrency:Le,approveGas:It,tokenConversionRates:xe,chainId:$e,smartTransactionEstimatedGas:ze&&Xe&&(null==at?void 0:at.tradeTxFees),nativeCurrencySymbol:Ye,multiLayerL1ApprovalFeeTotal:pe})),[ye,we,Tt,je,De,Le,It,xe,$e,null==at?void 0:at.tradeTxFees,Ye,ze,Xe,pe]),Ot=Ct.find((e=>e.aggId===He.aggregator)),{destinationTokenDecimals:Nt,destinationTokenSymbol:xt,destinationTokenValue:Pt,sourceTokenDecimals:Dt,sourceTokenSymbol:Rt,sourceTokenValue:Mt}=Ot;let{feeInFiat:Lt,feeInEth:Ft,rawEthFee:jt,feeInUsd:Ut}=(0,A.getRenderableNetworkFeesForQuote)({tradeGas:ct,approveGas:It,gasPrice:je?Tt:we,currentCurrency:Le,conversionRate:De,USDConversionRate:Re,tradeValue:Ve,sourceSymbol:Rt,sourceAmount:He.sourceAmount,chainId:$e,nativeCurrencySymbol:Ye,multiLayerL1FeeTotal:ce});ut.reg_tx_fee_in_usd=Number(Ut),ut.reg_tx_fee_in_eth=Number(jt);const Gt=(0,A.getRenderableNetworkFeesForQuote)({tradeGas:ft,approveGas:It,gasPrice:gt||we,currentCurrency:Le,conversionRate:De,USDConversionRate:Re,tradeValue:Ve,sourceSymbol:Rt,sourceAmount:He.sourceAmount,chainId:$e,nativeCurrencySymbol:Ye,multiLayerL1FeeTotal:ce});let{feeInFiat:Wt,feeInEth:Bt,rawEthFee:qt,feeInUsd:Ht}=Gt;if(ut.reg_tx_max_fee_in_usd=Number(Ht),ut.reg_tx_max_fee_in_eth=Number(qt),ot&&null!=at&&at.tradeTxFees){var Vt,Kt;const e=(null==at?void 0:at.tradeTxFees.feeEstimate)+((null==at||null===(Vt=at.approvalTxFees)||void 0===Vt?void 0:Vt.feeEstimate)||0),t=(null==at?void 0:at.tradeTxFees.maxFeeEstimate)+((null==at||null===(Kt=at.approvalTxFees)||void 0===Kt?void 0:Kt.maxFeeEstimate)||0);({feeInFiat:Lt,feeInEth:Ft,rawEthFee:jt,feeInUsd:Ut}=(0,A.getFeeForSmartTransaction)({chainId:$e,currentCurrency:Le,conversionRate:De,USDConversionRate:Re,nativeCurrencySymbol:Ye,feeInWeiDec:e})),ut.stx_fee_in_usd=Number(Ut),ut.stx_fee_in_eth=Number(jt),ut.estimated_gas=null==at?void 0:at.tradeTxFees.gasLimit,({feeInFiat:Wt,feeInEth:Bt,rawEthFee:qt,feeInUsd:Ht}=(0,A.getFeeForSmartTransaction)({chainId:$e,currentCurrency:Le,conversionRate:De,USDConversionRate:Re,nativeCurrencySymbol:Ye,feeInWeiDec:t})),ut.stx_max_fee_in_usd=Number(Ht),ut.stx_max_fee_in_eth=Number(qt)}const $t=new s.default(He.sourceAmount),Yt=new s.default(He.trade.value||0,10).plus(new s.default(_t,16)),Qt=((null==St?void 0:St.length)||Ue)&&$t.gt(new s.default(vt.balance||"0x0")),Xt=Yt.gt(new s.default(Pe||"0x0")),zt=Qt?(0,U.toPrecisionWithoutTrailingZeros)((0,U.calcTokenAmount)($t,vt.decimals).minus(yt).toString(10),6):null,Zt=Xt?(0,U.toPrecisionWithoutTrailingZeros)(Yt.minus(Pe,16).div("1000000000000000000",10).toString(10),6):null;let Jt;ot&&null!=et&&et.balanceNeededWei&&(Jt=(0,k.decWEIToDecETH)(et.balanceNeededWei-et.currentBalanceWei));const ea=(0,g.usePrevious)(Jt),ta=(0,r.useSelector)(_.getDestinationTokenInfo,i.isEqual);(0,n.useEffect)((()=>{ot?Qt?ee((0,_.setBalanceError)(!0)):Ue&&!Qt&&ee((0,_.setBalanceError)(!1)):Qt||Xt?ee((0,_.setBalanceError)(!0)):!Ue||Qt||Xt||ee((0,_.setBalanceError)(!1))}),[Qt,Xt,ee,ot,Ue]),(0,n.useEffect)((()=>{!le&&At&&ue(At)}),[le,At]);const aa=(Ue||zt||!ot&&Zt||ot&&Jt)&&!ie,na=(0,r.useSelector)(S.isHardwareWallet),ra=(0,r.useSelector)(S.getHardwareWalletType),oa=Object.values(ye).length,sa=(0,n.useRef)(),ia=(0,n.useMemo)((()=>({token_from:Rt,token_from_amount:Mt,token_to:xt,token_to_amount:Pt,request_type:null==Ge?void 0:Ge.balanceError,slippage:null==Ge?void 0:Ge.slippage,custom_slippage:2!==(null==Ge?void 0:Ge.slippage),response_time:null==Ge?void 0:Ge.responseTime,best_quote_source:null==qe?void 0:qe.aggregator,available_quotes:oa,is_hardware_wallet:na,hardware_wallet_type:ra,stx_enabled:ze,current_stx_enabled:tt,stx_user_opt_in:Xe})),[Rt,Mt,xt,Pt,null==Ge?void 0:Ge.balanceError,null==Ge?void 0:Ge.slippage,null==Ge?void 0:Ge.responseTime,null==qe?void 0:qe.aggregator,oa,na,ra,ze,tt,Xe]),la=(0,n.useCallback)((()=>{ae({event:"Best Quote Reviewed",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ia,network_fees:Lt}})}),[ae,ia,Lt]),ua=(0,n.useCallback)((()=>{ae({event:"Review Quote Component Loaded",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ia,response_time:fe-Qe}})}),[ae,ia,fe,Qe]);(0,n.useEffect)((()=>{!sa.current&&[Rt,Mt,xt,Pt,Ge,qe,oa,Lt].every((e=>null!==e&&e!==undefined))&&(sa.current=!0,la())}),[Ge,qe,oa,Lt,xt,Pt,Rt,Mt,la]),(0,n.useEffect)((()=>{if((ot&&ea||!ot)&&be===ke)return;let e;if(ot&&Jt)e=Jt;else{if(ot||!Zt)return;e=Zt}ae({event:M.MetaMetricsEventName.SwapError,category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ia,error_type:M.MetaMetricsEventErrorType.InsufficientGas,additional_balance_needed:e}})}),[be,ke,Jt,ot,ae,ea,Zt,ia]);const ca=He.fee,da=()=>{ae({event:"Edit Spend Limit Opened",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ia,custom_spend_limit_set:le===At,custom_spend_limit_amount:le===At?null:At}}),ee((0,v.showModal)({name:"EDIT_APPROVAL_PERMISSION",decimals:vt.decimals,origin:"MetaMask",setCustomAmount:e=>{const t=""===e?le:e,a=(0,w.getCustomTxParamsData)(We.data,{customPermissionAmount:t,decimals:vt.decimals});null!=t&&t.length&&We.data!==a&&ee((0,v.setCustomApproveTxData)(a))},tokenAmount:le,customTokenAmount:le===At?null:At,tokenBalance:yt,tokenSymbol:vt.symbol,requiredMinimum:(0,U.calcTokenAmount)(He.sourceAmount,vt.decimals)}))},pa=Boolean(Jt||Zt),ma=bt?te("swapTokenBalanceUnavailable",[Rt]):te("swapApproveNeedMoreTokens",[n.default.createElement("span",{key:"swapApproveNeedMoreTokens-1"},zt||Jt||Zt),zt&&Rt!==Ke.symbol?Rt:Ke.symbol]),fa=null==He||null===(a=He.priceSlippage)||void 0===a?void 0:a.bucket,ga=(0,g.usePrevious)(fa);(0,n.useEffect)((()=>{Ee&&ga===O.GasRecommendations.medium&&fa===O.GasRecommendations.high&&Te(!1)}),[fa,Ee,ga]);let Ea=null;const Ta=(0,m.useEthFiatAmount)((null==He||null===(c=He.priceSlippage)||void 0===c?void 0:c.sourceAmountInETH)||0,{showFiat:!0}),_a=(0,m.useEthFiatAmount)((null==He||null===(Y=He.priceSlippage)||void 0===Y?void 0:Y.destinationAmountInETH)||0,{showFiat:!0}),Sa=!Ta||!_a||Boolean(null==He||null===(Q=He.priceSlippage)||void 0===Q?void 0:Q.calculationError);let ha=0;null!=He&&null!==(Z=He.priceSlippage)&&void 0!==Z&&Z.ratio&&(ha=parseFloat(new s.default(He.priceSlippage.ratio,10).minus(1,10).times(100,10).toFixed(2),10));const va=(0,g.usePrevious)(ha),ya=!bt&&!aa&&He&&(he.includes(fa)||Sa);ya&&(Ea=n.default.createElement(K.default,{usedQuote:He,sourceTokenValue:Mt,destinationTokenValue:Pt,priceSlippageFromSource:Ta,priceSlippageFromDestination:_a,priceDifferencePercentage:ha,priceSlippageUnknownFiatValue:Sa,onAcknowledgementClick:()=>{Te(!0)},acknowledged:Ee}));const ba=aa||ya,ka=Boolean(ne||Ue||bt||ya&&!Ee||je&&Tt===undefined||!je&&(null===we||we===undefined)||tt&&(Je||et)||tt&&Xe&&!(null!=at&&at.tradeTxFees));(0,n.useEffect)((()=>{ya&&Ee&&be!==ke&&ha!==va&&Te(!1)}),[Ee,ke,be,ya,ha,va]),(0,n.useEffect)((()=>{if(ot&&!Qt){const e={from:rt.from,to:rt.to,value:rt.value,data:rt.data,gas:rt.gas,chainId:$e};X=setInterval((()=>{Ze||ee((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:We,fallbackOnNotEnoughFunds:!1}))}),nt.stxGetTransactionsRefreshTime),ee((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:We,fallbackOnNotEnoughFunds:!1}))}else X&&clearInterval(X);return()=>clearInterval(X)}),[ee,ot,rt.data,rt.from,rt.value,rt.gas,rt.to,$e,nt.stxGetTransactionsRefreshTime,Qt]),(0,n.useEffect)((()=>{ee((0,v.setSwapsQuotesPollingLimitEnabled)(!0)),Qe&&ua()}),[ee,ua,Qe]),(0,n.useEffect)((()=>{!tt&&Je&&ne&&re(!1)}),[tt,Je,ne]),(0,n.useEffect)((()=>{if(!Me||null==He||!He.multiLayerL1TradeFeeTotal)return;(async()=>{try{let e="0x0";We&&(e=await(0,B.default)({txParams:{...We,gasPrice:(0,G.addHexPrefix)(We.gasPrice),value:"0x0"},chainId:$e}),me(e));const t=(0,k.sumHexes)(He.multiLayerL1TradeFeeTotal,e);de(t)}catch(e){(0,u.captureException)(e),de(null),me(null)}})()}),[rt,We,Me,$e,He]);const wa=(0,W.calcTokenValue)(Pt,Nt),Aa=(0,U.calcTokenAmount)(wa,Nt),Ia=(0,A.formatSwapsValueForDisplay)(Aa),Ca=Ia.match(/\d+/gu).join("").length;let Oa=Ia;Ca>20&&(Oa=`${Ia.slice(0,20)}...`),(0,n.useEffect)((()=>{e(Oa)}),[Oa,e]);const Na=!We||Ue&&!ie,xa=n.default.createElement("span",{key:"fee-card-approve-symbol",className:"fee-card__bold"},te("enableToken",[Rt])),Pa=({acknowledgedSlippage:e=!1})=>{!st||e?(re(!0),Ue?ta.symbol===Ke.symbol?J.push(y.DEFAULT_ROUTE):J.push(`${y.ASSET_ROUTE}/${ta.address}`):ot&&null!=at&&at.tradeTxFees?ee((0,_.signAndSendSwapsSmartTransaction)({unsignedTransaction:rt,trackEvent:ae,history:J,additionalTrackingParams:ut})):ee((0,_.signAndSendTransactions)(J,ae,ut))):Se(!0)};return n.default.createElement("div",{className:"review-quote"},n.default.createElement("div",{className:"review-quote__content"},n.default.createElement($.default,{isOpen:_e,setSlippageNotificationModalOpened:Se,slippageErrorKey:st,onSwapSubmit:Pa,currentSlippage:null==Ge?void 0:Ge.slippage}),oe&&n.default.createElement(p.default,{quoteDataRows:Ct,onClose:()=>se(!1),onSubmit:e=>ee((0,_.swapsQuoteSelected)(e)),swapToSymbol:xt,initialAggId:He.aggregator,onQuoteDetailsIsOpened:()=>{ae({event:"Quote Details Opened",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ia,other_quote_selected:(null==He?void 0:He.aggregator)!==(null==qe?void 0:qe.aggregator),other_quote_selected_source:(null==He?void 0:He.aggregator)===(null==qe?void 0:qe.aggregator)?null:null==He?void 0:He.aggregator}})},hideEstimatedGasFee:ze&&Xe}),ba&&n.default.createElement(n.default.Fragment,null,Ea,(aa||bt)&&n.default.createElement(R.BannerAlert,{title:te("notEnoughBalance"),titleProps:{"data-testid":"swaps-banner-title"},severity:D.Severity.Info,description:ma,descriptionProps:{"data-testid":"mm-banner-alert-notification-text"},actionButtonLabel:pa?te("buyMoreAsset",[Ye]):undefined,actionButtonOnClick:pa?()=>ge():undefined,marginTop:2})),n.default.createElement("div",{className:"review-quote__countdown-timer-container"},n.default.createElement(N.default,{timeStarted:be,warningTime:"0:10",labelKey:"swapNewQuoteIn"})),n.default.createElement(P.default,{marginTop:1,marginBottom:0,display:D.DISPLAY.FLEX,flexDirection:D.FlexDirection.Column,className:"review-quote__overview"},n.default.createElement(P.default,{display:D.DISPLAY.FLEX,justifyContent:D.JustifyContent.spaceBetween,alignItems:D.AlignItems.center},n.default.createElement(R.Text,{variant:D.TextVariant.bodyMd,marginRight:1,color:D.TextColor.textAlternative},te("quoteRate")),n.default.createElement(q.default,{primaryTokenValue:(0,W.calcTokenValue)(Mt,Dt),primaryTokenDecimals:Dt,primaryTokenSymbol:Rt,secondaryTokenValue:wa,secondaryTokenDecimals:Nt,secondaryTokenSymbol:xt,boldSymbols:!1,className:"main-quote-summary__exchange-rate-display",showIconForSwappingTokens:!1})),n.default.createElement(P.default,{display:D.DISPLAY.FLEX,justifyContent:D.JustifyContent.spaceBetween,alignItems:D.AlignItems.stretch},n.default.createElement(P.default,{display:D.DISPLAY.FLEX,alignItems:D.AlignItems.center,width:D.FRACTIONS.SIX_TWELFTHS},n.default.createElement(R.Text,{variant:D.TextVariant.bodyMd,as:"h6",color:D.TextColor.textAlternative,marginRight:1},te("transactionDetailGasHeading")),n.default.createElement(H.default,{position:"left",contentText:n.default.createElement(n.default.Fragment,null,n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},te("swapGasFeesSummary",[(()=>{switch($e){case b.CHAIN_IDS.MAINNET:return te("networkNameEthereum");case b.CHAIN_IDS.BSC:return te("networkNameBSC");case b.CHAIN_IDS.POLYGON:return te("networkNamePolygon");case b.CHAIN_IDS.LOCALHOST:return te("networkNameTestnet");case b.CHAIN_IDS.GOERLI:return te("networkNameGoerli");case b.CHAIN_IDS.AVALANCHE:return te("networkNameAvalanche");case b.CHAIN_IDS.OPTIMISM:return te("networkNameOpMainnet");case b.CHAIN_IDS.ARBITRUM:return te("networkNameArbitrum");case b.CHAIN_IDS.ZKSYNC_ERA:return te("networkNameZkSyncEra");case b.CHAIN_IDS.LINEA_MAINNET:return te("networkNameLinea");default:throw new Error("This network is not supported for token swaps")}})()])),n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},te("swapGasFeesDetails")),n.default.createElement("p",{className:"fee-card__info-tooltip-paragraph"},n.default.createElement("a",{className:"fee-card__link",onClick:()=>{ae({event:'Clicked "Gas Fees: Learn More" Link',category:M.MetaMetricsEventCategory.Swaps}),global.platform.openTab({url:z})},target:"_blank",rel:"noopener noreferrer"},te("swapGasFeesLearnMore"))))})),n.default.createElement(P.default,{display:D.DISPLAY.FLEX,alignItems:D.AlignItems.flexEnd,width:D.FRACTIONS.SIX_TWELFTHS},n.default.createElement(R.Text,{variant:D.TextVariant.bodyMd,as:"h6",color:D.TextColor.textAlternative,width:D.FRACTIONS.EIGHT_TWELFTHS,textAlign:D.TEXT_ALIGN.RIGHT,paddingRight:1},Ft),n.default.createElement(R.Text,{variant:D.TextVariant.bodyMdBold,as:"h6",color:D.TextColor.textAlternative,"data-testid":"review-quote-gas-fee-in-fiat",width:D.FRACTIONS.FOUR_TWELFTHS,textAlign:D.TEXT_ALIGN.RIGHT},` ${Lt}`))),(Wt||Bt)&&n.default.createElement(P.default,{display:D.DISPLAY.FLEX},n.default.createElement(P.default,{display:D.DISPLAY.FLEX,width:D.FRACTIONS.SIX_TWELFTHS}),n.default.createElement(P.default,{display:D.DISPLAY.FLEX,justifyContent:D.JustifyContent.flexEnd,width:D.FRACTIONS.SIX_TWELFTHS},n.default.createElement(R.Text,{variant:D.TextVariant.bodySm,color:D.TextColor.textAlternative,width:D.FRACTIONS.EIGHT_TWELFTHS,paddingRight:1,textAlign:D.TEXT_ALIGN.RIGHT},`${te("maxFee")}: `),n.default.createElement(R.Text,{variant:D.TextVariant.bodySm,color:D.TextColor.textAlternative,width:D.FRACTIONS.FOUR_TWELFTHS,textAlign:D.TEXT_ALIGN.RIGHT},Wt||Bt))),!Na&&n.default.createElement(P.default,{display:D.DISPLAY.FLEX,justifyContent:D.JustifyContent.spaceBetween},n.default.createElement(R.Text,{variant:D.TextVariant.bodyMd,as:"h6",color:D.TextColor.textAlternative,marginRight:1},te("swapEnableTokenForSwapping",[xa])),n.default.createElement(R.Text,{variant:D.TextVariant.bodyMd},n.default.createElement(R.ButtonLink,{onClick:()=>da(),size:D.Size.inherit,className:"review-quote__edit-limit"},te("swapEditLimit")))),n.default.createElement(P.default,{display:D.DISPLAY.FLEX,marginTop:3,justifyContent:D.JustifyContent.center,alignItems:D.AlignItems.center},n.default.createElement(R.Text,{variant:D.TextVariant.bodySm,color:D.TextColor.textDefault},te("swapIncludesMetaMaskFeeViewAllQuotes",[ca,n.default.createElement(R.ButtonLink,{key:"view-all-quotes","data-testid":"review-quote-view-all-quotes",onClick:()=>{ae({event:"All Available Quotes Opened",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ia,other_quote_selected:(null==He?void 0:He.aggregator)!==(null==qe?void 0:qe.aggregator),other_quote_selected_source:(null==He?void 0:He.aggregator)===(null==qe?void 0:qe.aggregator)?null:null==He?void 0:He.aggregator}}),se(!0)},size:D.Size.inherit},te("viewAllQuotes"))]))))),n.default.createElement(x.default,{onSubmit:Pa,submitText:te(ot&&Ze?"preparingSwap":"swap"),hideCancel:!0,disabled:ka,className:(0,l.default)("review-quote__footer",{"review-quote__thin-swaps-footer":ba}),showTopBorder:!0,showTermsOfService:!0}))}Z.propTypes={setReceiveToAmount:c.default.func.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/review-quote.js"}],[5288,{"../../../../shared/constants/swaps":4086,"../../../components/component-library":4582,"../../../components/component-library/modal-content/deprecated":4590,"../../../components/component-library/modal-header/deprecated":4599,"../../../contexts/i18n":4890,"../../../helpers/constants/design-system":4914,"../swaps-banner-alert/swaps-banner-alert":5315,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function({isOpen:e,slippageErrorKey:t,setSlippageNotificationModalOpened:a,onSwapSubmit:n,currentSlippage:p}){const m=(0,r.useContext)(o.I18nContext),[f,g]=(0,r.useState)(!1),E=m(f?"preparingSwap":"swapAnyway");return r.default.createElement(i.Modal,{onClose:()=>a(!1),isOpen:e,isClosedOnOutsideClick:!0,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},r.default.createElement(i.ModalOverlay,null),r.default.createElement(l.ModalContent,null,r.default.createElement(u.ModalHeader,{onClose:()=>a(!1)},t===c.SLIPPAGE_HIGH_ERROR?m("swapHighSlippage"):t===c.SLIPPAGE_LOW_ERROR?m("swapLowSlippage"):""),r.default.createElement(i.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,justifyContent:s.JustifyContent.spaceBetween,alignItems:s.AlignItems.stretch,className:"high-slippage__content",marginTop:7},r.default.createElement(d.default,{swapsErrorKey:t,showTransactionSettingsLink:!0,currentSlippage:p}),r.default.createElement(i.Box,{marginTop:5},r.default.createElement(i.ButtonPrimary,{onClick:()=>{g(!0),n({acknowledgedSlippage:!0})},block:!0,"data-testid":"high-slippage-continue-anyway",disabled:f},E)))))};var n,r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),o=e("../../../contexts/i18n"),s=e("../../../helpers/constants/design-system"),i=e("../../../components/component-library"),l=e("../../../components/component-library/modal-content/deprecated"),u=e("../../../components/component-library/modal-header/deprecated"),c=e("../../../../shared/constants/swaps"),d=(n=e("../swaps-banner-alert/swaps-banner-alert"))&&n.__esModule?n:{default:n};function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/slippage-notification-modal.tsx"}],[5289,{"../../../../shared/constants/swaps":4086,"../../../components/component-library":4582,"../../../components/component-library/modal-content/deprecated":4590,"../../../components/component-library/modal-header/deprecated":4599,"../../../helpers/constants/design-system":4914,"../../../hooks/useI18nContext":4982,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function({onStartSwapping:e,onManageStxInSettings:t,isOpen:a}){const n=(0,o.useI18nContext)();return r.default.createElement(i.Modal,{isOpen:a,onClose:e,isClosedOnOutsideClick:!1,isClosedOnEscapeKey:!1,className:"mm-modal__custom-scrollbar"},r.default.createElement(i.ModalOverlay,null),r.default.createElement(l.ModalContent,null,r.default.createElement(u.ModalHeader,{alignItems:s.AlignItems.center,justifyContent:s.JustifyContent.center},n("smartSwapsAreHere")),r.default.createElement(i.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column,gap:4,marginTop:4},r.default.createElement(i.Box,{display:s.Display.Flex,flexDirection:s.FlexDirection.Column},r.default.createElement("img",{src:"./images/logo/metamask-smart-transactions.png",alt:n("swapSwapSwitch")})),r.default.createElement(i.Text,null,n("smartSwapsDescription")),r.default.createElement(i.Text,{as:"ul",marginTop:3,marginBottom:3,style:{listStyle:"inside"}},r.default.createElement("li",{key:"stxBenefit1"},n("stxBenefit1")),r.default.createElement("li",{key:"stxBenefit2"},n("stxBenefit2")),r.default.createElement("li",{key:"stxBenefit3"},n("stxBenefit3")),r.default.createElement("li",{key:"stxBenefit4"},n("stxBenefit4"),r.default.createElement(i.Text,{as:"span",fontWeight:s.FontWeight.Normal}," *"))),r.default.createElement(i.Text,{color:s.TextColor.textAlternative},n("smartSwapsDescription2",[r.default.createElement(i.ButtonLink,{size:i.ButtonLinkSize.Inherit,href:c.SMART_SWAPS_FAQ_AND_RISK_DISCLOSURES_URL,externalLink:!0,display:s.Display.Inline,key:"smartSwapsDescription2"},n("faqAndRiskDisclosures"))])),r.default.createElement(i.Button,{variant:i.ButtonVariant.Primary,onClick:e,width:s.BlockSize.Full},n("enableSmartSwaps")),r.default.createElement(i.Button,{type:"link",variant:i.ButtonVariant.Link,onClick:t,width:s.BlockSize.Full},n("manageInSettings")))))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n},o=e("../../../hooks/useI18nContext"),s=e("../../../helpers/constants/design-system"),i=e("../../../components/component-library"),l=e("../../../components/component-library/modal-content/deprecated"),u=e("../../../components/component-library/modal-header/deprecated"),c=e("../../../../shared/constants/swaps")}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/smart-transactions-popover.tsx"}],[5290,{"../../../../shared/constants/gas":4072,"../../../components/component-library":4582,"../../../components/ui/box":4749,"../../../contexts/i18n":4890,"../../../helpers/constants/design-system":4914,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=c(e("prop-types")),o=e("../../../contexts/i18n"),s=c(e("../../../components/ui/box")),i=e("../../../helpers/constants/design-system"),l=e("../../../../shared/constants/gas"),u=e("../../../components/component-library");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p(e){const{usedQuote:t,sourceTokenValue:a,destinationTokenValue:r,onAcknowledgementClick:c,acknowledged:d,priceSlippageFromSource:p,priceSlippageFromDestination:m,priceDifferencePercentage:f,priceSlippageUnknownFiatValue:g}=e,E=(0,n.useContext)(o.I18nContext);let T=E("swapPriceUnavailableTitle"),_=E("swapPriceUnavailableDescription"),S=l.GasRecommendations.high;g||(T=E("swapPriceDifferenceTitle",[f]),_=E("swapPriceDifference",[a,t.sourceTokenInfo.symbol,p,r,t.destinationTokenInfo.symbol,m]),S=t.priceSlippage.bucket);const h=S===l.GasRecommendations.high?i.SEVERITIES.DANGER:i.SEVERITIES.WARNING;return n.default.createElement(s.default,{display:i.DISPLAY.FLEX,marginTop:2},n.default.createElement(u.BannerAlert,{title:T,titleProps:{"data-testid":"swaps-banner-title"},severity:h,width:i.BLOCK_SIZES.FULL,"data-testid":"mm-banner-alert"},n.default.createElement(s.default,null,n.default.createElement(u.Text,{variant:i.TextVariant.bodyMd,as:"h6","data-testid":"mm-banner-alert-notification-text"},_),!d&&n.default.createElement(u.ButtonLink,{size:u.ButtonLinkSize.Inherit,textProps:{variant:i.TextVariant.bodyMd,alignItems:i.AlignItems.flexStart},onClick:c},E("swapAnyway")))))}p.propTypes={usedQuote:r.default.object,sourceTokenValue:r.default.string,destinationTokenValue:r.default.string,onAcknowledgementClick:r.default.func,acknowledged:r.default.bool,priceSlippageFromSource:r.default.string,priceSlippageFromDestination:r.default.string,priceDifferencePercentage:r.default.number,priceSlippageUnknownFiatValue:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/prepare-swap-page/view-quote-price-difference.js"}],[5291,{"./searchable-item-list":5296},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./searchable-item-list"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/index.js"}],[5292,{"./item-list.component":5293},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./item-list.component"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/item-list/index.js"}],[5293,{"../../../../../shared/constants/metametrics":4077,"../../../../../shared/constants/swaps":4086,"../../../../components/ui/actionable-message/actionable-message":4745,"../../../../components/ui/button":4753,"../../../../components/ui/identicon":4806,"../../../../components/ui/url-icon":4887,"../../../../contexts/i18n":4890,"../../../../contexts/metametrics":4891,"../../../../helpers/utils/util":4956,"../../../../selectors":5338,classnames:2479,"prop-types":3583,react:3799,"react-redux":3764},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=_(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=T(e("prop-types")),s=T(e("classnames")),i=T(e("../../../../components/ui/identicon")),l=T(e("../../../../components/ui/url-icon")),u=T(e("../../../../components/ui/button")),c=T(e("../../../../components/ui/actionable-message/actionable-message")),d=e("../../../../contexts/i18n"),p=e("../../../../selectors"),m=e("../../../../../shared/constants/metametrics"),f=e("../../../../../shared/constants/swaps"),g=e("../../../../helpers/utils/util"),E=e("../../../../contexts/metametrics");function T(e){return e&&e.__esModule?e:{default:e}}function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(_=function(e){return e?a:t})(e)}function S({results:e=[],onClickItem:t,onOpenImportTokenModalClick:a,Placeholder:o,listTitle:T,maxListItems:_=6,searchQuery:S="",containerRef:h,hideRightLabels:v,hideItemIf:y,listContainerClassName:b}){const k=(0,n.useContext)(d.I18nContext),w=(0,r.useSelector)(p.getCurrentChainId),A=(0,r.useSelector)(p.getRpcPrefsForCurrentProvider).blockExplorerUrl??f.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[w]??null,I=(0,r.useSelector)(p.getUseCurrencyRateCheck),C=(0,g.getURLHostName)(A),O=(0,n.useContext)(E.MetaMetricsContext),N=1===e.length&&e[0].notImported,x=o?n.default.createElement(o,{searchQuery:S}):null;return 0===e.length?x:n.default.createElement("div",{className:"searchable-item-list"},T?n.default.createElement("div",{className:"searchable-item-list__title"},T):null,n.default.createElement("div",{className:(0,s.default)("searchable-item-list__list-container",b),ref:h,"data-testid":"searchable-item-list-list-container"},e.slice(0,_).map(((e,r)=>{if(null!=y&&y(e))return null;const o=e.balance>0;if(e.blocked&&!o&&!S)return null;const c=()=>{e.blocked||(e.notImported?a(e):null==t||t(e))},{iconUrl:d,identiconAddress:p,selected:m,blocked:f,primaryLabel:g,secondaryLabel:E,rightPrimaryLabel:T,rightSecondaryLabel:_,IconComponent:h}=e;return n.default.createElement("div",{tabIndex:"0",className:(0,s.default)("searchable-item-list__item",{"searchable-item-list__item--selected":m,"searchable-item-list__item--disabled":f}),"data-testid":"searchable-item-list__item",onClick:c,onKeyUp:e=>"Enter"===e.key&&c(),key:`searchable-item-list-item-${r}`,title:f?k("swapTokenNotAvailable"):null},d||g?n.default.createElement(l.default,{url:d,name:g}):null,d||g||!p?null:n.default.createElement("div",{className:"searchable-item-list__identicon"},n.default.createElement(i.default,{address:p,diameter:24})),h?n.default.createElement(h,null):null,n.default.createElement("div",{className:"searchable-item-list__labels"},n.default.createElement("div",{className:"searchable-item-list__item-labels"},g?n.default.createElement("span",{className:"searchable-item-list__primary-label","data-testid":"searchable-item-list-primary-label"},g):null,E?n.default.createElement("span",{className:"searchable-item-list__secondary-label"},E):null),v||!T&&!_?null:n.default.createElement("div",{className:"searchable-item-list__right-labels"},T?n.default.createElement("span",{className:"searchable-item-list__right-primary-label"},T):null,_&&I?n.default.createElement("span",{className:"searchable-item-list__right-secondary-label"},_):null)),e.notImported&&n.default.createElement(u.default,{type:"primary",onClick:c,"data-testid":"searchable-item-list-import-button"},k("import")))})),!N&&A&&n.default.createElement("div",{tabIndex:"0",className:"searchable-item-list__item searchable-item-list__item--add-token",key:"searchable-item-list-item-last"},n.default.createElement(c.default,{message:k("addTokenByContractAddress",[n.default.createElement("a",{key:"searchable-item-list__etherscan-link",onClick:()=>{O({event:"Clicked Block Explorer Link",category:m.MetaMetricsEventCategory.Swaps,properties:{link_type:"Token Tracker",action:"Verify Contract Address",block_explorer_domain:C}}),global.platform.openTab({url:A})},target:"_blank",rel:"noopener noreferrer"},C)])}))))}S.propTypes={results:o.default.arrayOf(o.default.shape({iconUrl:o.default.string,selected:o.default.bool,blocked:o.default.bool,primaryLabel:o.default.string,secondaryLabel:o.default.string,rightPrimaryLabel:o.default.string,rightSecondaryLabel:o.default.string})),onClickItem:o.default.func,onOpenImportTokenModalClick:o.default.func,Placeholder:o.default.func,listTitle:o.default.string,maxListItems:o.default.number,searchQuery:o.default.string,containerRef:o.default.shape({current:o.default.instanceOf(window.Element)}),hideRightLabels:o.default.bool,hideItemIf:o.default.func,listContainerClassName:o.default.string}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/item-list/item-list.component.js"}],[5294,{"./list-item-search.component":5295},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./list-item-search.component"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/list-item-search/index.js"}],[5295,{"../../../../../shared/modules/hexstring-utils":4110,"../../../../components/ui/icon/search-icon":4800,"../../../../components/ui/text-field":4867,"../../../../hooks/usePrevious":4990,"../../../../selectors/selectors":5341,"../../swaps.util":5318,"@material-ui/core/InputAdornment":688,"fuse.js":2951,loglevel:3454,"prop-types":3583,react:3799,"react-redux":3764},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=S;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=E(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=g(e("prop-types")),s=g(e("fuse.js")),i=g(e("loglevel")),l=g(e("@material-ui/core/InputAdornment")),u=g(e("../../../../components/ui/text-field")),c=e("../../../../hooks/usePrevious"),d=e("../../../../../shared/modules/hexstring-utils"),p=e("../../swaps.util"),m=e("../../../../selectors/selectors"),f=g(e("../../../../components/ui/icon/search-icon"));function g(e){return e&&e.__esModule?e:{default:e}}function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(E=function(e){return e?a:t})(e)}const T=()=>n.default.createElement(l.default,{position:"start",style:{marginRight:"12px"}},n.default.createElement(f.default,{size:20,color:"var(--color-icon-muted)"}));let _;function S({onSearch:e,error:t,listToSearch:a=[],fuseSearchKeys:o,searchPlaceholderText:l,defaultToAll:f,shouldSearchForImports:g,searchQuery:E,setSearchQuery:S}){const h=(0,n.useRef)(),v=(0,r.useSelector)(m.getCurrentChainId),y=async t=>{S(t),_&&clearTimeout(_),_=setTimeout((async()=>{_=null;const n=t.trim(),r=(0,d.isValidHexAddress)(n),o=h.current.search(t),s=f&&""===t?a:o;g&&0===s.length&&r?await(async t=>{try{const a=await(0,p.fetchToken)(t,v);if(a)return a.primaryLabel=a.symbol,a.secondaryLabel=a.name,a.notImported=!0,void e({searchQuery:t,results:[a]})}catch(e){i.default.error("Token not found, show 0 results.",e)}e({searchQuery:t,results:[]})})(n):e({searchQuery:t,results:s})}),350)};(0,n.useEffect)((()=>()=>clearTimeout(_)),[]),(0,n.useEffect)((()=>{h.current||(h.current=new s.default(a,{shouldSort:!0,threshold:.45,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:o}))}),[o,a]);const b=(0,c.usePrevious)(a??[]);return(0,n.useEffect)((()=>{if(h.current&&E&&b!==a){h.current.setCollection(a);const t=h.current.search(E);e({searchQuery:E,results:t})}}),[a,E,e,b]),n.default.createElement(u.default,{"data-testid":"search-list-items",className:"searchable-item-list__search",placeholder:l,type:"text",value:E,onChange:e=>y(e.target.value),error:t,fullWidth:!0,startAdornment:T(),autoComplete:"off",autoFocus:!0})}S.propTypes={onSearch:o.default.func,error:o.default.string,listToSearch:o.default.array.isRequired,fuseSearchKeys:o.default.arrayOf(o.default.object).isRequired,searchPlaceholderText:o.default.string,defaultToAll:o.default.bool,shouldSearchForImports:o.default.bool,searchQuery:o.default.string,setSearchQuery:o.default.func}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/list-item-search/list-item-search.component.js"}],[5296,{"./item-list":5292,"./list-item-search":5294,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=u;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=l(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=i(e("prop-types")),o=i(e("./item-list")),s=i(e("./list-item-search"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(l=function(e){return e?a:t})(e)}function u({className:e,defaultToAll:t,fuseSearchKeys:a,itemSelectorError:r,itemsToSearch:i=[],listTitle:l,maxListItems:u,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:p,searchPlaceholderText:m,hideRightLabels:f,hideItemIf:g,listContainerClassName:E,shouldSearchForImports:T,searchQuery:_,setSearchQuery:S}){const h=(0,n.useRef)(),v=(0,n.useMemo)((()=>t?i:[]),[t,i]),[y,b]=(0,n.useState)(v);return(0,n.useEffect)((()=>{_||b(v)}),[v.length,_]),n.default.createElement("div",{className:e},n.default.createElement(s.default,{listToSearch:i,fuseSearchKeys:a,onSearch:({searchQuery:e="",results:t=[]})=>{S(e),b(t)},error:r,searchPlaceholderText:m,defaultToAll:t,shouldSearchForImports:T,searchQuery:_,setSearchQuery:S}),n.default.createElement(o.default,{searchQuery:_,results:y,onClickItem:c,onOpenImportTokenModalClick:d,Placeholder:p,listTitle:l,maxListItems:u,containerRef:h,hideRightLabels:f,hideItemIf:g,listContainerClassName:E}))}u.propTypes={itemSelectorError:r.default.string,itemsToSearch:r.default.array,onClickItem:r.default.func,onOpenImportTokenModalClick:r.default.func,Placeholder:r.default.func,className:r.default.string,searchPlaceholderText:r.default.string,fuseSearchKeys:r.default.arrayOf(r.default.shape({name:r.default.string,weight:r.default.number})),listTitle:r.default.string,defaultToAll:r.default.bool,maxListItems:r.default.number,hideRightLabels:r.default.bool,hideItemIf:r.default.func,listContainerClassName:r.default.string,shouldSearchForImports:r.default.bool,searchQuery:r.default.string,setSearchQuery:r.default.func}}}},{package:"$root$",file:"ui/pages/swaps/searchable-item-list/searchable-item-list.js"}],[5297,{"./select-quote-popover":5301},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./select-quote-popover"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/index.js"}],[5298,{"./quote-details":5299},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./quote-details"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/quote-details/index.js"}],[5299,{"../../../../components/ui/info-tooltip":4807,"../../../../contexts/i18n":4890,"../../../../selectors":5338,"../../exchange-rate-display":5271,"prop-types":3583,react:3799,"react-redux":3764},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=c(e("prop-types")),s=e("../../../../contexts/i18n"),i=c(e("../../../../components/ui/info-tooltip")),l=c(e("../../exchange-rate-display")),u=e("../../../../selectors");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}const p=({slippage:e,sourceTokenValue:t,sourceTokenSymbol:a,destinationTokenValue:o,destinationTokenSymbol:c,liquiditySourceKey:d,minimumAmountReceived:p,feeInEth:m,networkFees:f,metaMaskFee:g,hideEstimatedGasFee:E})=>{const T=(0,n.useContext)(s.I18nContext),_=(0,r.useSelector)(u.getUseCurrencyRateCheck);return n.default.createElement("div",{className:"quote-details"},n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapRate")),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement(l.default,{primaryTokenValue:t,primaryTokenDecimals:1,primaryTokenSymbol:a,secondaryTokenValue:o,secondaryTokenDecimals:1,secondaryTokenSymbol:c}))),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapMaxSlippage"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapSlippageTooltip")})),n.default.createElement("div",{className:"quote-details__detail-content"},`${e}%`)),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapAmountReceived"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapAmountReceivedInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement("span",null,p),n.default.createElement("span",{className:"quote-details__bold"},` ${c}`))),!E&&n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapEstimatedNetworkFees"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapEstimatedNetworkFeesInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},n.default.createElement("span",null,m),n.default.createElement("span",{className:"quote-details__light-grey"},_&&` (${f})`))),n.default.createElement("div",{className:"quote-details__row"},n.default.createElement("div",{className:"quote-details__detail-header"},T("swapSource"),n.default.createElement(i.default,{position:"bottom",contentText:T("swapLiquiditySourceInfo")})),n.default.createElement("div",{className:"quote-details__detail-content"},T(d))),n.default.createElement("div",{className:"quote-details__row quote-details__row--high"},n.default.createElement("div",{className:"quote-details__detail-header"},n.default.createElement("img",{src:"./images/logo/metamask-fox.svg",className:"quote-details__metafox-logo",alt:""}),T("swapMetaMaskFee")),n.default.createElement("div",{className:"quote-details__detail-content"},T("swapMetaMaskFeeDescription",[g]))))};p.propTypes={slippage:o.default.number.isRequired,sourceTokenValue:o.default.string.isRequired,sourceTokenSymbol:o.default.string.isRequired,destinationTokenValue:o.default.string.isRequired,destinationTokenSymbol:o.default.string.isRequired,liquiditySourceKey:o.default.string.isRequired,minimumAmountReceived:o.default.string.isRequired,feeInEth:o.default.string.isRequired,networkFees:o.default.string.isRequired,metaMaskFee:o.default.number.isRequired,hideEstimatedGasFee:o.default.bool};a.default=p}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/quote-details/quote-details.js"}],[5300,{"prop-types":3583},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=void 0;var n,r=(n=e("prop-types"))&&n.__esModule?n:{default:n};a.QUOTE_DATA_ROWS_PROPTYPES_SHAPE=r.default.shape({aggId:r.default.string.isRequired,amountReceiving:r.default.string.isRequired,destinationTokenDecimals:r.default.number.isRequired,destinationTokenSymbol:r.default.string.isRequired,destinationTokenValue:r.default.string.isRequired,isBestQuote:r.default.bool,networkFees:r.default.string.isRequired,quoteSource:r.default.string.isRequired,rawNetworkFees:r.default.string.isRequired,slippage:r.default.number.isRequired,sourceTokenDecimals:r.default.number.isRequired,sourceTokenSymbol:r.default.string.isRequired,sourceTokenValue:r.default.string.isRequired})}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/select-quote-popover-constants.js"}],[5301,{"../../../components/ui/button":4753,"../../../components/ui/popover":4841,"../../../contexts/i18n":4890,"./quote-details":5298,"./select-quote-popover-constants":5300,"./sort-list":5302,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=p(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=d(e("prop-types")),o=e("../../../contexts/i18n"),s=d(e("../../../components/ui/popover")),i=d(e("../../../components/ui/button")),l=d(e("./quote-details")),u=d(e("./sort-list")),c=e("./select-quote-popover-constants");function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(p=function(e){return e?a:t})(e)}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},m.apply(this,arguments)}const f=({quoteDataRows:e=[],onClose:t=null,onSubmit:a=null,swapToSymbol:r,initialAggId:c,onQuoteDetailsIsOpened:d,hideEstimatedGasFee:p})=>{const f=(0,n.useContext)(o.I18nContext),[g,E]=(0,n.useState)(1),[T,_]=(0,n.useState)(null),[S,h]=(0,n.useState)(c),[v,y]=(0,n.useState)("sortList"),[b,k]=(0,n.useState)(null),w=(0,n.useCallback)((()=>{a(S),t()}),[S,t,a]),A=(0,n.useCallback)((()=>{k(null),y("sortList")}),[]),I=(0,n.useCallback)((e=>h(e)),[h]),C=(0,n.useCallback)((t=>{const a=e.find((e=>e.aggId===t));y("quoteDetails"),d(),k(a)}),[e,d]),O=(0,n.useCallback)((()=>n.default.createElement("div",{className:"select-quote-popover__popover-bg",onClick:t})),[t]),N=n.default.createElement(n.default.Fragment,null,n.default.createElement(i.default,{type:"secondary",className:"page-container__footer-button select-quote-popover__button",onClick:t},f("close")),n.default.createElement(i.default,{type:"primary",className:"page-container__footer-button select-quote-popover__button",onClick:w},f("swapSelect")));return n.default.createElement("div",{className:"select-quote-popover"},n.default.createElement(s.default,{title:f("quoteDetails"===v?"swapSelectAQuote":"swapQuoteDetails"),subtitle:"sortList"===v?f("swapSelectQuotePopoverDescription"):null,onClose:t,CustomBackground:O,className:"select-quote-popover__popover-wrap",footerClassName:"swaps__footer",footer:"quoteDetails"===v?null:N,onBack:"quoteDetails"===v?A:null},"sortList"===v&&n.default.createElement(u.default,{quoteDataRows:e,selectedAggId:S,onSelect:I,onCaretClick:C,swapToSymbol:r,sortDirection:g,setSortDirection:E,sortColumn:T,setSortColumn:_,hideEstimatedGasFee:p}),"quoteDetails"===v&&b&&n.default.createElement(l.default,m({},b,{hideEstimatedGasFee:p}))))};f.propTypes={onClose:r.default.func,onSubmit:r.default.func,swapToSymbol:r.default.string,quoteDataRows:r.default.arrayOf(c.QUOTE_DATA_ROWS_PROPTYPES_SHAPE),initialAggId:r.default.string,onQuoteDetailsIsOpened:r.default.func,hideEstimatedGasFee:r.default.bool.isRequired};a.default=f}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/select-quote-popover.js"}],[5302,{"./sort-list":5303},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./sort-list"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/sort-list/index.js"}],[5303,{"../../../../components/ui/icon/sun-check-icon.component":4801,"../../../../components/ui/info-tooltip":4807,"../../../../contexts/i18n":4890,"../../../../selectors":5338,"../select-quote-popover-constants":5300,"bignumber.js":2364,classnames:2479,"prop-types":3583,react:3799,"react-redux":3764},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=E;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=m(e("prop-types")),s=m(e("classnames")),i=m(e("bignumber.js")),l=m(e("../../../../components/ui/icon/sun-check-icon.component")),u=e("../../../../contexts/i18n"),c=e("../select-quote-popover-constants"),d=m(e("../../../../components/ui/info-tooltip")),p=e("../../../../selectors");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}const g=()=>n.default.createElement("svg",{width:"6",height:"9",viewBox:"0 0 6 9",fill:"none",xmlns:"http://www.w3.org/2000/svg"},n.default.createElement("path",{d:"M0.7948 4.96973C0.365112 4.96973 0.150269 5.47754 0.462769 5.77051L2.78699 8.09473C2.96277 8.29004 3.25574 8.29004 3.45105 8.09473L5.77527 5.77051C6.06824 5.47754 5.85339 4.96973 5.44324 4.96973H0.7948ZM5.77527 2.91895L3.45105 0.594727C3.25574 0.418945 2.96277 0.418945 2.78699 0.594727L0.462769 2.91895C0.150269 3.23145 0.365112 3.71973 0.7948 3.71973H5.44324C5.85339 3.71973 6.06824 3.23145 5.77527 2.91895Z",fill:"var(--color-primary-default)"}));function E({quoteDataRows:e,selectedAggId:t,onSelect:a,onCaretClick:o,swapToSymbol:c,sortDirection:m,setSortDirection:f,sortColumn:E=null,setSortColumn:T,hideEstimatedGasFee:_}){const S=(0,n.useContext)(u.I18nContext),[h,v]=(0,n.useState)(!1),y=(0,r.useSelector)(p.getUseCurrencyRateCheck),b=e=>{e===E?f(-1*m):T(e)},k=(0,n.useMemo)((()=>[...e].sort(((e,t)=>{if(null===E&&e.isBestQuote)return-1;if(null===E&&t.isBestQuote)return 1;if(null===E){const a=new i.default(e.destinationTokenValue).toString(16),n=new i.default(t.destinationTokenValue).toString(16);return a[a.length-1]<n[n.length-1]?-1:1}return"quoteSource"===E?e[E]>t[E]?-1*m:m:new i.default(e[E]).gt(t[E])?-1*m:m}))),[e,E,m]),w=k.findIndex((({aggId:e})=>t===e));return n.default.createElement("div",{className:"select-quote-popover__sort-list"},n.default.createElement("div",{className:"select-quote-popover__column-headers"},n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__receiving","data-testid":"select-quote-popover__receiving",onClick:()=>b("destinationTokenValue")},n.default.createElement("span",{className:"select-quote-popover__receiving-symbol"},c),n.default.createElement("div",{className:"select-quote-popover__receiving-label"},n.default.createElement("span",null,S("swapReceiving")),n.default.createElement(d.default,{position:"bottom",contentText:S("swapReceivingInfoTooltip")}),n.default.createElement(g,null))),n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__network-fees select-quote-popover__network-fees-header","data-testid":"select-quote-popover__network-fees-header",onClick:()=>b("rawNetworkFees")},!_&&y&&n.default.createElement(n.default.Fragment,null,n.default.createElement("span",null,S("swapEstimatedNetworkFees")),n.default.createElement(d.default,{position:"bottom",contentText:S("swapEstimatedNetworkFeesInfo")}),n.default.createElement(g,null))),n.default.createElement("div",{className:"select-quote-popover__column-header select-quote-popover__quote-source","data-testid":"select-quote-popover__quote-source",onClick:()=>b("quoteSource")},S("swapQuoteSource"),n.default.createElement("div",{className:"select-quote-popover__quote-source-toggle"},n.default.createElement(g,null)))),k.map((({destinationTokenValue:e,networkFees:t,isBestQuote:r,quoteSource:i,aggId:u},c)=>n.default.createElement("div",{className:(0,s.default)("select-quote-popover__row",{"select-quote-popover__row--selected":w===c,"select-quote-popover__row--no-hover":h}),onClick:()=>a(u),key:`select-quote-popover-row-${c}`,"data-testid":`select-quote-popover-row-${c}`},n.default.createElement("div",{className:"select-quote-popover__receiving"},n.default.createElement("div",{className:"select-quote-popover__receiving-value"},r&&n.default.createElement(l.default,{reverseColors:w!==c}),n.default.createElement("div",{className:"select-quote-popover__receiving-value-text",title:e},e)),"RFQ"===i&&n.default.createElement("span",{className:"select-quote-popover__zero-slippage"},S("swapZeroSlippage"))),n.default.createElement("div",{className:"select-quote-popover__network-fees"},!_&&y&&t),n.default.createElement("div",{className:"select-quote-popover__quote-source"},n.default.createElement("div",{className:(0,s.default)("select-quote-popover__quote-source-label",{"select-quote-popover__quote-source-label--green":"AGG"===i,"select-quote-popover__quote-source-label--orange":"RFQ"===i,"select-quote-popover__quote-source-label--blue":"DEX"===i})},i)),n.default.createElement("div",{className:"select-quote-popover__caret-right","data-testid":`select-quote-popover__caret-right-${c}`,onClick:e=>{e.stopPropagation(),o(u)},onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},n.default.createElement("i",{className:"fa fa-angle-up"}))))))}E.propTypes={selectedAggId:o.default.string.isRequired,onSelect:o.default.func.isRequired,onCaretClick:o.default.func.isRequired,swapToSymbol:o.default.string.isRequired,quoteDataRows:o.default.arrayOf(c.QUOTE_DATA_ROWS_PROPTYPES_SHAPE).isRequired,sortDirection:o.default.number.isRequired,setSortDirection:o.default.func.isRequired,sortColumn:o.default.string,setSortColumn:o.default.func.isRequired,hideEstimatedGasFee:o.default.bool.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/select-quote-popover/sort-list/sort-list.js"}],[5304,{"../../../components/component-library":4582,"../../../components/ui/url-icon":4887,"../../../contexts/i18n":4890,"../../../helpers/constants/design-system":4914,classnames:2479,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=c(e("prop-types")),o=c(e("classnames")),s=e("../../../components/component-library"),i=e("../../../helpers/constants/design-system"),l=c(e("../../../components/ui/url-icon")),u=e("../../../contexts/i18n");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p({onClick:e,onClose:t,selectedToken:a,testId:r}){const c=(0,n.useContext)(u.I18nContext),d=(null==a?void 0:a.iconUrl)&&(null==a?void 0:a.symbol);return n.default.createElement("div",{className:(0,o.default)("dropdown-search-list","dropdown-search-list__selector-closed-container","dropdown-input-pair__selector--closed"),"data-testid":"dropdown-search-list",tabIndex:"0",onClick:e,onKeyUp:a=>{"Escape"===a.key?t():"Enter"===a.key&&e(a)}},n.default.createElement("div",{className:"dropdown-search-list__selector-closed"},d&&n.default.createElement(l.default,{url:a.iconUrl,className:"dropdown-search-list__selector-closed-icon",name:null==a?void 0:a.symbol}),n.default.createElement("div",{className:(0,o.default)("dropdown-search-list__labels",{"dropdown-search-list__labels--with-icon":d})},n.default.createElement("div",{className:"dropdown-search-list__item-labels"},n.default.createElement("span",{"data-testid":r,className:(0,o.default)("dropdown-search-list__closed-primary-label",{"dropdown-search-list__select-default":!(null!=a&&a.symbol)})},(null==a?void 0:a.symbol)||c("swapSelectAToken"))))),n.default.createElement(s.Icon,{name:s.IconName.ArrowDown,size:s.IconSize.Xs,marginRight:3,color:i.IconColor.iconAlternative}))}p.propTypes={onClick:r.default.func.isRequired,onClose:r.default.func.isRequired,selectedToken:r.default.object.isRequired,testId:r.default.string}}}},{package:"$root$",file:"ui/pages/swaps/selected-token/selected-token.js"}],[5305,{"./slippage-buttons":5306},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./slippage-buttons"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/slippage-buttons/index.js"}],[5306,{"../../../../shared/constants/swaps":4086,"../../../components/component-library":4582,"../../../components/ui/box":4749,"../../../components/ui/button":4753,"../../../components/ui/button-group":4751,"../../../components/ui/info-tooltip":4807,"../../../components/ui/toggle-button":4871,"../../../contexts/i18n":4890,"../../../helpers/constants/design-system":4914,"../swaps.util":5318,classnames:2479,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=T(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=E(e("prop-types")),o=E(e("classnames")),s=e("../../../contexts/i18n"),i=E(e("../../../components/ui/button-group")),l=E(e("../../../components/ui/button")),u=E(e("../../../components/ui/info-tooltip")),c=E(e("../../../components/ui/toggle-button")),d=E(e("../../../components/ui/box")),p=e("../../../helpers/constants/design-system"),m=e("../swaps.util"),f=e("../../../../shared/constants/swaps"),g=e("../../../components/component-library");function E(e){return e&&e.__esModule?e:{default:e}}function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(T=function(e){return e?a:t})(e)}function _({onSelect:e,maxAllowedSlippage:t,currentSlippage:a,smartTransactionsEnabled:r,smartTransactionsOptInStatus:E,setSmartTransactionsOptInStatus:T,currentSmartTransactionsError:_,isDirectWrappingEnabled:S}){const h=(0,n.useContext)(s.I18nContext),[v,y]=(0,n.useState)((()=>"number"!=typeof a||Object.values(f.Slippage).includes(a)?"":a.toString())),[b,k]=(0,n.useState)(!1),[w,A]=(0,n.useState)((()=>a===f.Slippage.high?1:a===f.Slippage.default?0:"number"==typeof a?2:0)),[I,C]=(0,n.useState)((()=>a!==f.Slippage.default)),[O,N]=(0,n.useState)(null);let x="";v&&(Number(v)<0?x=h("swapSlippageNegative"):Number(v)>0&&Number(v)<=1?x=h("swapLowSlippageError"):Number(v)>=5&&Number(v)<=t?x=h("swapHighSlippageWarning"):Number(v)>t&&(x=h("swapsExcessiveSlippageWarning")));const P=v||h("swapCustom");return(0,n.useEffect)((()=>{O&&b&&window.document.activeElement!==O&&O.focus()}),[O,b]),n.default.createElement("div",{className:"slippage-buttons"},n.default.createElement("button",{onClick:()=>C(!I),className:(0,o.default)("slippage-buttons__header",{"slippage-buttons__header--open":I})},n.default.createElement("div",{className:"slippage-buttons__header-text"},h("swapsAdvancedOptions")),I?n.default.createElement("i",{className:"fa fa-angle-up"}):n.default.createElement("i",{className:"fa fa-angle-down"})),n.default.createElement("div",{className:"slippage-buttons__content"},I&&n.default.createElement(n.default.Fragment,null,!S&&n.default.createElement("div",{className:"slippage-buttons__dropdown-content"},n.default.createElement("div",{className:"slippage-buttons__buttons-prefix"},n.default.createElement("div",{className:"slippage-buttons__prefix-text"},h("swapsMaxSlippage")),n.default.createElement(u.default,{position:"top",contentText:h("swapSlippageTooltip")})),n.default.createElement(i.default,{defaultActiveButtonIndex:2!==w||v?w:1,variant:"radiogroup",newActiveButtonIndex:w,className:(0,o.default)("button-group","slippage-buttons__button-group")},n.default.createElement(l.default,{onClick:()=>{y(""),k(!1),A(0),e(f.Slippage.default)}},h("swapSlippagePercent",[f.Slippage.default])),n.default.createElement(l.default,{onClick:()=>{y(""),k(!1),A(1),e(f.Slippage.high)}},h("swapSlippagePercent",[f.Slippage.high])),n.default.createElement(l.default,{className:(0,o.default)("slippage-buttons__button-group-custom-button",{"radio-button--danger":x}),onClick:()=>{A(2),k(!0)}},b?n.default.createElement("div",{className:(0,o.default)("slippage-buttons__custom-input",{"slippage-buttons__custom-input--danger":x})},n.default.createElement("input",{"data-testid":"slippage-buttons__custom-slippage",onChange:t=>{const{value:a}=t.target;!isNaN(Number(a))&&(y(a),e(Number(a)))},type:"text",maxLength:"4",ref:N,onBlur:()=>{k(!1)},value:v||""})):P,(v||b)&&n.default.createElement("div",{className:"slippage-buttons__percentage-suffix"},"%")))),r&&n.default.createElement(d.default,{marginTop:2,display:p.Display.Flex},n.default.createElement(d.default,{display:p.Display.Flex,alignItems:p.AlignItems.center,paddingRight:3},n.default.createElement(g.Text,{variant:p.TextVariant.bodySm,as:"h6",paddingRight:2,fontWeight:p.FontWeight.Bold},h("smartSwaps")),_?n.default.createElement(u.default,{position:"top",contentText:(0,m.getTranslatedStxErrorMessage)(_,h)}):n.default.createElement(u.default,{position:"top",contentText:h("smartSwapsTooltip",[n.default.createElement(g.ButtonLink,{key:"smart-swaps-faq-and-risk-disclosures",size:g.ButtonLinkSize.Inherit,href:f.SMART_SWAPS_FAQ_AND_RISK_DISCLOSURES_URL,externalLink:!0,display:p.Display.Inline},h("faqAndRiskDisclosures"))])})),n.default.createElement(c.default,{value:E,onToggle:e=>{T(!e,e)},offLabel:h("off"),onLabel:h("on"),disabled:Boolean(_)}))),x&&n.default.createElement("div",{className:"slippage-buttons__error-text"},x)))}_.propTypes={onSelect:r.default.func.isRequired,maxAllowedSlippage:r.default.number.isRequired,currentSlippage:r.default.number,smartTransactionsEnabled:r.default.bool.isRequired,smartTransactionsOptInStatus:r.default.bool,setSmartTransactionsOptInStatus:r.default.func,currentSmartTransactionsError:r.default.string,isDirectWrappingEnabled:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/slippage-buttons/slippage-buttons.js"}],[5307,{react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"15",height:"13",viewBox:"0 0 15 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M14.4946 6.14779C14.4863 5.93594 14.3991 5.69108 14.2539 5.53666L9.51334 0.49958C9.1921 0.21091 8.57613 0.0917437 8.21709 0.425509C7.86344 0.754237 7.87396 1.39178 8.22627 1.72181L11.5595 5.25889L1.1618 5.25889C0.670919 5.25889 0.272949 5.65687 0.272949 6.14779C0.272949 6.6387 0.670919 7.03668 1.1618 7.03668L11.5595 7.03668L8.22627 10.5738C7.92297 10.8776 7.86691 11.5376 8.21709 11.8701C8.56718 12.2025 9.20529 12.0963 9.51334 11.796L14.2539 6.75891C14.4161 6.58653 14.4952 6.38428 14.4946 6.14779Z",fill:"#D6D9DC"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/arrow-icon.js"}],[5308,{react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5805 6.55143C36.1394 8.11033 37.3994 9.91222 38.3237 11.8681C38.7066 12.6782 39.0318 13.5148 39.2968 14.3714L39.3242 14.4606C39.4816 14.9785 39.6171 15.5037 39.73 16.0347C40.6511 20.3654 40.0335 24.9029 37.9511 28.8509C35.6001 33.308 31.5749 36.6487 26.7609 38.138C24.3773 38.8754 21.8717 39.1361 19.3873 38.9052C16.9029 38.6743 14.4883 37.9563 12.2813 36.7922C10.2608 35.7264 8.52045 34.3588 7.08333 32.7636C5.61245 31.1448 4.43054 29.2824 3.59178 27.2574C3.32329 26.6092 2.89685 25.2767 2.89685 25.2767H6.89583C7.68667 27.4068 8.96033 29.362 10.6288 30.9609L10.6318 30.96C11.5096 31.8005 12.501 32.5516 13.595 33.1786C15.8742 34.483 18.4736 35.1864 21.1455 35.1864C25.1768 35.1864 29.0429 33.585 31.8935 30.7345C34.744 27.8839 36.3455 24.0177 36.3455 19.9865C36.3455 18.7267 36.1891 17.483 35.8871 16.2814C35.8206 16.017 35.7471 15.7546 35.6666 15.4945C34.4752 11.6432 31.8027 8.42306 28.237 6.54231C24.6713 4.66156 20.5045 4.27429 16.6533 5.46571C12.8837 6.63189 9.71868 9.21706 7.82253 12.6699L12.8961 15.307L3.28331 18.3447L0.245605 8.73191L4.45005 10.9171C6.81537 6.56278 10.7905 3.30177 15.5303 1.83546C17.3658 1.26761 19.2587 0.986653 21.1455 0.986694C26.1846 0.986694 31.0173 2.98824 34.5805 6.55143Z",fill:"var(--color-primary-default)"}),r.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.1252 22.1036L14.7107 18.689L12.0926 21.3257L18.1252 27.3584L30.2322 15.2515L27.614 12.6148L18.1252 22.1036Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/canceled-icon.js"}],[5309,{"./smart-transaction-status":5311},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./smart-transaction-status"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/index.js"}],[5310,{react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"41",height:"39",viewBox:"0 0 41 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.6806 6.55143C36.2395 8.11033 37.4995 9.91222 38.4238 11.8681C38.8067 12.6782 39.1319 13.5148 39.3969 14.3714L39.4243 14.4606C39.5817 14.9785 39.7172 15.5037 39.8301 16.0347C40.7512 20.3654 40.1336 24.9029 38.0512 28.8509C35.7002 33.308 31.675 36.6487 26.861 38.138C24.4773 38.8754 21.9718 39.1361 19.4874 38.9052C17.003 38.6743 14.5884 37.9563 12.3814 36.7922C10.3609 35.7264 8.62055 34.3588 7.18343 32.7636C5.71254 31.1448 4.53064 29.2824 3.69188 27.2574C3.42339 26.6092 2.99695 25.2767 2.99695 25.2767H6.99592C7.78677 27.4068 9.06042 29.362 10.7289 30.9609L10.7319 30.96C11.6097 31.8005 12.6011 32.5516 13.6951 33.1786C15.9743 34.483 18.5737 35.1864 21.2456 35.1864C25.2769 35.1864 29.143 33.585 31.9936 30.7345C34.8441 27.8839 36.4456 24.0177 36.4456 19.9865C36.4456 18.7267 36.2892 17.483 35.9872 16.2814C35.9207 16.017 35.8471 15.7546 35.7667 15.4945C34.5753 11.6432 31.9028 8.42306 28.3371 6.54231C24.7714 4.66156 20.6046 4.27429 16.7534 5.46571C12.9838 6.63189 9.81878 9.21706 7.92263 12.6699L12.9962 15.307L3.3834 18.3447L0.345703 8.73191L4.55015 10.9171C6.91547 6.56278 10.8906 3.30177 15.6304 1.83546C17.4659 1.26761 19.3588 0.986653 21.2456 0.986694C26.2847 0.986694 31.1174 2.98824 34.6806 6.55143Z",fill:"#D73A49"}),r.default.createElement("path",{d:"M18.5849 19.9869L15.1454 23.4264L17.9845 26.2655L21.424 22.826L24.8635 26.2655L27.7026 23.4264L24.2631 19.9869L27.7026 16.5473L24.8635 13.7082L21.424 17.1478L17.9845 13.7082L15.1454 16.5473L18.5849 19.9869Z",fill:"#D73A49"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/reverted-icon.js"}],[5311,{"../../../../shared/constants/metametrics":4077,"../../../../shared/constants/swaps":4086,"../../../../shared/constants/transaction":4090,"../../../../shared/lib/transactions-controller-utils":4099,"../../../components/component-library":4582,"../../../components/ui/box":4749,"../../../components/ui/url-icon":4887,"../../../contexts/i18n":4890,"../../../contexts/metametrics":4891,"../../../ducks/swaps/swaps":4910,"../../../helpers/constants/design-system":4914,"../../../helpers/constants/routes":4919,"../../../selectors":5338,"../../../store/actions":5345,"../create-new-swap":5265,"../swaps-footer":5316,"../swaps.util":5318,"../view-on-block-explorer":5320,"./arrow-icon":5307,"./canceled-icon":5308,"./reverted-icon":5310,"./success-icon":5312,"./timer-icon":5313,"./unknown-icon":5314,"@metamask/etherscan-link":1213,lodash:3444,react:3799,"react-redux":3764,"react-router-dom":3784},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t,a,P,D,R,M,L,F;const[j,U]=(0,n.useState)(!1),G=(0,n.useContext)(l.I18nContext),W=(0,o.useHistory)(),B=(0,r.useDispatch)(),q=(0,r.useSelector)(u.getFetchParams,i.isEqual)||{},{destinationTokenInfo:H={},sourceTokenInfo:V={}}=(null==q?void 0:q.metaData)||{},K=(0,r.useSelector)(c.isHardwareWallet),$=(0,r.useSelector)(c.getHardwareWalletType),Y=(0,r.useSelector)(u.getSelectedQuote,i.isEqual),Q=(0,r.useSelector)(u.getTopQuote,i.isEqual),X=Y||Q,z=(0,r.useSelector)(u.getCurrentSmartTransactions,i.isEqual),Z=(0,r.useSelector)(u.getSmartTransactionsOptInStatus),J=(0,r.useSelector)(c.getCurrentChainId),ee=(0,r.useSelector)(c.getRpcPrefsForCurrentProvider,r.shallowEqual),te=(0,r.useSelector)(u.getSwapsNetworkConfig,r.shallowEqual),ae=(0,r.useSelector)(u.getSmartTransactionsEnabled),ne=(0,r.useSelector)(u.getCurrentSmartTransactionsEnabled),re=ee.blockExplorerUrl??d.SWAPS_CHAINID_DEFAULT_BLOCK_EXPLORER_URL_MAP[J]??null;let oe,se,ie=S.SmartTransactionStatus.pending,le={};if(z&&z.length>0){var ue,ce,de;le=z[z.length-1],oe=null===(ue=le)||void 0===ue?void 0:ue.uuid,ie=(null===(ce=le)||void 0===ce?void 0:ce.status)||S.SmartTransactionStatus.pending,se=null===(de=le)||void 0===de||null===(de=de.statusMetadata)||void 0===de?void 0:de.cancellationFeeWei}const[pe,me]=(0,n.useState)(te.stxStatusDeadline),fe={needs_two_confirmations:!0,token_from:V.symbol??(null===(e=le)||void 0===e?void 0:e.sourceTokenSymbol),token_from_amount:(null==q?void 0:q.value)??(null===(t=le)||void 0===t?void 0:t.swapTokenValue),token_to:H.symbol??(null===(a=le)||void 0===a?void 0:a.destinationTokenSymbol),request_type:null!=q&&q.balanceError?"Quote":"Order",slippage:null==q?void 0:q.slippage,custom_slippage:2===(null==q?void 0:q.slippage),is_hardware_wallet:K,hardware_wallet_type:$,stx_enabled:ae,current_stx_enabled:ne,stx_user_opt_in:Z};let ge;var Ee;null!=X&&X.destinationAmount&&(ge=(0,w.calcTokenAmount)(null==X?void 0:X.destinationAmount,H.decimals??(null===(Ee=le)||void 0===Ee?void 0:Ee.destinationTokenDecimals)).toPrecision(8));const Te=(0,n.useContext)(y.MetaMetricsContext),_e=ie===S.SmartTransactionStatus.pending,Se=_e||ie===S.SmartTransactionStatus.success,he=null===(P=le)||void 0===P||null===(P=P.statusMetadata)||void 0===P?void 0:P.minedHash;(0,n.useEffect)((()=>{Te({event:"STX Status Page Loaded",category:_.MetaMetricsEventCategory.Swaps,sensitiveProperties:fe})}),[]),(0,n.useEffect)((()=>{let e;if(_e&&oe){const t=()=>{const t=Math.round((Date.now()-le.time)/1e3);if(t>te.stxStatusDeadline)return me(0),void clearInterval(e);me(te.stxStatusDeadline-t)};e=setInterval(t,1e3),t()}return()=>clearInterval(e)}),[B,_e,oe,le.time,te.stxStatusDeadline]),(0,n.useEffect)((()=>{B((0,T.setBackgroundSwapRouteState)("smartTransactionStatus")),setTimeout((()=>{B((0,T.stopPollingForQuotes)())}),1e3)}),[B]);let ve,ye,be,ke,we=G("stxPendingPrivatelySubmittingSwap");_e&&(j?we=G("stxTryingToCancel"):se>0&&(we=G("stxPendingPubliclySubmittingSwap")));if(ie===S.SmartTransactionStatus.success){var Ae,Ie;if(we=G("stxSuccess"),H.symbol||null!==(Ae=le)&&void 0!==Ae&&Ae.destinationTokenSymbol)ve=G("stxSuccessDescription",[H.symbol??(null===(Ie=le)||void 0===Ie?void 0:Ie.destinationTokenSymbol)]);be=n.default.createElement(A.default,null)}else"cancelled_user_cancelled"===ie||(null===(D=le)||void 0===D||null===(D=D.statusMetadata)||void 0===D?void 0:D.minedTx)===S.SmartTransactionStatus.cancelled?(we=G("stxUserCancelled"),ve=G("stxUserCancelledDescription"),be=n.default.createElement(C.default,null)):ie.startsWith("cancelled")||ie.includes("deadline_missed")?(we=G("stxCancelled"),ve=G("stxCancelledDescription"),ye=G("stxCancelledSubDescription"),be=n.default.createElement(C.default,null)):"unknown"===ie?(we=G("stxUnknown"),ve=G("stxUnknownDescription"),be=n.default.createElement(O.default,null)):"reverted"===ie&&(we=G("stxFailure"),ve=G("stxFailureDescription",[n.default.createElement("a",{className:"smart-transaction-status__support-link",key:"smart-transaction-status-support-link",href:"https://support.metamask.io",target:"_blank",rel:"noopener noreferrer"},G("customerSupport"))]),be=n.default.createElement(I.default,null));he&&oe&&(ke=(0,s.getBlockExplorerLink)({hash:he,chainId:J},{blockExplorerUrl:re}));const Ce=le.cancellable&&!j,Oe=()=>n.default.createElement(f.default,{marginBottom:0},n.default.createElement("a",{className:"smart-transaction-status__cancel-swap-link",href:"#",onClick:e=>{null==e||e.preventDefault(),U(!0),Te({event:"Cancel STX",category:_.MetaMetricsEventCategory.Swaps,sensitiveProperties:fe}),B((0,u.cancelSwapsSmartTransaction)(oe))}},G("attemptToCancelSwapForFree")));return n.default.createElement("div",{className:"smart-transaction-status"},n.default.createElement(f.default,{paddingLeft:8,paddingRight:8,height:E.BLOCK_SIZES.FULL,justifyContent:E.JustifyContent.flexStart,display:E.DISPLAY.FLEX,className:"smart-transaction-status__content"},n.default.createElement(f.default,{marginTop:10,marginBottom:0,display:E.DISPLAY.FLEX,justifyContent:E.JustifyContent.center,alignItems:E.AlignItems.center},n.default.createElement(m.Text,{color:E.TextColor.textAlternative,variant:E.TextVariant.bodySm,as:"h6"},`${(null==q?void 0:q.value)&&Number(q.value).toFixed(5)} `),n.default.createElement(m.Text,{color:E.TextColor.textAlternative,variant:E.TextVariant.bodySmBold,as:"h6",marginLeft:1,marginRight:2},V.symbol??(null===(R=le)||void 0===R?void 0:R.sourceTokenSymbol)),V.iconUrl?n.default.createElement(g.default,{url:V.iconUrl,className:"main-quote-summary__icon",name:V.symbol??(null===(M=le)||void 0===M?void 0:M.destinationTokenSymbol),fallbackClassName:"main-quote-summary__icon-fallback"}):null,n.default.createElement(f.default,{display:E.DISPLAY.BLOCK,marginLeft:2,marginRight:2},n.default.createElement(N.default,null)),H.iconUrl?n.default.createElement(g.default,{url:H.iconUrl,className:"main-quote-summary__icon",name:H.symbol??(null===(L=le)||void 0===L?void 0:L.destinationTokenSymbol),fallbackClassName:"main-quote-summary__icon-fallback"}):null,n.default.createElement(m.Text,{color:E.TextColor.textAlternative,variant:E.TextVariant.bodySm,as:"h6",marginLeft:2},`~${ge&&Number(ge).toFixed(5)} `),n.default.createElement(m.Text,{color:E.TextColor.textAlternative,variant:E.TextVariant.bodySmBold,as:"h6",marginLeft:1},H.symbol??(null===(F=le)||void 0===F?void 0:F.destinationTokenSymbol))),n.default.createElement(f.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--top"}),be&&n.default.createElement(f.default,{marginTop:3,marginBottom:2},be),_e&&n.default.createElement(f.default,{marginTop:7,marginBottom:1,display:E.DISPLAY.FLEX,justifyContent:E.JustifyContent.center,alignItems:E.AlignItems.center},n.default.createElement(x.default,null),n.default.createElement(m.Text,{color:E.TextColor.textAlternative,variant:E.TextVariant.bodySm,as:"h6",marginLeft:1},`${G("stxSwapCompleteIn")} `),n.default.createElement(m.Text,{color:E.TextColor.textAlternative,variant:E.TextVariant.bodySmBold,as:"h6",marginLeft:1,className:"smart-transaction-status__remaining-time"},(0,v.showRemainingTimeInMinAndSec)(pe))),n.default.createElement(m.Text,{color:E.TextColor.textDefault,variant:E.TextVariant.headingSm,as:"h4",fontWeight:E.FontWeight.Bold},we),_e&&n.default.createElement("div",{className:"smart-transaction-status__loading-bar-container"},n.default.createElement("div",{className:"smart-transaction-status__loading-bar",style:{width:100/te.stxStatusDeadline*(te.stxStatusDeadline-pe)+"%"}})),ve&&n.default.createElement(m.Text,{variant:E.TextVariant.bodySm,as:"h6",marginTop:ke&&1,color:E.TextColor.textAlternative},ve),ke&&n.default.createElement(k.default,{blockExplorerUrl:ke,sensitiveTrackingProperties:fe}),n.default.createElement(f.default,{marginTop:3,className:"smart-transaction-status__background-animation smart-transaction-status__background-animation--bottom"}),ye&&n.default.createElement(m.Text,{variant:E.TextVariant.bodySm,as:"h6",marginTop:8,color:E.TextColor.textAlternative},ye)),Ce&&oe&&_e&&n.default.createElement(Oe,null),ie===S.SmartTransactionStatus.success?n.default.createElement(b.default,{sensitiveTrackingProperties:fe}):null,n.default.createElement(h.default,{onSubmit:async()=>{Se?(await B((0,u.prepareToLeaveSwaps)()),W.push(p.DEFAULT_ROUTE)):W.push(p.BUILD_QUOTE_ROUTE)},onCancel:async()=>{await B((0,u.prepareToLeaveSwaps)()),W.push(p.DEFAULT_ROUTE)},submitText:G(Se?"close":"tryAgain"),hideCancel:Se,cancelText:G("close"),className:"smart-transaction-status__swaps-footer"}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=D(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("@metamask/etherscan-link"),i=e("lodash"),l=e("../../../contexts/i18n"),u=e("../../../ducks/swaps/swaps"),c=e("../../../selectors"),d=e("../../../../shared/constants/swaps"),p=e("../../../helpers/constants/routes"),m=e("../../../components/component-library"),f=P(e("../../../components/ui/box")),g=P(e("../../../components/ui/url-icon")),E=e("../../../helpers/constants/design-system"),T=e("../../../store/actions"),_=e("../../../../shared/constants/metametrics"),S=e("../../../../shared/constants/transaction"),h=P(e("../swaps-footer")),v=e("../swaps.util"),y=e("../../../contexts/metametrics"),b=P(e("../create-new-swap")),k=P(e("../view-on-block-explorer")),w=e("../../../../shared/lib/transactions-controller-utils"),A=P(e("./success-icon")),I=P(e("./reverted-icon")),C=P(e("./canceled-icon")),O=P(e("./unknown-icon")),N=P(e("./arrow-icon")),x=P(e("./timer-icon"));function P(e){return e&&e.__esModule?e:{default:e}}function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(D=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/smart-transaction-status.js"}],[5312,{react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M34.5457 19.8983C34.5457 23.9296 32.9443 27.7958 30.0937 30.6463C27.2432 33.4969 23.377 35.0983 19.3457 35.0983C15.3144 35.0983 11.4482 33.4969 8.59768 30.6463C5.74713 27.7958 4.1457 23.9296 4.1457 19.8983C4.1457 15.867 5.74713 12.0008 8.59768 9.15029C11.4482 6.29974 15.3144 4.69832 19.3457 4.69832C20.7897 4.69832 22.1957 4.90732 23.5257 5.28732L26.5087 2.30432C24.3047 1.39232 21.8917 0.898315 19.3457 0.898315C16.8506 0.898315 14.3799 1.38977 12.0747 2.3446C9.76953 3.29944 7.67499 4.69897 5.91067 6.46329C2.34748 10.0265 0.345703 14.8592 0.345703 19.8983C0.345703 24.9374 2.34748 29.7702 5.91067 33.3333C7.67499 35.0977 9.76953 36.4972 12.0747 37.452C14.3799 38.4069 16.8506 38.8983 19.3457 38.8983C24.3848 38.8983 29.2175 36.8965 32.7807 33.3333C36.3439 29.7702 38.3457 24.9374 38.3457 19.8983H34.5457ZM11.5747 16.2503L8.8957 18.9483L17.4457 27.4983L36.4457 8.49832L33.7667 5.80032L17.4457 22.1213L11.5747 16.2503Z",fill:"#28A745"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/success-icon.js"}],[5313,{react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("path",{d:"M7.36621 0.0810547C3.62012 0.0810547 0.584961 3.11621 0.584961 6.8623C0.584961 10.6084 3.62012 13.6436 7.36621 13.6436C11.1123 13.6436 14.1475 10.6084 14.1475 6.8623C14.1475 3.11621 11.1123 0.0810547 7.36621 0.0810547ZM7.36621 12.3311C4.33105 12.3311 1.89746 9.89746 1.89746 6.8623C1.89746 3.85449 4.33105 1.39355 7.36621 1.39355C10.374 1.39355 12.835 3.85449 12.835 6.8623C12.835 9.89746 10.374 12.3311 7.36621 12.3311ZM9.03418 9.4873C9.19824 9.59668 9.38965 9.56934 9.49902 9.40527L10.0186 8.72168C10.1279 8.55762 10.1006 8.36621 9.93652 8.25684L8.13184 6.91699V3.03418C8.13184 2.87012 7.96777 2.70605 7.80371 2.70605H6.92871C6.7373 2.70605 6.60059 2.87012 6.60059 3.03418V7.5459C6.60059 7.62793 6.62793 7.7373 6.70996 7.79199L9.03418 9.4873Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/timer-icon.js"}],[5314,{react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){return r.default.createElement("svg",{width:"39",height:"39",viewBox:"0 0 39 39",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.default.createElement("circle",{cx:"19.1533",cy:"19.2715",r:"17.1",stroke:"var(--color-primary-default)",strokeWidth:"3.8"}),r.default.createElement("path",{d:"M16.712 21.5034C16.712 20.7834 16.88 20.1834 17.216 19.7034C17.568 19.2074 18.08 18.7274 18.752 18.2634C19.008 18.0874 19.264 17.9274 19.52 17.7834C19.776 17.6394 20 17.4874 20.192 17.3274C20.4 17.1514 20.56 16.9674 20.672 16.7754C20.8 16.5674 20.864 16.3194 20.864 16.0314C20.864 15.5354 20.688 15.1594 20.336 14.9034C20 14.6474 19.592 14.5194 19.112 14.5194C18.616 14.5194 18.16 14.6794 17.744 14.9994C17.344 15.3034 17.144 15.7674 17.144 16.3914H13.52C13.52 15.6394 13.664 14.9354 13.952 14.2794C14.24 13.6074 14.632 13.0314 15.128 12.5514C15.64 12.0554 16.232 11.6634 16.904 11.3754C17.592 11.0874 18.328 10.9434 19.112 10.9434C19.896 10.9434 20.616 11.0794 21.272 11.3514C21.944 11.6234 22.512 11.9834 22.976 12.4314C23.456 12.8794 23.824 13.3994 24.08 13.9914C24.352 14.5674 24.488 15.1754 24.488 15.8154C24.488 16.2314 24.456 16.6234 24.392 16.9914C24.344 17.3594 24.24 17.7114 24.08 18.0474C23.936 18.3834 23.728 18.7114 23.456 19.0314C23.184 19.3514 22.84 19.6634 22.424 19.9674C21.784 20.4474 21.272 20.8234 20.888 21.0954C20.52 21.3674 20.336 21.6474 20.336 21.9354V21.9594H16.712V21.5034ZM18.512 28.4634C18.16 28.4634 17.824 28.3994 17.504 28.2714C17.2 28.1274 16.928 27.9434 16.688 27.7194C16.464 27.4794 16.28 27.2074 16.136 26.9034C16.008 26.5834 15.944 26.2474 15.944 25.8954C15.944 25.5434 16.008 25.2154 16.136 24.9114C16.28 24.5914 16.464 24.3194 16.688 24.0954C16.928 23.8554 17.2 23.6714 17.504 23.5434C17.824 23.3994 18.16 23.3274 18.512 23.3274C18.864 23.3274 19.192 23.3994 19.496 23.5434C19.816 23.6714 20.088 23.8554 20.312 24.0954C20.552 24.3194 20.736 24.5914 20.864 24.9114C21.008 25.2154 21.08 25.5434 21.08 25.8954C21.08 26.2474 21.008 26.5834 20.864 26.9034C20.736 27.2074 20.552 27.4794 20.312 27.7194C20.088 27.9434 19.816 28.1274 19.496 28.2714C19.192 28.3994 18.864 28.4634 18.512 28.4634Z",fill:"var(--color-primary-default)"}))};var n,r=(n=e("react"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/smart-transaction-status/unknown-icon.js"}],[5315,{"../../../../shared/constants/swaps":4086,"../../../components/component-library":4582,"../../../components/component-library/banner-alert":4538,"../../../components/ui/box":4749,"../../../contexts/i18n":4890,"../../../ducks/swaps/swaps":4910,"../../../helpers/constants/design-system":4914,"prop-types":3583,react:3799,"react-redux":3764},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=m(e("prop-types")),s=e("../../../contexts/i18n"),i=e("../../../components/component-library/banner-alert"),l=m(e("../../../components/ui/box")),u=e("../../../helpers/constants/design-system"),c=e("../../../components/component-library"),d=e("../../../../shared/constants/swaps"),p=e("../../../ducks/swaps/swaps");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function g({swapsErrorKey:e,showTransactionSettingsLink:t,currentSlippage:a}){const o=(0,n.useContext)(s.I18nContext),m=(0,r.useDispatch)();let f,g,E=u.SEVERITIES.DANGER;const T=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd},n.default.createElement(c.ButtonLink,{onClick:e=>{e.preventDefault(),m((0,p.setTransactionSettingsOpened)(!0))},size:c.ButtonLinkSize.Inherit},o("swapAdjustSlippage")));switch(e){case d.SLIPPAGE_VERY_HIGH_ERROR:f=o("swapSlippageOverLimitTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageOverLimitDescription")),T);break;case d.SLIPPAGE_HIGH_ERROR:E=u.SEVERITIES.WARNING,f=o("swapSlippageHighTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageHighDescription",[a])),t&&T);break;case d.SLIPPAGE_LOW_ERROR:E=u.SEVERITIES.WARNING,f=o("swapSlippageLowTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageLowDescription",[a])),t&&T);break;case d.SLIPPAGE_NEGATIVE_ERROR:f=o("swapSlippageNegativeTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapSlippageNegativeDescription")),T);break;case d.QUOTES_NOT_AVAILABLE_ERROR:f=o("swapQuotesNotAvailableErrorTitle"),g=n.default.createElement(l.default,null,n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapQuotesNotAvailableDescription")),n.default.createElement(c.ButtonLink,{size:c.ButtonLinkSize.Inherit,textProps:{variant:u.TextVariant.bodyMd,alignItems:u.AlignItems.flexStart},as:"a",href:"https://support.metamask.io/hc/en-us/articles/4405093054363-User-Guide-Swaps",target:"_blank",rel:"noopener noreferrer"},o("swapLearnMore")));break;case d.ERROR_FETCHING_QUOTES:f=o("swapFetchingQuotesErrorTitle"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapFetchingQuotesErrorDescription"));break;case d.CONTRACT_DATA_DISABLED_ERROR:f=o("swapContractDataDisabledErrorTitle"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapContractDataDisabledErrorDescription"));break;case d.QUOTES_EXPIRED_ERROR:f=o("swapQuotesExpiredErrorTitle"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("swapQuotesExpiredErrorDescription"));break;case d.OFFLINE_FOR_MAINTENANCE:f=o("offlineForMaintenance"),g=n.default.createElement(c.Text,{variant:u.TextVariant.bodyMd,as:"h6"},o("metamaskSwapsOfflineDescription"));break;case d.SWAP_FAILED_ERROR:f=o("swapFailedErrorTitle")}return n.default.createElement(i.BannerAlert,{severity:E,title:f,titleProps:{"data-testid":"swaps-banner-title"}},g)}g.propTypes={swapsErrorKey:o.default.string,showTransactionSettingsLink:o.default.bool,currentSlippage:o.default.number}}}},{package:"$root$",file:"ui/pages/swaps/swaps-banner-alert/swaps-banner-alert.js"}],[5316,{"./swaps-footer":5317},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./swaps-footer"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/swaps-footer/index.js"}],[5317,{"../../../components/ui/page-container/page-container-footer":4836,"../../../contexts/i18n":4890,classnames:2479,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=u(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=l(e("prop-types")),o=l(e("classnames")),s=e("../../../contexts/i18n"),i=l(e("../../../components/ui/page-container/page-container-footer"));function l(e){return e&&e.__esModule?e:{default:e}}function u(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(u=function(e){return e?a:t})(e)}function c({onCancel:e,hideCancel:t,onSubmit:a,submitText:r,disabled:l,showTermsOfService:u,showTopBorder:c,className:d="",cancelText:p}){const m=(0,n.useContext)(s.I18nContext);return n.default.createElement("div",{className:"swaps-footer"},n.default.createElement("div",{className:(0,o.default)("swaps-footer__buttons",d,{"swaps-footer__buttons--border":c})},n.default.createElement(i.default,{onCancel:e,hideCancel:t,cancelText:p||m("back"),onSubmit:a,submitText:r,footerClassName:(0,o.default)("swaps-footer__custom-page-container-footer-class",d),footerButtonClassName:(0,o.default)("swaps-footer__custom-page-container-footer-button-class",{"swaps-footer__custom-page-container-footer-button-class--single":t}),disabled:l})),u&&n.default.createElement("div",{className:"swaps-footer__bottom-text",onClick:()=>global.platform.openTab({url:"https://metamask.io/terms.html"})},m("termsOfService")))}c.propTypes={onCancel:r.default.func,hideCancel:r.default.bool,onSubmit:r.default.func,submitText:r.default.string,disabled:r.default.bool,showTermsOfService:r.default.bool,showTopBorder:r.default.bool,className:r.default.string,cancelText:r.default.string}}}},{package:"$root$",file:"ui/pages/swaps/swaps-footer/swaps-footer.js"}],[5318,{"../../../shared/constants/common":4069,"../../../shared/constants/network":4078,"../../../shared/constants/swaps":4086,"../../../shared/lib/fetch-with-cache":4093,"../../../shared/lib/swaps-utils":4096,"../../../shared/lib/transactions-controller-utils":4099,"../../../shared/modules/conversion.utils":4105,"../../../shared/modules/hexstring-utils":4110,"../../../shared/modules/swaps.utils":4120,"../../helpers/utils/confirm-tx.util":4938,"bignumber.js":2364},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.countDecimals=a.StxErrorTypes=void 0,a.fetchAggregatorMetadata=async function(e){const t=(0,p.getBaseApi)("aggregatorMetadata",e),a=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g},functionName:"fetchAggregatorMetadata"}),n={};for(const e in a)(0,p.validateData)(h,a[e],t)&&(n[e]=a[e]);return n},a.fetchSwapsFeatureFlags=async function(){const e=o.SWAPS_API_V2_BASE_URL;return await(0,u.default)({url:`${e}/featureFlags`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:6e5},functionName:"fetchSwapsFeatureFlags"})},a.fetchSwapsGasPrices=async function(e){const t=(0,p.getBaseApi)("gasPrices",e),a=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:3e4},functionName:"fetchSwapsGasPrices"});if(!(0,p.validateData)(y,a,t))throw new Error(`${t} response is invalid`);const{SafeGasPrice:n,ProposeGasPrice:r,FastGasPrice:o}=a;return{safeLow:n,average:r,fast:o}},a.fetchToken=async function(e,t){const a=(0,p.getBaseApi)("token",t);return await(0,u.default)({url:`${a}?address=${e}`,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g},functionName:"fetchToken"})},a.fetchTokenPrice=async function(e){var t;const a=`spot-prices?tokenAddresses=${e}&vsCurrency=eth&includeMarketData=false`,n=await(0,u.default)({url:`https://price-api.metafi.codefi.network/v2/chains/1/${a}`,fetchOptions:{method:"GET"},cacheOptions:{cacheRefreshTime:6e4},functionName:"fetchTokenPrice"});return null==n||null===(t=n[e])||void 0===t?void 0:t.eth},a.fetchTokens=async function(e){const t=(0,p.getBaseApi)("tokens",e),a=await(0,u.default)({url:t,fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g},functionName:"fetchTokens"});return[o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e]||null,...a.filter((a=>(0,p.validateData)(_,a,t,false)&&!((0,s.isSwapsDefaultTokenSymbol)(a.symbol,e)||(0,s.isSwapsDefaultTokenAddress)(a.address,e))))]},a.fetchTopAssets=async function(e){const t=(0,p.getBaseApi)("topAssets",e),a=await(0,u.default)({url:t,functionName:"fetchTopAssets",fetchOptions:{method:"GET",headers:T},cacheOptions:{cacheRefreshTime:g}})||[];return a.reduce(((e,a,n)=>(0,p.validateData)(S,a,t)?{...e,[a.address]:{index:String(n)}}:e),{})},a.formatSwapsValueForDisplay=w,a.getNetworkNameByChainId=a.getFeeForSmartTransaction=a.getClassNameForCharLength=void 0,a.getRenderableNetworkFeesForQuote=k,a.parseSmartTransactionsError=a.isContractAddressValid=a.getTranslatedStxErrorMessage=a.getSwapsLivenessForNetwork=void 0,a.quotesToRenderableData=function({quotes:e,gasPrice:t,conversionRate:a,currentCurrency:n,approveGas:o,tokenConversionRates:i,chainId:l,smartTransactionEstimatedGas:u,nativeCurrencySymbol:c,multiLayerL1ApprovalFeeTotal:p}){return Object.values(e).map((e=>{const{destinationAmount:f=0,sourceAmount:g=0,sourceTokenInfo:E,destinationTokenInfo:T,slippage:_,aggType:S,aggregator:h,gasEstimateWithRefund:v,averageGas:y,fee:A,trade:I,multiLayerL1TradeFeeTotal:C}=e;let O=null;null!==C&&null!==p?O=(0,m.sumHexes)(C||"0x0",p||"0x0"):null!==C&&(O=C);const N=(0,d.calcTokenAmount)(g,E.decimals).toString(10),x=(0,d.calcTokenAmount)(f,T.decimals).toPrecision(8);let P=null,D=null,R=null,M=null;({feeInFiat:P,feeInEth:D,rawNetworkFees:R,rawEthFee:M}=k({tradeGas:v||(0,m.decimalToHex)(y||8e5),approveGas:o,gasPrice:t,currentCurrency:n,conversionRate:a,tradeValue:I.value,sourceSymbol:E.symbol,sourceAmount:g,chainId:l,multiLayerL1FeeTotal:O})),u&&({feeInFiat:P,feeInEth:D}=b({chainId:l,currentCurrency:n,conversionRate:a,nativeCurrencySymbol:c,feeInWeiDec:u.feeEstimate}));const L=new r.BigNumber(100-_).div(100),F=new r.BigNumber(x).times(L).toFixed(6),j=i[T.address],U=(0,s.isSwapsDefaultTokenSymbol)(T.symbol,l)?(0,d.calcTokenAmount)(f,T.decimals).minus(M,10):new r.BigNumber(j||0,10).times((0,d.calcTokenAmount)(f,T.decimals),10).minus(M,10);let G,W=_;return"AGG"===S?G="swapAggregator":"RFQ"===S?(G="swapRequestForQuotation",W=0):G="DEX"===S?"swapDecentralizedExchange":"CONTRACT"===S?"swapDirectContract":"swapUnknown",{aggId:h,amountReceiving:`${x} ${T.symbol}`,destinationTokenDecimals:T.decimals,destinationTokenSymbol:T.symbol,destinationTokenValue:w(x),destinationIconUrl:T.iconUrl,isBestQuote:e.isBestQuote,liquiditySourceKey:G,feeInEth:D,detailedNetworkFees:`${D} (${P})`,networkFees:P,quoteSource:S,rawNetworkFees:R,slippage:W,sourceTokenDecimals:E.decimals,sourceTokenSymbol:E.symbol,sourceTokenValue:N,sourceTokenIconUrl:E.iconUrl,ethValueOfTrade:U,minimumAmountReceived:F,metaMaskFee:A}}))},a.showRemainingTimeInMinAndSec=void 0;var n,r=e("bignumber.js"),o=e("../../../shared/constants/swaps"),s=e("../../../shared/modules/swaps.utils"),i=e("../../../shared/constants/network"),l=e("../../helpers/utils/confirm-tx.util"),u=(n=e("../../../shared/lib/fetch-with-cache"))&&n.__esModule?n:{default:n},c=e("../../../shared/modules/hexstring-utils"),d=e("../../../shared/lib/transactions-controller-utils"),p=e("../../../shared/lib/swaps-utils"),m=e("../../../shared/modules/conversion.utils"),f=e("../../../shared/constants/common");const g=3e5,E="usd",T={"X-Client-Id":o.SWAPS_CLIENT_ID},_=[{property:"address",type:"string",validator:e=>(0,c.isValidHexAddress)(e,{allowNonPrefixed:!1})},{property:"symbol",type:"string",validator:e=>(0,p.truthyString)(e)&&e.length<=12},{property:"decimals",type:"string|number",validator:e=>Number(e)>=0&&Number(e)<=36}],S=_.slice(0,2),h=[{property:"color",type:"string",validator:e=>Boolean(e.match(/^#[A-Fa-f0-9]+$/u))},{property:"title",type:"string",validator:p.truthyString},{property:"icon",type:"string",validator:e=>Boolean(e.match(/^data:image/u))}],v=e=>!isNaN(e)&&e.match(/^[.0-9]+$/u)&&!isNaN(parseFloat(e)),y=[{property:"SafeGasPrice",type:"string",validator:v},{property:"ProposeGasPrice",type:"string",validator:v},{property:"FastGasPrice",type:"string",validator:v}];const b=({chainId:e,currentCurrency:t,conversionRate:a,USDConversionRate:n,nativeCurrencySymbol:r,feeInWeiDec:s})=>{var i;const u=(0,m.decimalToHex)(s),c=(0,m.getValueFromWeiHex)({value:u,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),d=(0,m.getValueFromWeiHex)({value:u,toCurrency:t,conversionRate:a,numberOfDecimals:2});let p;p=t===E?d:(0,m.getValueFromWeiHex)({value:u,toCurrency:E,conversionRate:n,numberOfDecimals:2});return{feeInUsd:p,feeInFiat:(0,l.formatCurrency)(d,t),feeInEth:`${c} ${r||(null===(i=o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[e])||void 0===i?void 0:i.symbol)}`,rawEthFee:c}};function k({tradeGas:e,approveGas:t,gasPrice:a,currentCurrency:n,conversionRate:i,USDConversionRate:u,tradeValue:c,sourceSymbol:p,sourceAmount:g,chainId:T,nativeCurrencySymbol:_,multiLayerL1FeeTotal:S}){const h=new r.BigNumber(e||"0x0",16).plus(t||"0x0",16).toString(16);let v=(0,d.calcGasTotal)(h,a);null!==S&&(v=(0,m.sumHexes)(v||"0x0",S||"0x0"));const y=new r.BigNumber(c,16).minus((0,s.isSwapsDefaultTokenSymbol)(p,T)?g:0,10).toString(16),b=new r.BigNumber(v,16).plus(y,16).toString(16),k=(0,m.getValueFromWeiHex)({value:b,toDenomination:f.EtherDenomination.ETH,numberOfDecimals:5}),w=(0,m.getValueFromWeiHex)({value:b,toCurrency:n,conversionRate:i,numberOfDecimals:2}),A=(0,l.formatCurrency)(w,n);let I;I=n===E?w:(0,m.getValueFromWeiHex)({value:b,toCurrency:E,conversionRate:u,numberOfDecimals:2});return{rawNetworkFees:w,feeInUsd:I,rawEthFee:k,feeInFiat:A,feeInEth:`${k} ${_||o.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[T].symbol}`,nonGasFee:y}}function w(e){let t;return t="string"==typeof e&&e.includes("...")?e:(0,d.toPrecisionWithoutTrailingZeros)(e,12),t.match(/e[+-]/u)&&(t=new r.BigNumber(t).toFixed()),t}a.getFeeForSmartTransaction=b;a.getClassNameForCharLength=(e,t)=>{let a;return a=!e||e.length<=10?"lg":e.length>10&&e.length<=13?"md":"sm",`${t}--${a}`};a.isContractAddressValid=(e,t)=>!(!e||!o.ALLOWED_CONTRACT_ADDRESSES[t])&&o.ALLOWED_CONTRACT_ADDRESSES[t].some((t=>e.toLowerCase()===t.toLowerCase()));const A=e=>{switch(e){case i.CHAIN_IDS.MAINNET:return o.ETHEREUM;case i.CHAIN_IDS.BSC:return o.BSC;case i.CHAIN_IDS.POLYGON:return o.POLYGON;case i.CHAIN_IDS.GOERLI:return o.GOERLI;case i.CHAIN_IDS.AVALANCHE:return o.AVALANCHE;case i.CHAIN_IDS.OPTIMISM:return o.OPTIMISM;case i.CHAIN_IDS.ARBITRUM:return o.ARBITRUM;case i.CHAIN_IDS.ZKSYNC_ERA:return o.ZKSYNC_ERA;case i.CHAIN_IDS.LINEA_MAINNET:return o.LINEA;default:return""}};a.getNetworkNameByChainId=A;a.getSwapsLivenessForNetwork=(e,t={})=>{const a=A(e);if([i.CHAIN_IDS.LOCALHOST,i.CHAIN_IDS.GOERLI].includes(e))return{swapsFeatureIsLive:!0};if(!t[a])return{swapsFeatureIsLive:!1};return t[a].extensionActive?{swapsFeatureIsLive:!0}:{swapsFeatureIsLive:t[a].fallbackToV1}};a.countDecimals=e=>{var t;return e&&Math.floor(e)!==e&&(null===(t=e.toString().split(".")[1])||void 0===t?void 0:t.length)||0};a.showRemainingTimeInMinAndSec=e=>{if(!Number.isInteger(e))return"0:00";return`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`};let I=a.StxErrorTypes=function(e){return e.unavailable="unavailable",e.notEnoughFunds="not_enough_funds",e.regularTxPending="regular_tx_pending",e}({});a.getTranslatedStxErrorMessage=(e,t)=>{switch(e){case I.unavailable:case I.regularTxPending:return t("smartSwapsErrorUnavailable");case I.notEnoughFunds:return t("smartSwapsErrorNotEnoughFunds");default:return t("smartSwapsErrorUnavailable")}};a.parseSmartTransactionsError=e=>{const t=e.slice(12);return JSON.parse(t.trim())}}}},{package:"$root$",file:"ui/pages/swaps/swaps.util.ts"}],[5319,{"../../../../shared/constants/swaps":4086,"../../../components/component-library":4582,"../../../components/component-library/modal-content/deprecated":4590,"../../../components/component-library/modal-header/deprecated":4599,"../../../components/ui/box":4749,"../../../components/ui/button":4753,"../../../components/ui/button-group":4751,"../../../components/ui/info-tooltip":4807,"../../../components/ui/toggle-button":4871,"../../../components/ui/typography":4882,"../../../contexts/i18n":4890,"../../../ducks/swaps/swaps":4910,"../../../helpers/constants/design-system":4914,"../../../store/actions":5345,"../swaps.util":5318,classnames:2479,"prop-types":3583,react:3799,"react-redux":3764},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=k;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=y(e("prop-types")),s=y(e("classnames")),i=e("../../../contexts/i18n"),l=y(e("../../../components/ui/button-group")),u=y(e("../../../components/ui/button")),c=y(e("../../../components/ui/info-tooltip")),d=y(e("../../../components/ui/toggle-button")),p=y(e("../../../components/ui/box")),m=y(e("../../../components/ui/typography")),f=e("../../../helpers/constants/design-system"),g=e("../swaps.util"),E=e("../../../../shared/constants/swaps"),T=e("../../../components/component-library"),_=e("../../../components/component-library/modal-content/deprecated"),S=e("../../../components/component-library/modal-header/deprecated"),h=e("../../../store/actions"),v=e("../../../ducks/swaps/swaps");function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}function k({onSelect:e,onModalClose:t,maxAllowedSlippage:a,currentSlippage:o,smartTransactionsEnabled:y,smartTransactionsOptInStatus:b,setSmartTransactionsOptInStatus:k,currentSmartTransactionsError:w,isDirectWrappingEnabled:A}){const I=(0,n.useContext)(i.I18nContext),C=(0,r.useDispatch)(),O=(0,r.useSelector)(v.getSwapsErrorKey),[N,x]=(0,n.useState)((()=>"number"!=typeof o||Object.values(E.Slippage).includes(o)?"":o.toString())),[P,D]=(0,n.useState)(!1),[R,M]=(0,n.useState)((()=>o===E.Slippage.high?1:o===E.Slippage.default?0:"number"==typeof o?2:0)),[L,F]=(0,n.useState)(null),[j,U]=(0,n.useState)(o),[G,W]=(0,n.useState)(b),B=j!==o||G!==b;let q="",H="",V=f.SEVERITIES.INFO;N&&(Number(N)<0?(V=f.SEVERITIES.DANGER,q=I("swapSlippageNegativeDescription"),H=I("swapSlippageNegativeTitle"),C((0,h.setSwapsErrorKey)(E.SLIPPAGE_NEGATIVE_ERROR))):Number(N)>0&&Number(N)<=1?(V=f.SEVERITIES.WARNING,q=I("swapSlippageLowDescription",[j]),H=I("swapSlippageLowTitle")):Number(N)>=5&&Number(N)<=a?(V=f.SEVERITIES.WARNING,q=I("swapSlippageHighDescription",[j]),H=I("swapSlippageHighTitle")):Number(N)>a?(V=f.SEVERITIES.DANGER,q=I("swapSlippageOverLimitDescription"),H=I("swapSlippageOverLimitTitle"),C((0,h.setSwapsErrorKey)(E.SLIPPAGE_VERY_HIGH_ERROR))):0===Number(N)?(V=f.SEVERITIES.INFO,q=I("swapSlippageZeroDescription"),H=I("swapSlippageZeroTitle")):O&&C((0,h.setSwapsErrorKey)("")));const K=V===f.SEVERITIES.DANGER,$=N||I("swapCustom");return(0,n.useEffect)((()=>{L&&P&&window.document.activeElement!==L&&L.focus()}),[L,P]),(0,n.useEffect)((()=>{2!==R&&C((0,h.setSwapsErrorKey)(""))}),[C,R]),(0,n.useEffect)((()=>{G===undefined&&W(b)}),[b,G]),n.default.createElement(T.Modal,{onClose:t,isOpen:!0,isClosedOnOutsideClick:!1,isClosedOnEscapeKey:!0,className:"mm-modal__custom-scrollbar"},n.default.createElement(T.ModalOverlay,null),n.default.createElement(_.ModalContent,null,n.default.createElement(S.ModalHeader,{onClose:t},I("transactionSettings")),n.default.createElement(p.default,{display:f.DISPLAY.FLEX,flexDirection:f.FlexDirection.Column,justifyContent:f.JustifyContent.spaceBetween,alignItems:f.AlignItems.stretch,className:"transaction-settings__content"},n.default.createElement(p.default,{marginTop:7,marginBottom:5},n.default.createElement(n.default.Fragment,null,y&&n.default.createElement(p.default,{marginTop:2,marginBottom:6,display:f.DISPLAY.FLEX,justifyContent:f.JustifyContent.spaceBetween},n.default.createElement(p.default,{display:f.DISPLAY.FLEX,alignItems:f.AlignItems.center,paddingRight:3},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,boxProps:{paddingRight:2}},I("smartSwaps")),w?n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,g.getTranslatedStxErrorMessage)(w,I)}):n.default.createElement(c.default,{position:"top",contentText:I("smartSwapsTooltip",[n.default.createElement(T.ButtonLink,{key:"smart-swaps-faq-and-risk-disclosures",size:T.ButtonLinkSize.Inherit,href:E.SMART_SWAPS_FAQ_AND_RISK_DISCLOSURES_URL,externalLink:!0,display:f.Display.Inline},I("faqAndRiskDisclosures"))]),iconFillColor:"var(--color-icon-muted)"})),n.default.createElement(d.default,{value:G,onToggle:e=>{W(!e,e)},offLabel:I("off"),onLabel:I("on"),disabled:Boolean(w)})),!A&&n.default.createElement(n.default.Fragment,null,n.default.createElement(p.default,{display:f.DISPLAY.FLEX,alignItems:f.AlignItems.center},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,boxProps:{paddingRight:2}},I("swapsMaxSlippage")),w?n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:(0,g.getTranslatedStxErrorMessage)(w,I)}):n.default.createElement(c.default,{position:"top",iconFillColor:"var(--color-icon-muted)",contentText:I("swapSlippageTooltip")})),n.default.createElement(p.default,{display:f.DISPLAY.FLEX},n.default.createElement(l.default,{defaultActiveButtonIndex:2!==R||N?R:1,variant:"radiogroup",newActiveButtonIndex:R,className:(0,s.default)("button-group","transaction-settings__button-group")},n.default.createElement(u.default,{onClick:()=>{x(""),D(!1),M(0),U(E.Slippage.default)}},I("swapSlippagePercent",[E.Slippage.default])),n.default.createElement(u.default,{onClick:()=>{x(""),D(!1),M(1),U(E.Slippage.high)}},I("swapSlippagePercent",[E.Slippage.high])),n.default.createElement(u.default,{className:(0,s.default)("transaction-settings__button-group-custom-button",{"radio-button--danger":K}),onClick:()=>{M(2),D(!0)}},P?n.default.createElement("div",{className:(0,s.default)("transaction-settings__custom-input",{"transaction-settings__custom-input--danger":K})},n.default.createElement("input",{"data-testid":"transaction-settings-custom-slippage",onChange:e=>{const{value:t}=e.target;!isNaN(Number(t))&&(x(t),U(Number(t)))},type:"text",maxLength:"4",ref:F,onBlur:()=>{D(!1)},onKeyDown:e=>{"Enter"===e.key&&D(!1)},value:N||""})):$,(N||P)&&n.default.createElement("div",{className:"transaction-settings__percentage-suffix"},"%")))))),q&&n.default.createElement(p.default,{marginTop:5},n.default.createElement(T.BannerAlert,{severity:V,title:H,titleProps:{"data-testid":"swaps-banner-title"}},n.default.createElement(m.default,{variant:f.TypographyVariant.H6,testId:"mm-banner-alert-notification-text"},q)))),n.default.createElement(p.default,{marginTop:5},n.default.createElement(T.ButtonPrimary,{onClick:()=>{j!==o&&e(j),G!==b&&k(G),t()},block:!0,disabled:!B,"data-testid":"update-transaction-settings-button"},I("update"))))))}k.propTypes={onSelect:o.default.func.isRequired,onModalClose:o.default.func.isRequired,maxAllowedSlippage:o.default.number.isRequired,currentSlippage:o.default.number,smartTransactionsEnabled:o.default.bool.isRequired,smartTransactionsOptInStatus:o.default.bool,setSmartTransactionsOptInStatus:o.default.func,currentSmartTransactionsError:o.default.string,isDirectWrappingEnabled:o.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/transaction-settings/transaction-settings.js"}],[5320,{"./view-on-block-explorer":5321},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./view-on-block-explorer"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/view-on-block-explorer/index.js"}],[5321,{"../../../../shared/constants/metametrics":4077,"../../../components/ui/box":4749,"../../../contexts/i18n":4890,"../../../contexts/metametrics":4891,"../../../helpers/utils/util":4956,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=d(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=c(e("prop-types")),o=c(e("../../../components/ui/box")),s=e("../../../contexts/i18n"),i=e("../../../helpers/utils/util"),l=e("../../../contexts/metametrics"),u=e("../../../../shared/constants/metametrics");function c(e){return e&&e.__esModule?e:{default:e}}function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(d=function(e){return e?a:t})(e)}function p({blockExplorerUrl:e,sensitiveTrackingProperties:t}){const a=(0,n.useContext)(s.I18nContext),r=(0,n.useContext)(l.MetaMetricsContext),c=(0,i.getURLHostName)(e);return n.default.createElement(o.default,{marginTop:6,className:"view-on-block-explorer"},n.default.createElement("button",{onClick:()=>{r({event:u.MetaMetricsEventName.ExternalLinkClicked,category:u.MetaMetricsEventCategory.Swaps,sensitiveProperties:t,properties:{link_type:u.MetaMetricsEventLinkType.TransactionBlockExplorer,location:"Swap Transaction",url_domain:c}}),global.platform.openTab({url:e})}},a("viewOnCustomBlockExplorer",[a("blockExplorerSwapAction"),c])))}p.propTypes={blockExplorerUrl:r.default.string.isRequired,sensitiveTrackingProperties:r.default.object.isRequired}}}},{package:"$root$",file:"ui/pages/swaps/view-on-block-explorer/view-on-block-explorer.js"}],[5322,{"./view-quote":5324},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./view-quote"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/swaps/view-quote/index.js"}],[5323,{"../../../../shared/constants/gas":4072,"../../../components/component-library":4582,"../../../components/ui/actionable-message/actionable-message":4745,"../../../components/ui/box":4749,"../../../components/ui/tooltip":4878,"../../../contexts/i18n":4890,"../../../helpers/constants/design-system":4914,classnames:2479,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=g;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=f(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=m(e("prop-types")),o=m(e("classnames")),s=e("../../../contexts/i18n"),i=m(e("../../../components/ui/actionable-message/actionable-message")),l=m(e("../../../components/ui/tooltip")),u=m(e("../../../components/ui/box")),c=e("../../../helpers/constants/design-system"),d=e("../../../../shared/constants/gas"),p=e("../../../components/component-library");function m(e){return e&&e.__esModule?e:{default:e}}function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(f=function(e){return e?a:t})(e)}function g(e){const{usedQuote:t,sourceTokenValue:a,destinationTokenValue:r,onAcknowledgementClick:m,acknowledged:f,priceSlippageFromSource:g,priceSlippageFromDestination:E,priceDifferencePercentage:T,priceSlippageUnknownFiatValue:_}=e,S=(0,n.useContext)(s.I18nContext);let h="",v="",y="",b="";return _?(h=S("swapPriceUnavailableTitle"),v=S("swapPriceUnavailableDescription"),y=d.GasRecommendations.high,b=S("tooltipApproveButton")):(h=S("swapPriceDifferenceTitle",[T]),v=S("swapPriceDifference",[a,t.sourceTokenInfo.symbol,g,r,t.destinationTokenInfo.symbol,E]),y=t.priceSlippage.bucket,b=S("tooltipApproveButton")),n.default.createElement("div",{className:(0,o.default)("view-quote__price-difference-warning-wrapper",y)},n.default.createElement(i.default,{message:n.default.createElement("div",{className:"view-quote__price-difference-warning-contents"},n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-text"},n.default.createElement(u.default,{display:c.DISPLAY.FLEX,justifyContent:c.JustifyContent.spaceBetween,paddingBottom:2},n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-title"},h),n.default.createElement(l.default,{position:"bottom",title:S("swapPriceImpactTooltip")},n.default.createElement(p.Icon,{name:p.IconName.Info}))),v,!f&&n.default.createElement("div",{className:"view-quote__price-difference-warning-contents-actions"},n.default.createElement("button",{onClick:()=>{m()}},b))))}))}g.propTypes={usedQuote:r.default.object,sourceTokenValue:r.default.string,destinationTokenValue:r.default.string,onAcknowledgementClick:r.default.func,acknowledged:r.default.bool,priceSlippageFromSource:r.default.string,priceSlippageFromDestination:r.default.string,priceDifferencePercentage:r.default.number,priceSlippageUnknownFiatValue:r.default.bool}}}},{package:"$root$",file:"ui/pages/swaps/view-quote/view-quote-price-difference.js"}],[5324,{"../../../../app/scripts/lib/util":90,"../../../../shared/constants/gas":4072,"../../../../shared/constants/metametrics":4077,"../../../../shared/constants/swaps":4086,"../../../../shared/lib/metamask-controller-utils":4094,"../../../../shared/lib/swaps-utils":4096,"../../../../shared/lib/transactions-controller-utils":4099,"../../../../shared/modules/conversion.utils":4105,"../../../../shared/modules/string-utils":4119,"../../../../shared/modules/transaction.utils":4121,"../../../components/ui/actionable-message/actionable-message":4745,"../../../components/ui/box":4749,"../../../components/ui/pulse-loader":4843,"../../../contexts/i18n":4890,"../../../contexts/metametrics":4891,"../../../ducks/metamask/metamask":4906,"../../../ducks/swaps/swaps":4910,"../../../helpers/constants/routes":4919,"../../../helpers/utils/optimism/fetchEstimatedL1Fee":4949,"../../../hooks/gasFeeInput/useGasFeeInputs":4963,"../../../hooks/useEqualityCheck":4979,"../../../hooks/useEthFiatAmount":4980,"../../../hooks/usePrevious":4990,"../../../hooks/useTokenTracker":5005,"../../../selectors":5338,"../../../store/actionConstants":5344,"../../../store/actions":5345,"../../confirm-approve/confirm-approve.util":5028,"../countdown-timer":5263,"../fee-card":5273,"../main-quote-summary":5281,"../select-quote-popover":5297,"../swaps-footer":5316,"../swaps.util":5318,"./view-quote-price-difference":5323,"@sentry/browser":1878,"bignumber.js":2364,classnames:2479,lodash:3444,react:3799,"react-redux":3764,"react-router-dom":3784},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t,a,V,K,Y;const Q=(0,o.useHistory)(),X=(0,r.useDispatch)(),z=(0,n.useContext)(c.I18nContext),Z=(0,n.useContext)(E.MetaMetricsContext),[J,ee]=(0,n.useState)(!1),[te,ae]=(0,n.useState)(!1),[ne,re]=(0,n.useState)(!1),[oe,se]=(0,n.useState)(!1),[ie,le]=(0,n.useState)(null),[ue,ce]=(0,n.useState)(null),[de,pe]=(0,n.useState)(null),[me]=(0,n.useState)(Date.now()),[fe,ge]=(0,n.useState)(!1),Ee=[N.GasRecommendations.high,N.GasRecommendations.medium],Te=(0,r.useSelector)(_.getBackgroundSwapRouteState),_e=(0,r.useSelector)(_.getQuotes,i.isEqual);(0,n.useEffect)((()=>{Object.values(_e).length?"awaiting"===Te&&Q.push(b.AWAITING_SWAP_ROUTE):Q.push(b.BUILD_QUOTE_ROUTE)}),[Q,_e,Te]);const Se=(0,r.useSelector)(_.getQuotesLastFetched),he=(0,r.useSelector)(_.getUsedSwapsGasPrice),ve=(0,r.useSelector)(_.getCustomSwapsGas),ye=(0,r.useSelector)(_.getCustomMaxFeePerGas),be=(0,r.useSelector)(_.getCustomMaxPriorityFeePerGas),ke=(0,r.useSelector)(_.getSwapsUserFeeLevel),we=(0,r.useSelector)(S.getTokenExchangeRates,i.isEqual),Ae=(0,m.useEqualityCheck)(we),{balance:Ie}=(0,r.useSelector)(S.getSelectedAccount,r.shallowEqual),Ce=(0,r.useSelector)(S.conversionRateSelector),Oe=(0,r.useSelector)(S.getUSDConversionRate),Ne=(0,r.useSelector)(S.getIsMultiLayerFeeNetwork),xe=(0,r.useSelector)(S.getCurrentCurrency),Pe=(0,r.useSelector)(h.getTokens,i.isEqual),De=(0,r.useSelector)(S.checkNetworkAndAccountSupports1559),Re=(0,r.useSelector)(_.getBalanceError),Me=(0,r.useSelector)(_.getFetchParams,i.isEqual),Le=(0,r.useSelector)(_.getApproveTxParams,r.shallowEqual),Fe=(0,r.useSelector)(_.getSelectedQuote,i.isEqual),je=(0,r.useSelector)(_.getTopQuote,i.isEqual),Ue=Fe||je,Ge=(null==Ue||null===(e=Ue.trade)||void 0===e?void 0:e.value)??"0x0",We=(0,r.useSelector)(_.getSwapsQuoteRefreshTime),Be=(0,r.useSelector)(S.getSwapsDefaultToken,i.isEqual),qe=(0,r.useSelector)(S.getCurrentChainId),He=(0,r.useSelector)(h.getNativeCurrency),Ve=(0,r.useSelector)(_.getReviewSwapClickedTimestamp),Ke=(0,r.useSelector)(_.getSmartTransactionsOptInStatus),$e=(0,r.useSelector)(_.getSmartTransactionsEnabled),Ye=(0,r.useSelector)(_.getSwapsSTXLoading),Qe=(0,r.useSelector)(_.getCurrentSmartTransactionsError),Xe=(0,r.useSelector)(_.getSmartTransactionsError),ze=(0,r.useSelector)(_.getSmartTransactionFees,i.isEqual),Ze=(0,r.useSelector)(_.getCurrentSmartTransactionsEnabled),Je=(0,r.useSelector)(_.getSwapsNetworkConfig,r.shallowEqual),et=Ue.trade,tt=Ze&&Ke;let at;De&&(at=(0,g.useGasFeeInputs)(N.GasRecommendations.high,{userFeeLevel:ke||N.GasRecommendations.high}));const nt=null==Me?void 0:Me.sourceToken,rt={reg_tx_fee_in_usd:undefined,reg_tx_fee_in_eth:undefined,reg_tx_max_fee_in_usd:undefined,reg_tx_max_fee_in_eth:undefined,stx_fee_in_usd:undefined,stx_fee_in_eth:undefined,stx_max_fee_in_usd:undefined,stx_max_fee_in_eth:undefined},ot=(null==Ue?void 0:Ue.gasEstimateWithRefund)||`0x${(0,q.decimalToHex)((null==Ue?void 0:Ue.averageGas)||0)}`,st=(null==Ue?void 0:Ue.gasEstimate)||"0x0",it=new s.default(st,16).times((null==Ue?void 0:Ue.gasMultiplier)||_.FALLBACK_GAS_MULTIPLIER,10).round(0).toString(16),lt=null!=Ue&&Ue.gasEstimate?it:`0x${(0,q.decimalToHex)((null==Ue?void 0:Ue.maxGas)||0)}`,ut=ve||lt;let ct,dt,pt;if(De){const{maxFeePerGas:e,maxPriorityFeePerGas:t,gasFeeEstimates:{estimatedBaseFee:a="0"}}=at;ct=ye||(0,q.decGWEIToHexWEI)(e),dt=be||(0,q.decGWEIToHexWEI)(t),pt=(0,q.addHexes)((0,q.decGWEIToHexWEI)(a),dt)}let mt=(0,U.calcGasTotal)(ut,ct||he);null!==ue&&(mt=(0,q.sumHexes)(mt||"0x0",ue||"0x0"));const{tokensWithBalances:ft}=(0,C.useTokenTracker)({tokens:Pe,includeFailedTokens:!0}),gt=nt===Be.address?Be:ft.find((({address:e})=>(0,L.isEqualCaseInsensitive)(e,nt))),Et=gt||Ue.sourceTokenInfo,Tt=(null==ft?void 0:ft.length)&&(0,U.calcTokenAmount)(Et.balance||"0x0",Et.decimals).toFixed(9),_t=ft&&gt===undefined,St=(0,F.parseStandardTokenTransactionData)(null==Le?void 0:Le.data),ht=St&&(0,j.getTokenValueParam)(St),vt=ht&&(null==Et?void 0:Et.decimals)!==undefined&&(0,U.calcTokenAmount)(ht,Et.decimals).toFixed(9),yt=null==Le?void 0:Le.gas,bt=(0,n.useMemo)((()=>(0,I.quotesToRenderableData)({quotes:_e,gasPrice:De?pt:he,conversionRate:Ce,currentCurrency:xe,approveGas:yt,tokenConversionRates:Ae,chainId:qe,smartTransactionEstimatedGas:$e&&Ke&&(null==ze?void 0:ze.tradeTxFees),nativeCurrencySymbol:He,multiLayerL1ApprovalFeeTotal:de})),[_e,he,pt,De,Ce,xe,yt,Ae,qe,null==ze?void 0:ze.tradeTxFees,He,$e,Ke,de]),kt=bt.find((e=>e.aggId===Ue.aggregator)),{destinationTokenDecimals:wt,destinationTokenSymbol:At,destinationTokenValue:It,destinationIconUrl:Ct,sourceTokenDecimals:Ot,sourceTokenSymbol:Nt,sourceTokenValue:xt,sourceTokenIconUrl:Pt}=kt;let{feeInFiat:Dt,feeInEth:Rt,rawEthFee:Mt,feeInUsd:Lt}=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:ot,approveGas:yt,gasPrice:De?pt:he,currentCurrency:xe,conversionRate:Ce,USDConversionRate:Oe,tradeValue:Ge,sourceSymbol:Nt,sourceAmount:Ue.sourceAmount,chainId:qe,nativeCurrencySymbol:He,multiLayerL1FeeTotal:ue});rt.reg_tx_fee_in_usd=Number(Lt),rt.reg_tx_fee_in_eth=Number(Mt);const Ft=(0,I.getRenderableNetworkFeesForQuote)({tradeGas:ut,approveGas:yt,gasPrice:ct||he,currentCurrency:xe,conversionRate:Ce,USDConversionRate:Oe,tradeValue:Ge,sourceSymbol:Nt,sourceAmount:Ue.sourceAmount,chainId:qe,nativeCurrencySymbol:He,multiLayerL1FeeTotal:ue});let{feeInFiat:jt,feeInEth:Ut,rawEthFee:Gt,feeInUsd:Wt}=Ft;if(rt.reg_tx_max_fee_in_usd=Number(Wt),rt.reg_tx_max_fee_in_eth=Number(Gt),Ze&&Ke&&null!=ze&&ze.tradeTxFees){var Bt;const e=(null==ze?void 0:ze.tradeTxFees.feeEstimate)+((null==ze||null===(Bt=ze.approvalTxFees)||void 0===Bt?void 0:Bt.feeEstimate)||0),t=e*Je.stxMaxFeeMultiplier;({feeInFiat:Dt,feeInEth:Rt,rawEthFee:Mt,feeInUsd:Lt}=(0,I.getFeeForSmartTransaction)({chainId:qe,currentCurrency:xe,conversionRate:Ce,USDConversionRate:Oe,nativeCurrencySymbol:He,feeInWeiDec:e})),rt.stx_fee_in_usd=Number(Lt),rt.stx_fee_in_eth=Number(Mt),rt.estimated_gas=null==ze?void 0:ze.tradeTxFees.gasLimit,({feeInFiat:jt,feeInEth:Ut,rawEthFee:Gt,feeInUsd:Wt}=(0,I.getFeeForSmartTransaction)({chainId:qe,currentCurrency:xe,conversionRate:Ce,USDConversionRate:Oe,nativeCurrencySymbol:He,feeInWeiDec:t})),rt.stx_max_fee_in_usd=Number(Wt),rt.stx_max_fee_in_eth=Number(Gt)}const qt=new s.default(Ue.sourceAmount),Ht=new s.default(Ue.trade.value||0,10).plus(new s.default(mt,16)),Vt=((null==ft?void 0:ft.length)||Re)&&qt.gt(new s.default(Et.balance||"0x0")),Kt=Ht.gt(new s.default(Ie||"0x0")),$t=Vt?(0,U.toPrecisionWithoutTrailingZeros)((0,U.calcTokenAmount)(qt,Et.decimals).minus(Tt).toString(10),6):null,Yt=Kt?(0,U.toPrecisionWithoutTrailingZeros)(Ht.minus(Ie,16).div("1000000000000000000",10).toString(10),6):null;let Qt;tt&&null!=Xe&&Xe.balanceNeededWei&&(Qt=(0,q.decWEIToDecETH)(Xe.balanceNeededWei-Xe.currentBalanceWei));const Xt=(0,r.useSelector)(_.getDestinationTokenInfo,i.isEqual);(0,n.useEffect)((()=>{tt?Vt?X((0,_.setBalanceError)(!0)):Re&&!Vt&&X((0,_.setBalanceError)(!1)):Vt||Kt?X((0,_.setBalanceError)(!0)):!Re||Vt||Kt||X((0,_.setBalanceError)(!1))}),[Vt,Kt,Re,X,tt]),(0,n.useEffect)((()=>{const e=Date.now()-Se;e>We&&!J?(ee(!0),X((0,v.safeRefetchQuotes)())):e>We&&(X((0,v.setSwapsErrorKey)(O.QUOTES_EXPIRED_ERROR)),Q.push(b.SWAPS_ERROR_ROUTE))}),[Se,J,X,Q,We]),(0,n.useEffect)((()=>{!ie&&vt&&le(vt)}),[ie,vt]);const zt=(!Ze||!Ke)&&Yt,Zt=tt&&Qt,Jt=(Re||$t||zt||Zt)&&!oe,ea=(0,r.useSelector)(S.isHardwareWallet),ta=(0,r.useSelector)(S.getHardwareWalletType),aa=Object.values(_e).length,na=(0,n.useRef)(),ra=(0,n.useMemo)((()=>({token_from:Nt,token_from_amount:xt,token_to:At,token_to_amount:It,request_type:null==Me?void 0:Me.balanceError,slippage:null==Me?void 0:Me.slippage,custom_slippage:2!==(null==Me?void 0:Me.slippage),response_time:null==Me?void 0:Me.responseTime,best_quote_source:null==je?void 0:je.aggregator,available_quotes:aa,is_hardware_wallet:ea,hardware_wallet_type:ta,stx_enabled:$e,current_stx_enabled:Ze,stx_user_opt_in:Ke})),[Nt,xt,At,It,null==Me?void 0:Me.balanceError,null==Me?void 0:Me.slippage,null==Me?void 0:Me.responseTime,null==je?void 0:je.aggregator,aa,ea,ta,$e,Ze,Ke]),oa=()=>{Z({event:"Edit Spend Limit Opened",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,custom_spend_limit_set:ie===vt,custom_spend_limit_amount:ie===vt?null:vt}})},sa=(0,n.useCallback)((()=>{Z({event:"Best Quote Reviewed",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,network_fees:Dt}})}),[Z,ra,Dt]),ia=(0,n.useCallback)((()=>{Z({event:"View Quote Page Loaded",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,response_time:me-Ve}})}),[Z,ra,me,Ve]);(0,n.useEffect)((()=>{!na.current&&[Nt,xt,At,It,Me,je,aa,Dt].every((e=>null!==e&&e!==undefined))&&(na.current=!0,sa())}),[Me,je,aa,Dt,At,It,Nt,xt,sa]);const la=Ue.fee,ua=_t?z("swapTokenBalanceUnavailable",[Nt]):z("swapApproveNeedMoreTokens",[n.default.createElement("span",{key:"swapApproveNeedMoreTokens-1",className:"view-quote__bold"},$t||Qt||Yt),$t&&Nt!==Be.symbol?Nt:Be.symbol]),ca=null==Ue||null===(t=Ue.priceSlippage)||void 0===t?void 0:t.bucket,da=(0,f.usePrevious)(ca);(0,n.useEffect)((()=>{fe&&da===N.GasRecommendations.medium&&ca===N.GasRecommendations.high&&ge(!1)}),[ca,fe,da]);let pa=null;const ma=(0,p.useEthFiatAmount)((null==Ue||null===(a=Ue.priceSlippage)||void 0===a?void 0:a.sourceAmountInETH)||0,{showFiat:!0}),fa=(0,p.useEthFiatAmount)((null==Ue||null===(V=Ue.priceSlippage)||void 0===V?void 0:V.destinationAmountInETH)||0,{showFiat:!0}),ga=!ma||!fa||Boolean(null==Ue||null===(K=Ue.priceSlippage)||void 0===K?void 0:K.calculationError);let Ea=0;null!=Ue&&null!==(Y=Ue.priceSlippage)&&void 0!==Y&&Y.ratio&&(Ea=parseFloat(new s.default(Ue.priceSlippage.ratio,10).minus(1,10).times(100,10).toFixed(2),10));const Ta=!_t&&!Jt&&Ue&&(Ee.includes(ca)||ga);Ta&&(pa=n.default.createElement(H.default,{usedQuote:Ue,sourceTokenValue:xt,destinationTokenValue:It,priceSlippageFromSource:ma,priceSlippageFromDestination:fa,priceDifferencePercentage:Ea,priceSlippageUnknownFiatValue:ga,onAcknowledgementClick:()=>{ge(!0)},acknowledged:fe}));const _a=Ta&&!fe,Sa=Jt||Ta,ha=Boolean(te||Re||_t||_a||De&&pt===undefined||!De&&(null===he||he===undefined)||Ze&&(Qe||Xe)||Ze&&Ke&&!(null!=ze&&ze.tradeTxFees));return(0,n.useEffect)((()=>{if(Ze&&Ke&&!Vt){const e={from:et.from,to:et.to,value:et.value,data:et.data,gas:et.gas,chainId:qe};$=setInterval((()=>{Ye||X((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:Le,fallbackOnNotEnoughFunds:!1}))}),Je.stxGetTransactionsRefreshTime),X((0,_.fetchSwapsSmartTransactionFees)({unsignedTransaction:e,approveTxParams:Le,fallbackOnNotEnoughFunds:!1}))}else $&&clearInterval($);return()=>clearInterval($)}),[X,Ze,Ke,et.data,et.from,et.value,et.gas,et.to,qe,Je.stxGetTransactionsRefreshTime,Vt]),(0,n.useEffect)((()=>{X((0,v.setSwapsQuotesPollingLimitEnabled)(!0)),Ve&&ia()}),[X,ia,Ve]),(0,n.useEffect)((()=>{!Ze&&Qe&&te&&ae(!1)}),[Ze,Qe,te]),(0,n.useEffect)((()=>{if(!Ne||null==Ue||!Ue.multiLayerL1TradeFeeTotal)return;(async()=>{try{let e="0x0";Le&&(e=await(0,B.default)(qe,{txParams:{...Le,gasPrice:(0,G.addHexPrefix)(Le.gasPrice),value:"0x0"}}),pe(e));const t=(0,q.sumHexes)(Ue.multiLayerL1TradeFeeTotal,e);ce(t)}catch(e){(0,u.captureException)(e),ce(null),pe(null)}})()}),[et,Le,Ne,qe,Ue]),(0,n.useEffect)((()=>{tt&&X({type:y.SET_SMART_TRANSACTIONS_ERROR,payload:null})}),[tt,X]),n.default.createElement("div",{className:"view-quote"},n.default.createElement("div",{className:(0,l.default)("view-quote__content",{"view-quote__content_modal":_a})},ne&&n.default.createElement(d.default,{quoteDataRows:bt,onClose:()=>re(!1),onSubmit:e=>X((0,_.swapsQuoteSelected)(e)),swapToSymbol:At,initialAggId:Ue.aggregator,onQuoteDetailsIsOpened:()=>{Z({event:"Quote Details Opened",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,other_quote_selected:(null==Ue?void 0:Ue.aggregator)!==(null==je?void 0:je.aggregator),other_quote_selected_source:(null==Ue?void 0:Ue.aggregator)===(null==je?void 0:je.aggregator)?null:null==Ue?void 0:Ue.aggregator}})},hideEstimatedGasFee:$e&&Ke}),n.default.createElement("div",{className:(0,l.default)("view-quote__warning-wrapper",{"view-quote__warning-wrapper--thin":!Sa})},pa,(Jt||_t)&&n.default.createElement(A.default,{message:ua,onClose:()=>se(!0)})),n.default.createElement("div",{className:"view-quote__countdown-timer-container"},n.default.createElement(x.default,{timeStarted:Se,warningTime:"0:10",labelKey:"swapNewQuoteIn"})),n.default.createElement(k.default,{sourceValue:(0,W.calcTokenValue)(xt,Ot),sourceDecimals:Ot,sourceSymbol:Nt,destinationValue:(0,W.calcTokenValue)(It,wt),destinationDecimals:wt,destinationSymbol:At,sourceIconUrl:Pt,destinationIconUrl:Ct}),Ze&&Ke&&!(null!=ze&&ze.tradeTxFees)&&!Jt&&n.default.createElement(R.default,{marginTop:0,marginBottom:10},n.default.createElement(D.default,null)),(!Ze||!Ke||(null==ze?void 0:ze.tradeTxFees))&&n.default.createElement("div",{className:(0,l.default)("view-quote__fee-card-container",{"view-quote__fee-card-container--three-rows":Le&&(!Re||oe)})},n.default.createElement(T.default,{primaryFee:{fee:Rt,maxFee:Ut},secondaryFee:{fee:Dt,maxFee:jt},hideTokenApprovalRow:!Le||Re&&!oe,tokenApprovalSourceTokenSymbol:Nt,onTokenApprovalClick:()=>{oa(),X((0,v.showModal)({name:"EDIT_APPROVAL_PERMISSION",decimals:Et.decimals,origin:"MetaMask",setCustomAmount:e=>{const t=""===e?ie:e,a=(0,w.getCustomTxParamsData)(Le.data,{customPermissionAmount:t,decimals:Et.decimals});null!=t&&t.length&&Le.data!==a&&X((0,v.setCustomApproveTxData)(a))},tokenAmount:ie,customTokenAmount:ie===vt?null:vt,tokenBalance:Tt,tokenSymbol:Et.symbol,requiredMinimum:(0,U.calcTokenAmount)(Ue.sourceAmount,Et.decimals)}))},metaMaskFee:String(la),numberOfQuotes:Object.values(_e).length,onQuotesClick:()=>{Z({event:"All Available Quotes Opened",category:M.MetaMetricsEventCategory.Swaps,sensitiveProperties:{...ra,other_quote_selected:(null==Ue?void 0:Ue.aggregator)!==(null==je?void 0:je.aggregator),other_quote_selected_source:(null==Ue?void 0:Ue.aggregator)===(null==je?void 0:je.aggregator)?null:null==Ue?void 0:Ue.aggregator}}),re(!0)},chainId:qe,maxPriorityFeePerGasDecGWEI:(0,q.hexWEIToDecGWEI)(dt),maxFeePerGasDecGWEI:(0,q.hexWEIToDecGWEI)(ct)}))),n.default.createElement(P.default,{onSubmit:()=>{ae(!0),Re?Xt.symbol===Be.symbol?Q.push(b.DEFAULT_ROUTE):Q.push(`${b.ASSET_ROUTE}/${Xt.address}`):Ze&&Ke&&null!=ze&&ze.tradeTxFees?X((0,_.signAndSendSwapsSmartTransaction)({unsignedTransaction:et,trackEvent:Z,history:Q,additionalTrackingParams:rt})):X((0,_.signAndSendTransactions)(Q,Z,rt))},submitText:z(Ze&&Ke&&Ye?"preparingSwap":"swap"),hideCancel:!0,disabled:ha,className:Sa?"view-quote__thin-swaps-footer":"",showTopBorder:!0}))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=K(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=V(e("bignumber.js")),i=e("lodash"),l=V(e("classnames")),u=e("@sentry/browser"),c=e("../../../contexts/i18n"),d=V(e("../select-quote-popover")),p=e("../../../hooks/useEthFiatAmount"),m=e("../../../hooks/useEqualityCheck"),f=e("../../../hooks/usePrevious"),g=e("../../../hooks/gasFeeInput/useGasFeeInputs"),E=e("../../../contexts/metametrics"),T=V(e("../fee-card")),_=e("../../../ducks/swaps/swaps"),S=e("../../../selectors"),h=e("../../../ducks/metamask/metamask"),v=e("../../../store/actions"),y=e("../../../store/actionConstants"),b=e("../../../helpers/constants/routes"),k=V(e("../main-quote-summary")),w=e("../../confirm-approve/confirm-approve.util"),A=V(e("../../../components/ui/actionable-message/actionable-message")),I=e("../swaps.util"),C=e("../../../hooks/useTokenTracker"),O=e("../../../../shared/constants/swaps"),N=e("../../../../shared/constants/gas"),x=V(e("../countdown-timer")),P=V(e("../swaps-footer")),D=V(e("../../../components/ui/pulse-loader")),R=V(e("../../../components/ui/box")),M=e("../../../../shared/constants/metametrics"),L=e("../../../../shared/modules/string-utils"),F=e("../../../../shared/modules/transaction.utils"),j=e("../../../../shared/lib/metamask-controller-utils"),U=e("../../../../shared/lib/transactions-controller-utils"),G=e("../../../../app/scripts/lib/util"),W=e("../../../../shared/lib/swaps-utils"),B=V(e("../../../helpers/utils/optimism/fetchEstimatedL1Fee")),q=e("../../../../shared/modules/conversion.utils"),H=V(e("./view-quote-price-difference"));function V(e){return e&&e.__esModule?e:{default:e}}function K(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(K=function(e){return e?a:t})(e)}let $}}},{package:"$root$",file:"ui/pages/swaps/view-quote/view-quote.js"}],[5325,{"../../../shared/constants/network":4078,"../../../shared/constants/tokens":4089,"../../../shared/lib/transactions-controller-utils":4099,"../../../shared/modules/security-provider.utils":4117,"../../components/app/approve-content-card/approve-content-card":4157,"../../components/app/confirm-page-container":4183,"../../components/app/confirm-page-container/confirm-page-container-content":4177,"../../components/app/custom-nonce":4219,"../../components/app/custom-spending-cap/custom-spending-cap":4221,"../../components/app/fee-details-component/fee-details-component":4250,"../../components/app/ledger-instruction-field/ledger-instruction-field":4270,"../../components/app/modals/contract-details-modal/contract-details-modal":4293,"../../components/app/network-account-balance-header/network-account-balance-header":4332,"../../components/app/security-provider-banner-alert/blockaid-banner-alert/blockaid-banner-alert":4373,"../../components/app/security-provider-banner-message/security-provider-banner-message":4377,"../../components/component-library":4582,"../../components/ui/box/box":4748,"../../components/ui/button":4753,"../../components/ui/contract-token-values/contract-token-values":4765,"../../components/ui/dialog":4771,"../../components/ui/page-container":4834,"../../components/ui/review-spending-cap/review-spending-cap":4847,"../../components/ui/simulation-error-message":4853,"../../components/ui/url-icon/url-icon":4888,"../../contexts/gasFee":4889,"../../contexts/i18n":4890,"../../ducks/app/app":4897,"../../ducks/confirm-transaction/confirm-transaction.duck":4898,"../../ducks/history/history":4903,"../../helpers/constants/design-system":4914,"../../helpers/utils/util":4956,"../../hooks/useSimulationFailureWarning":4998,"../../selectors":5338,"../../store/actions":5345,"../confirm-approve/confirm-approve.util":5028,"bignumber.js":2364,"prop-types":3583,react:3799,"react-redux":3764,"react-router-dom":3784},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=K;var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=H(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=q(e("prop-types")),i=q(e("bignumber.js")),l=q(e("../../components/ui/box/box")),u=q(e("../../components/app/network-account-balance-header/network-account-balance-header")),c=q(e("../../components/ui/url-icon/url-icon")),d=e("../../helpers/constants/design-system"),p=e("../../contexts/i18n"),m=q(e("../../components/ui/contract-token-values/contract-token-values")),f=q(e("../../components/ui/button")),g=q(e("../../components/ui/review-spending-cap/review-spending-cap")),E=e("../../components/ui/page-container"),T=q(e("../../components/app/modals/contract-details-modal/contract-details-modal")),_=e("../../selectors"),S=e("../../../shared/constants/network"),h=e("../../store/actions"),v=e("../../ducks/confirm-transaction/confirm-transaction.duck"),y=e("../../ducks/history/history"),b=q(e("../../components/app/approve-content-card/approve-content-card")),k=q(e("../../components/app/custom-spending-cap/custom-spending-cap")),w=q(e("../../components/ui/dialog")),A=e("../../contexts/gasFee"),I=e("../confirm-approve/confirm-approve.util"),C=e("../../ducks/app/app"),O=e("../../helpers/utils/util"),N=e("../../../shared/lib/transactions-controller-utils"),x=e("../../../shared/constants/tokens"),P=e("../../../shared/modules/security-provider.utils"),D=q(e("../../components/app/security-provider-banner-alert/blockaid-banner-alert/blockaid-banner-alert")),R=e("../../components/app/confirm-page-container"),M=e("../../hooks/useSimulationFailureWarning"),L=q(e("../../components/ui/simulation-error-message")),F=q(e("../../components/app/ledger-instruction-field/ledger-instruction-field")),j=q(e("../../components/app/security-provider-banner-message/security-provider-banner-message")),U=e("../../components/component-library"),G=e("../../components/app/confirm-page-container/confirm-page-container-content"),W=q(e("../../components/app/custom-nonce")),B=q(e("../../components/app/fee-details-component/fee-details-component"));function q(e){return e&&e.__esModule?e:{default:e}}function H(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(H=function(e){return e?a:t})(e)}const V=["portfolio.metamask.io"];function K({origin:e,siteImage:t,showCustomizeGasModal:a,useNonceField:s,currentCurrency:q,nativeCurrency:H,ethTransactionTotal:K,fiatTransactionTotal:$,hexTransactionTotal:Y,hexMinimumTransactionFee:Q,txData:X,isMultiLayerFeeNetwork:z,supportsEIP1559:Z,userAddress:J,tokenAddress:ee,data:te,isSetApproveForAll:ae,isApprovalOrRejection:ne,decimals:re,dappProposedTokenAmount:oe,currentTokenBalance:se,toAddress:ie,tokenSymbol:le,fromAddressIsLedger:ue,warning:ce}){const de=(0,n.useContext)(p.I18nContext),pe=(0,r.useDispatch)(),me=(0,o.useHistory)(),fe=(0,r.useSelector)(y.getMostRecentOverviewPage),{hostname:ge}=new URL(e),Ee=V.includes(ge),Te=(0,r.useSelector)(_.getCustomTokenAmount),[_e,Se]=(0,n.useState)(Te),[he,ve]=(0,n.useState)(!1),[ye,be]=(0,n.useState)(!1),[ke,we]=(0,n.useState)(!1),[Ae,Ie]=(0,n.useState)("0"!==oe&&!Ee),[Ce,Oe]=(0,n.useState)(""),[Ne,xe]=(0,n.useState)(!1),Pe=(0,M.useSimulationFailureWarning)(Ne),De=(0,r.useSelector)((e=>(0,_.getTargetAccountWithSendEtherInfo)(e,J))),Re=(0,r.useSelector)(_.getNetworkIdentifier),Me=(0,r.useSelector)(_.getRpcPrefsForCurrentProvider),Le=(0,r.useSelector)(_.getUnapprovedTxCount),Fe=(0,r.useSelector)(_.getUnapprovedTransactions),je=(0,r.useSelector)(_.getUseCurrencyRateCheck),Ue=(0,r.useSelector)(_.getNextSuggestedNonce),Ge=(0,r.useSelector)(_.getCustomNonceValue);(0,n.useEffect)((()=>{_e&&""!==_e||!oe||Se(oe)}),[]);const We=e=>e.replace(/,/gu,".");let Be=x.NUM_W_OPT_DECIMAL_COMMA_OR_DOT_REGEX.test(_e)?We(_e).toString():"0";const qe=(0,N.calcTokenAmount)(x.MAX_TOKEN_ALLOWANCE_AMOUNT,re);if(_e.length>1&&Number(_e)){new i.default(_e).greaterThan(qe)&&(Be=0)}const He=Be?(0,I.getCustomTxParamsData)(te,{customPermissionAmount:Be,decimals:re}):null;let Ve={...X};He&&(Ve={...Ve,txParams:{...Ve.txParams,data:He}});const Ke=(0,r.useSelector)((e=>(0,_.transactionFeeSelector)(e,Ve))),$e=(0,r.useSelector)((e=>(0,_.getKnownMethodData)(e,te))),{balanceError:Ye}=(0,A.useGasFeeContext)(),Qe=Ae&&(""===_e||""!==Ce),Xe=!Ae&&Ye,ze=S.NETWORK_TO_NAME_MAP[Ve.chainId]||Re,Ze=()=>{const{name:e}=$e;var t;Ke.gasEstimationObject.baseFeePerGas&&(Ve.estimatedBaseFee=Ke.gasEstimationObject.baseFeePerGas),e&&(Ve.contractMethodName=e),oe&&(Ve.dappProposedTokenAmount=oe,Ve.originalApprovalAmount=oe),_e?(Ve.customTokenAmount=_e,Ve.finalApprovalAmount=_e):oe!==undefined&&(Ve.finalApprovalAmount=oe),se&&(Ve.currentTokenBalance=se),pe((0,h.updateCustomNonce)("")),pe((0,h.updateAndApproveTx)((t=Ve,Ge?{...t,customNonceValue:Ge}:t))).then((()=>{pe((0,v.clearConfirmTransaction)()),me.push(fe)}))},Je=()=>{we(!1),Ie(!0)},et=(0,n.useCallback)((()=>{pe((0,h.getNextNonce)())}),[h.getNextNonce,pe]);(0,n.useEffect)((()=>{pe((0,h.getNextNonce)())}),[h.getNextNonce,pe]);const tt=e=>{pe((0,h.updateCustomNonce)(e))},at=""===_e,nt=n.default.createElement(l.default,{marginTop:4,key:ee},n.default.createElement(m.default,{tokenName:le,address:ee,chainId:Ve.chainId,rpcPrefs:Me}));return n.default.createElement(l.default,{className:"token-allowance-container page-container"},n.default.createElement(l.default,null,n.default.createElement(R.ConfirmPageContainerNavigation,null)),n.default.createElement(l.default,{paddingLeft:4,paddingRight:4,alignItems:d.AlignItems.center,display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.spaceBetween},n.default.createElement(l.default,null,!Ae&&n.default.createElement(f.default,{type:"inline",onClick:()=>Je()},n.default.createElement(U.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textMuted,fontWeight:d.FontWeight.Bold},"<"," ",de("back")))),n.default.createElement(l.default,{textAlign:d.TextAlign.End},n.default.createElement(U.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textMuted,fontWeight:d.FontWeight.Bold},Ae?1:2," ",de("ofTextNofM")," 2"))),n.default.createElement(u.default,{networkName:ze,accountName:De.name,accountBalance:se,tokenName:le,accountAddress:J,chainId:Ve.chainId}),n.default.createElement(D.default,{txData:X,margin:4}),(0,P.isSuspiciousResponse)(null==X?void 0:X.securityProviderResponse)&&n.default.createElement(j.default,{securityProviderResponse:X.securityProviderResponse}),ce&&n.default.createElement(l.default,{className:"token-allowance-container__custom-nonce-warning"},n.default.createElement(G.ConfirmPageContainerWarning,{warning:ce})),n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(l.default,{display:d.DISPLAY.FLEX,alignItems:d.AlignItems.center,marginTop:6,marginRight:12,marginBottom:8,marginLeft:12,paddingTop:2,paddingRight:4,paddingBottom:2,paddingLeft:2,borderColor:d.Color.borderMuted,borderStyle:d.BorderStyle.solid,borderWidth:1,className:"token-allowance-container__icon-display-content"},n.default.createElement(c.default,{className:"token-allowance-container__icon-display-content__siteimage-identicon",fallbackClassName:"token-allowance-container__icon-display-content__siteimage-identicon",name:e,url:t}),n.default.createElement(U.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.textAlternative,marginLeft:1},e))),n.default.createElement(l.default,{marginLeft:4,marginRight:4},n.default.createElement(U.Text,{variant:d.TextVariant.headingMd,align:d.TextAlign.Center},Ae?de("spendingCapRequest",[nt]):n.default.createElement(l.default,null,de("0"===_e||at?"revokeSpendingCap":"spendingCapRequest",[nt])))),n.default.createElement(l.default,{marginTop:1,display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(f.default,{type:"link",onClick:()=>ve(!0),className:"token-allowance-container__verify-link"},n.default.createElement(U.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.Color.primaryDefault},de("verifyContractDetails")))),n.default.createElement(l.default,{margin:[4,4,3,4]},Ae?n.default.createElement(k.default,{txParams:null==X?void 0:X.txParams,tokenName:le,currentTokenBalance:se,dappProposedValue:oe,siteOrigin:e,passTheErrorText:e=>Oe(e),decimals:re,setInputChangeInProgress:be,customSpendingCap:_e,setCustomSpendingCap:Se}):n.default.createElement(g.default,{tokenName:le,currentTokenBalance:se,tokenValue:isNaN(parseFloat(_e))?oe:We(_e),onEdit:()=>Je()})),!Ae&&Ye&&n.default.createElement(w.default,{type:"error",className:"send__error-dialog"},de("insufficientFundsForGas")),!Ae&&n.default.createElement(l.default,{className:"token-allowance-container__card-wrapper"},Pe&&n.default.createElement(l.default,{paddingTop:0,paddingRight:4,paddingBottom:4,paddingLeft:4},n.default.createElement(L.default,{userAcknowledgedGasMissing:Ne,setUserAcknowledgedGasMissing:()=>xe(!0)})),n.default.createElement(b.default,{symbol:n.default.createElement(U.Icon,{name:U.IconName.Tag}),title:de("transactionFee"),showEdit:!0,showAdvanceGasFeeOptions:!0,onEditClick:a,renderTransactionDetailsContent:!0,noBorder:s||!ke,supportsEIP1559:Z,isMultiLayerFeeNetwork:z,ethTransactionTotal:K,nativeCurrency:H,fullTxData:Ve,userAcknowledgedGasMissing:Ne,renderSimulationFailureWarning:Pe,hexTransactionTotal:Y,hexMinimumTransactionFee:Q,fiatTransactionTotal:$,currentCurrency:q,useCurrencyRateCheck:je})),n.default.createElement(l.default,{marginRight:4,marginLeft:4},n.default.createElement(B.default,{useCurrencyRateCheck:je,txData:X,hideGasDetails:Ae})),s&&n.default.createElement(l.default,{marginTop:4,marginRight:4,marginLeft:4},n.default.createElement(W.default,{nextNonce:Ue,customNonceValue:Ge,showCustomizeNonceModal:()=>((e,t,a,n,r)=>{pe((0,h.showModal)({name:"CUSTOMIZE_NONCE",useNonceField:e,nextNonce:t,customNonceValue:a,updateCustomNonce:n,getNextNonce:r}))})(s,Ue,Ge,tt,et)})),n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.ROW,justifyContent:d.JustifyContent.center},n.default.createElement(f.default,{type:"link",onClick:()=>we(!ke),className:"token-allowance-container__view-details"},n.default.createElement(U.Text,{variant:d.TextVariant.bodySm,as:"h6",color:d.TextColor.primaryDefault,marginRight:1},de("viewDetails")),ke?n.default.createElement("i",{className:"fa fa-sm fa-angle-up"}):n.default.createElement("i",{className:"fa fa-sm fa-angle-down"}))),ke?n.default.createElement(l.default,{display:d.DISPLAY.FLEX,flexDirection:d.FLEX_DIRECTION.COLUMN,alignItems:d.AlignItems.center,className:"token-allowance-container__full-tx-content"},n.default.createElement(l.default,{className:"token-allowance-container__data"},n.default.createElement(b.default,{symbol:n.default.createElement("i",{className:"fa fa-file"}),title:de("data"),renderDataContent:!0,noBorder:!0,supportsEIP1559:Z,isSetApproveForAll:ae,fullTxData:Ve,userAcknowledgedGasMissing:Ne,renderSimulationFailureWarning:Pe,isApprovalOrRejection:ne,data:He||te,useCurrencyRateCheck:je,hexMinimumTransactionFee:Q}))):null,!Ae&&ue&&n.default.createElement(l.default,{paddingLeft:2,paddingRight:2},n.default.createElement(F.default,{showDataInstruction:!0})),n.default.createElement(E.PageContainerFooter,{cancelText:de("reject"),submitText:de(Ae?"next":"approveButtonText"),onCancel:()=>(pe((0,h.updateCustomNonce)("")),pe((0,C.setCustomTokenAmount)("")),void pe((0,h.cancelTx)(Ve)).then((()=>{pe((0,v.clearConfirmTransaction)()),me.push(fe)}))),onSubmit:()=>Ae?(we(!1),void Ie(!1)):Ze(),disabled:ye||Qe||Xe},Le>1&&n.default.createElement(f.default,{type:"link",onClick:e=>{e.preventDefault(),pe((0,h.showModal)({name:"REJECT_TRANSACTIONS",unapprovedTxCount:Le,onSubmit:async()=>{await pe((0,h.cancelTxs)((0,O.valuesFor)(Fe))),pe((0,v.clearConfirmTransaction)()),me.push(fe)}}))}},de("rejectTxsN",[Le]))),he&&n.default.createElement(T.default,{tokenName:le,onClose:()=>ve(!1),tokenAddress:ee,toAddress:ie,chainId:Ve.chainId,rpcPrefs:Me}))}K.propTypes={origin:s.default.string,siteImage:s.default.string,showCustomizeGasModal:s.default.func,useNonceField:s.default.bool,currentCurrency:s.default.string,nativeCurrency:s.default.string,ethTransactionTotal:s.default.string,fiatTransactionTotal:s.default.string,hexTransactionTotal:s.default.string,hexMinimumTransactionFee:s.default.string,txData:s.default.object,isMultiLayerFeeNetwork:s.default.bool,supportsEIP1559:s.default.bool,userAddress:s.default.string,tokenAddress:s.default.string,data:s.default.string,isSetApproveForAll:s.default.bool,isApprovalOrRejection:s.default.bool,decimals:s.default.string,dappProposedTokenAmount:s.default.string,currentTokenBalance:s.default.string,toAddress:s.default.string,tokenSymbol:s.default.string,fromAddressIsLedger:s.default.bool,warning:s.default.string}}}},{package:"$root$",file:"ui/pages/token-allowance/token-allowance.js"}],[5326,{"./token-details-page":5327},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"default",{enumerable:!0,get:function(){return r.default}});var n,r=(n=e("./token-details-page"))&&n.__esModule?n:{default:n}}}},{package:"$root$",file:"ui/pages/token-details/index.js"}],[5327,{"../../../shared/constants/network":4078,"../../../shared/modules/string-utils":4119,"../../components/component-library":4582,"../../components/ui/box":4749,"../../components/ui/button":4753,"../../components/ui/identicon":4806,"../../components/ui/tooltip":4878,"../../contexts/i18n":4890,"../../ducks/metamask/metamask":4906,"../../helpers/constants/design-system":4914,"../../helpers/constants/routes":4919,"../../hooks/useCopyToClipboard":4975,"../../hooks/useTokenFiatAmount":5004,"../../hooks/useTokenTracker":5005,"../../selectors":5338,"../../store/actions":5345,react:3799,"react-redux":3764,"react-router-dom":3784},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(){var e,t;const a=(0,r.useDispatch)(),y=(0,o.useHistory)(),b=(0,n.useContext)(c.I18nContext),k=(0,r.useSelector)(s.getTokens),w=(0,r.useSelector)(i.getTokenList),{address:A}=(0,o.useParams)(),I=w[A.toLowerCase()],C=null==I||null===(e=I.aggregators)||void 0===e?void 0:e.join(", "),O=k.find((({address:e})=>(0,h.isEqualCaseInsensitive)(e,A))),{tokensWithBalances:N}=(0,d.useTokenTracker)({tokens:O?[O]:[]}),x=null===(t=N[0])||void 0===t?void 0:t.string,P=(0,p.useTokenFiatAmount)(null==O?void 0:O.address,x,null==O?void 0:O.symbol),{nickname:D,type:R}=(0,r.useSelector)(s.getProviderConfig),[M,L]=(0,l.useCopyToClipboard)();if(!O)return n.default.createElement(o.Redirect,{to:{pathname:g.DEFAULT_ROUTE}});return n.default.createElement(_.default,{className:"page-container token-details"},n.default.createElement(_.default,{marginLeft:5,marginRight:6},n.default.createElement(v.Text,{fontWeight:S.FontWeight.Bold,margin:0,marginTop:4,variant:S.TextVariant.bodySm,as:"h6",color:S.TextColor.textDefault,className:"token-details__title"},b("tokenDetails"),n.default.createElement(T.default,{type:"link",onClick:()=>y.push(`${g.ASSET_ROUTE}/${O.address}`),className:"token-details__closeButton"})),n.default.createElement(_.default,{display:S.DISPLAY.FLEX,marginTop:4},n.default.createElement(v.Text,{align:S.TextAlign.Center,fontWeight:S.FontWeight.Bold,margin:0,marginRight:5,variant:S.TextVariant.headingSm,as:"h4",color:S.TextColor.textDefault,className:"token-details__token-value"},x||""),n.default.createElement(_.default,{marginTop:1},n.default.createElement(u.default,{diameter:32,address:O.address,image:I?I.iconUrl:O.image}))),n.default.createElement(v.Text,{margin:0,marginTop:4,variant:S.TextVariant.bodySm,as:"h6",color:S.TextColor.textAlternative},P||""),n.default.createElement(v.Text,{margin:0,marginTop:6,variant:S.TextVariant.bodyXs,as:"h6",color:S.TextColor.textAlternative,fontWeight:S.FontWeight.Bold},b("tokenContractAddress")),n.default.createElement(_.default,{display:S.DISPLAY.FLEX},n.default.createElement(v.Text,{variant:S.TextVariant.bodySm,as:"h6",margin:0,marginTop:2,color:S.TextColor.textDefault,overflowWrap:S.OverflowWrap.BreakWord,className:"token-details__token-address"},O.address),n.default.createElement(E.default,{position:"bottom",title:b(M?"copiedExclamation":"copyToClipboard"),containerClassName:"token-details__copy-icon"},n.default.createElement(v.ButtonIcon,{ariaLabel:"copy",name:M?v.IconName.CopySuccess:v.IconName.Copy,className:"token-details__copyIcon",onClick:()=>L(O.address),color:S.IconColor.primaryDefault,size:v.ButtonIconSize.Sm}))),n.default.createElement(v.Text,{variant:S.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:S.TextColor.textAlternative,fontWeight:S.FontWeight.Bold},b("tokenDecimalTitle")),n.default.createElement(v.Text,{variant:S.TextVariant.bodySm,as:"h6",margin:0,marginTop:1,color:S.TextColor.textDefault},O.decimals),n.default.createElement(v.Text,{variant:S.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:S.TextColor.textAlternative,fontWeight:S.FontWeight.Bold},b("network")),n.default.createElement(v.Text,{variant:S.TextVariant.bodySm,as:"h6",margin:1,marginTop:0,color:S.TextColor.textDefault},R===f.NETWORK_TYPES.RPC?D??b("privateNetwork"):b(R)),C&&n.default.createElement(n.default.Fragment,null,n.default.createElement(v.Text,{variant:S.TextVariant.bodyXs,as:"h6",margin:0,marginTop:4,color:S.TextColor.textAlternative,fontWeight:S.FontWeight.Bold},b("tokenList")),n.default.createElement(v.Text,{variant:S.TextVariant.bodySm,as:"h6",margin:0,marginTop:1,color:S.TextColor.textDefault},`${C}.`)),n.default.createElement(T.default,{type:"secondary",className:"token-details__hide-token-button",onClick:()=>{a((0,m.showModal)({name:"HIDE_TOKEN_CONFIRMATION",token:O,history:y}))}},n.default.createElement(v.Text,{variant:S.TextVariant.bodySm,as:"h6",color:S.TextColor.primaryDefault},b("hideToken")))))};var n=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=b(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),r=e("react-redux"),o=e("react-router-dom"),s=e("../../ducks/metamask/metamask"),i=e("../../selectors"),l=e("../../hooks/useCopyToClipboard"),u=y(e("../../components/ui/identicon")),c=e("../../contexts/i18n"),d=e("../../hooks/useTokenTracker"),p=e("../../hooks/useTokenFiatAmount"),m=e("../../store/actions"),f=e("../../../shared/constants/network"),g=e("../../helpers/constants/routes"),E=y(e("../../components/ui/tooltip")),T=y(e("../../components/ui/button")),_=y(e("../../components/ui/box")),S=e("../../helpers/constants/design-system"),h=e("../../../shared/modules/string-utils"),v=e("../../components/component-library");function y(e){return e&&e.__esModule?e:{default:e}}function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(b=function(e){return e?a:t})(e)}}}},{package:"$root$",file:"ui/pages/token-details/token-details-page.js"}],[5328,{"./unlock-page.container":5330},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,r=(n=e("./unlock-page.container"))&&n.__esModule?n:{default:n};a.default=r.default}}},{package:"$root$",file:"ui/pages/unlock-page/index.js"}],[5329,{"../../../shared/constants/metametrics":4077,"../../../shared/lib/ui-utils":4100,"../../components/ui/button":4753,"../../components/ui/mascot":4821,"../../components/ui/text-field":4867,"../../helpers/constants/routes":4919,"../../helpers/utils/build-types":4936,"./unlock-page.util":5331,events:2875,"prop-types":3583,react:3799},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e("events"),r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var a=g(t);if(a&&a.has(e))return a.get(e);var n={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,a&&a.set(e,n),n}(e("react")),o=f(e("prop-types")),s=f(e("../../components/ui/button")),i=f(e("../../components/ui/text-field")),l=f(e("../../components/ui/mascot")),u=e("../../helpers/constants/routes"),c=e("../../../shared/constants/metametrics"),d=e("../../../shared/lib/ui-utils"),p=e("../../helpers/utils/build-types"),m=e("./unlock-page.util");function f(e){return e&&e.__esModule?e:{default:e}}function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,a=new WeakMap;return(g=function(e){return e?a:t})(e)}function E(e,t,a){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var a=e[Symbol.toPrimitive];if(a!==undefined){var n=a.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class T extends r.Component{constructor(...e){super(...e),E(this,"state",{password:"",error:null}),E(this,"submitting",!1),E(this,"failed_attempts",0),E(this,"animationEventEmitter",new n.EventEmitter),E(this,"handleSubmit",(async e=>{e.preventDefault(),e.stopPropagation();const{password:t}=this.state,{onSubmit:a,forceUpdateMetamaskState:n}=this.props;if(""!==t&&!this.submitting){this.setState({error:null}),this.submitting=!0;try{await a(t),this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.AppUnlocked,properties:{failed_attempts:this.failed_attempts}},{isNewVisit:!0})}catch({message:e}){this.failed_attempts+=1,"Incorrect password"===e&&(await n(),this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.AppUnlockedFailed,properties:{reason:"incorrect_password",failed_attempts:this.failed_attempts}})),this.setState({error:e}),this.submitting=!1}}}))}UNSAFE_componentWillMount(){const{isUnlocked:e,history:t}=this.props;e&&t.push(u.DEFAULT_ROUTE)}handleInputChange({target:e}){if(this.setState({password:e.value,error:null}),e.getBoundingClientRect){const t=e,a=t.getBoundingClientRect(),n=(0,m.getCaretCoordinates)(t,t.selectionEnd);this.animationEventEmitter.emit("point",{x:a.left+n.left-t.scrollLeft,y:a.top+n.top-t.scrollTop})}}renderSubmitButton(){return r.default.createElement(s.default,{type:"submit","data-testid":"unlock-submit",style:{backgroundColor:"var(--color-primary-default)",color:"var(--color-primary-inverse)",marginTop:"20px",height:"60px",fontWeight:"400",boxShadow:"none",borderRadius:"100px"},disabled:!this.state.password,variant:"contained",size:"large",onClick:this.handleSubmit},this.context.t("unlock"))}render(){const{password:e,error:t}=this.state,{t:a}=this.context,{onRestore:n}=this.props;let o=a("appNameMmi");return o=a("needHelpLinkText"),r.default.createElement("div",{className:"unlock-page__container"},r.default.createElement("div",{className:"unlock-page","data-testid":"unlock-page"},r.default.createElement("div",{className:"unlock-page__mascot-container"},r.default.createElement(l.default,{animationEventEmitter:this.animationEventEmitter,width:"120",height:"120"}),(0,p.isBeta)()?r.default.createElement("div",{className:"unlock-page__mascot-container__beta"},a("beta")):null),r.default.createElement("h1",{className:"unlock-page__title"},a("welcomeBack")),r.default.createElement("div",null,a("unlockMessage")),r.default.createElement("form",{className:"unlock-page__form",onSubmit:this.handleSubmit},r.default.createElement(i.default,{id:"password","data-testid":"unlock-password",label:a("password"),type:"password",value:e,onChange:e=>this.handleInputChange(e),error:t,autoFocus:!0,autoComplete:"current-password",theme:"material",fullWidth:!0})),this.renderSubmitButton(),r.default.createElement("div",{className:"unlock-page__links"},r.default.createElement(s.default,{type:"link",key:"import-account",className:"unlock-page__link",onClick:()=>n()},a("forgotPassword"))),r.default.createElement("div",{className:"unlock-page__support"},a("needHelp",[r.default.createElement("a",{href:d.SUPPORT_LINK,target:"_blank",rel:"noopener noreferrer",key:"need-help-link",onClick:()=>{this.context.trackEvent({category:c.MetaMetricsEventCategory.Navigation,event:c.MetaMetricsEventName.SupportLinkClicked,properties:{url:d.SUPPORT_LINK}},{contextPropsIntoEventProperties:[c.MetaMetricsContextProp.PageTitle]})}},o)]))))}}a.default=T,E(T,"contextTypes",{trackEvent:o.default.func,t:o.default.func}),E(T,"propTypes",{history:o.default.object.isRequired,isUnlocked:o.default.bool,onRestore:o.default.func,onSubmit:o.default.func,forceUpdateMetamaskState:o.default.func})}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.component.js"}],[5330,{"../../../app/scripts/lib/util":90,"../../../shared/constants/app":4067,"../../helpers/constants/routes":4919,"../../store/actions":5345,"./unlock-page.component":5329,"react-redux":3764,"react-router-dom":3784,redux:3829},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n,r=e("react-redux"),o=e("react-router-dom"),s=e("redux"),i=e("../../../app/scripts/lib/util"),l=e("../../../shared/constants/app"),u=e("../../helpers/constants/routes"),c=e("../../store/actions"),d=(n=e("./unlock-page.component"))&&n.__esModule?n:{default:n};a.default=(0,s.compose)(o.withRouter,(0,r.connect)((e=>{const{metamask:{isUnlocked:t}}=e;return{isUnlocked:t}}),(e=>({tryUnlockMetamask:t=>e((0,c.tryUnlockMetamask)(t)),markPasswordForgotten:()=>e((0,c.markPasswordForgotten)()),forceUpdateMetamaskState:()=>(0,c.forceUpdateMetamaskState)(e)})),((e,t,a)=>{const{markPasswordForgotten:n,tryUnlockMetamask:r,...o}=t,{history:s,onSubmit:c,...d}=a;return{...e,...o,...d,onRestore:async()=>{await n(),s.push(u.RESTORE_VAULT_ROUTE),(0,i.getEnvironmentType)()===l.ENVIRONMENT_TYPE_POPUP&&global.platform.openExtensionInBrowser(u.RESTORE_VAULT_ROUTE)},onSubmit:c||(async e=>{await r(e),s.push(u.DEFAULT_ROUTE)}),history:s}})))(d.default)}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.container.js"}],[5331,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getCaretCoordinates=function(e,t){const a=document.createElement("div");a.id="password-mirror-div",document.body.appendChild(a);const n=window.getComputedStyle(e);a.textContent=new Array(t+1).join("");const r=document.createElement("span");r.textContent="",a.appendChild(r);const o={top:r.offsetTop+parseInt(n.borderTopWidth,10),left:r.offsetLeft+parseInt(n.borderLeftWidth,10)};return document.body.removeChild(a),o}}}},{package:"$root$",file:"ui/pages/unlock-page/unlock-page.util.js"}],[5332,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){function n(e){return e.metamask.userOperations||{}}function r(e){var t;const a=null===(t=e.confirmTransaction)||void 0===t?void 0:t.txData;if(!a)return undefined;const{id:r,isUserOperation:o}=a;if(!o)return undefined;return n(e)[r]}Object.defineProperty(a,"__esModule",{value:!0}),a.getIsUsingPaymaster=function(e){var t;const a=r(e);if(!a)return!1;const n=null===(t=a.userOperation)||void 0===t?void 0:t.paymasterAndData;return Boolean(null==n?void 0:n.length)&&"0x"!==n},a.getUserOperation=r,a.getUserOperations=n}}},{package:"$root$",file:"ui/selectors/account-abstraction.ts"}],[5333,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getApprovalFlows=function(e){return e.metamask.approvalFlows},a.getApprovalRequestsByType=void 0,a.getPendingApprovals=function(e){return Object.values(e.metamask.pendingApprovals)},a.hasPendingApprovals=function(e,t,a){const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>t.includes(e)));if(a)return n.some(a);return n.length>0};a.getApprovalRequestsByType=(e,t,a)=>{const n=Object.values(e.metamask.pendingApprovals).filter((({type:e})=>e===t));return a?n.filter(a):n}}}},{package:"$root$",file:"ui/selectors/approvals.ts"}],[5334,{".":5338,"../../shared/constants/gas":4072,"../../shared/lib/transactions-controller-utils":4099,"../../shared/modules/conversion.utils":4105,"../../shared/modules/gas.utils":4109,"../../shared/modules/string-utils":4119,"../ducks/metamask/metamask":4906,"../helpers/utils/confirm-tx.util":4938,"../helpers/utils/tx-helper":4955,"./custom-gas":5336,"./selectors":5341,"@metamask/transaction-controller":1753,reselect:3838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.use4ByteResolutionSelector=a.unconfirmedTransactionsListSelector=a.unconfirmedTransactionsHashSelector=a.unconfirmedMessagesHashSelector=a.txDataSelector=a.transactionFeeSelector=a.tokenAddressSelector=a.sendTokenTokenAmountAndToAddressSelector=a.currentCurrencySelector=a.conversionRateSelector=a.contractExchangeRateSelector=void 0;var n,r=e("reselect"),o=e("@metamask/transaction-controller"),s=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},i=e("../helpers/utils/confirm-tx.util"),l=e("../ducks/metamask/metamask"),u=e("../../shared/constants/gas"),c=e("../../shared/modules/gas.utils"),d=e("../../shared/modules/string-utils"),p=e("../../shared/lib/transactions-controller-utils"),m=e("../../shared/modules/conversion.utils"),f=e("./custom-gas"),g=e("./selectors"),E=e(".");const T=e=>(0,E.getUnapprovedTransactions)(e),_=e=>e.metamask.unapprovedMsgs,S=e=>e.metamask.unapprovedPersonalMsgs,h=e=>e.metamask.unapprovedDecryptMsgs,v=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs,y=e=>e.metamask.unapprovedTypedMessages;a.unconfirmedTransactionsListSelector=(0,r.createSelector)(T,_,S,h,v,y,g.getCurrentChainId,((e={},t={},a={},n={},r={},o={},i)=>(0,s.default)(e,t,a,n,r,o,i)||[])),a.unconfirmedTransactionsHashSelector=(0,r.createSelector)(T,_,S,h,v,y,g.getCurrentChainId,((e={},t={},a={},n={},r={},o={},s)=>({...Object.keys(e).reduce(((t,a)=>{const n={...t};return e[a].chainId===s&&(n[a]=e[a]),n}),{}),...t,...a,...n,...r,...o}))),a.unconfirmedMessagesHashSelector=(0,r.createSelector)(_,S,h,v,y,((e={},t={},a={},n={},r={})=>({...e,...t,...a,...n,...r})));a.use4ByteResolutionSelector=e=>e.metamask.use4ByteResolution;const b=e=>e.metamask.currentCurrency;a.currentCurrencySelector=b;const k=e=>{var t;return null===(t=e.metamask.currencyRates[(0,l.getProviderConfig)(e).ticker])||void 0===t?void 0:t.conversionRate};a.conversionRateSelector=k;const w=e=>e.confirmTransaction.txData;a.txDataSelector=w;const A=(0,r.createSelector)((e=>e.confirmTransaction.tokenProps),(e=>e&&e.decimals)),I=(0,r.createSelector)((e=>e.confirmTransaction.tokenData),(e=>e&&e.args||[])),C=(0,r.createSelector)(w,(e=>e&&e.txParams||{})),O=a.tokenAddressSelector=(0,r.createSelector)(C,(e=>e&&e.to));a.sendTokenTokenAmountAndToAddressSelector=(0,r.createSelector)(I,A,((e,t)=>{let a="",n="0";if(e&&e.length){a=e._to;let r=e._value.toString();t&&(r=(0,p.calcTokenAmount)(r,t).toFixed()),n=(0,i.roundExponential)(r)}return{toAddress:a,tokenAmount:n}})),a.contractExchangeRateSelector=(0,r.createSelector)((e=>e.metamask.contractExchangeRates),O,((e,t)=>e[Object.keys(e).find((e=>(0,d.isEqualCaseInsensitive)(e,t)))]));a.transactionFeeSelector=function(e,t){var a,n,r,s;const d=b(e),p=k(e),g=(0,l.getNativeCurrency)(e),T=(0,l.getGasFeeEstimates)(e)||{},_=(0,l.getGasEstimateType)(e),S=(0,E.checkNetworkAndAccountSupports1559)(e),h={gasLimit:(null===(a=t.txParams)||void 0===a?void 0:a.gas)??"0x0"};if(S){var v;const{gasPrice:e="0"}=T,a=T[t.userFeeLevel]||{};if((null===(v=t.txParams)||void 0===v?void 0:v.type)===o.TransactionEnvelopeType.legacy){var y;h.gasPrice=(null===(y=t.txParams)||void 0===y?void 0:y.gasPrice)??(0,m.decGWEIToHexWEI)(e)}else{var w,A,I,C;const{suggestedMaxPriorityFeePerGas:n,suggestedMaxFeePerGas:r}=a;h.maxFeePerGas=null===(w=t.txParams)||void 0===w||!w.maxFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&r?(0,m.decGWEIToHexWEI)(r||e):null===(A=t.txParams)||void 0===A?void 0:A.maxFeePerGas,h.maxPriorityFeePerGas=null===(I=t.txParams)||void 0===I||!I.maxPriorityFeePerGas||t.userFeeLevel!==u.CUSTOM_GAS_ESTIMATE&&n?n&&(0,m.decGWEIToHexWEI)(n)||h.maxFeePerGas:null===(C=t.txParams)||void 0===C?void 0:C.maxPriorityFeePerGas,h.baseFeePerGas=(0,m.decGWEIToHexWEI)(T.estimatedBaseFee)}}else switch(_){case u.GasEstimateTypes.none:h.gasPrice=(null===(n=t.txParams)||void 0===n?void 0:n.gasPrice)??"0x0";break;case u.GasEstimateTypes.ethGasPrice:h.gasPrice=(null===(r=t.txParams)||void 0===r?void 0:r.gasPrice)??(0,m.decGWEIToHexWEI)(T.gasPrice);break;case u.GasEstimateTypes.legacy:h.gasPrice=(null===(s=t.txParams)||void 0===s?void 0:s.gasPrice)??(0,f.getAveragePriceEstimateInHexWEI)(e);case u.GasEstimateTypes.feeMarket:}const{txParams:{value:O="0x0"}={}}=t,N=(0,m.getValueFromWeiHex)({value:O,fromCurrency:g,toCurrency:d,conversionRate:p,numberOfDecimals:2}),x=(0,m.getValueFromWeiHex)({value:O,fromCurrency:g,toCurrency:g,conversionRate:p,numberOfDecimals:6}),P=(0,c.getMinimumGasTotalInHexWei)(h),D=(0,c.getMaximumGasTotalInHexWei)(h),R=(0,i.getTransactionFee)({value:P,fromCurrency:g,toCurrency:d,numberOfDecimals:2,conversionRate:p}),M=(0,i.getTransactionFee)({value:D,fromCurrency:g,toCurrency:d,numberOfDecimals:2,conversionRate:p}),L=(0,i.getTransactionFee)({value:P,fromCurrency:g,toCurrency:g,numberOfDecimals:6,conversionRate:p});return{hexTransactionAmount:O,fiatTransactionAmount:N,ethTransactionAmount:x,hexMinimumTransactionFee:P,fiatMinimumTransactionFee:R,hexMaximumTransactionFee:D,fiatMaximumTransactionFee:M,ethTransactionFee:L,fiatTransactionTotal:(0,i.addFiat)(R,N),ethTransactionTotal:(0,i.addEth)(L,x),hexTransactionTotal:(0,m.sumHexes)(O,P),gasEstimationObject:h}}}}},{package:"$root$",file:"ui/selectors/confirm-transaction.js"}],[5335,{"./approvals":5333,"@metamask/controller-utils":1077},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.currentConfirmationSelector=void 0,a.latestPendingConfirmationSelector=function(e){return s(e).sort(((e,t)=>t.time-e.time))[0]},a.pendingConfirmationsSelector=s;var n=e("@metamask/controller-utils"),r=e("./approvals");const o=[n.ApprovalType.EthSign,n.ApprovalType.PersonalSign,n.ApprovalType.EthSignTypedData,n.ApprovalType.Transaction];function s(e){return(0,r.getPendingApprovals)(e).filter((({type:e})=>o.includes(e)))}a.currentConfirmationSelector=e=>e.confirm.currentConfirmation}}},{package:"$root$",file:"ui/selectors/confirm.ts"}],[5336,{".":5338,"../../app/scripts/lib/util":90,"../../shared/constants/common":4069,"../../shared/constants/gas":4072,"../../shared/lib/transactions-controller-utils":4099,"../../shared/modules/Numeric":4101,"../../shared/modules/conversion.utils":4105,"../ducks/metamask/metamask":4906,"../ducks/send":4908,"../helpers/utils/confirm-tx.util":4938,"../helpers/utils/formatters":4940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.basicPriceEstimateToETHTotal=_,a.getAverageEstimate=E,a.getAveragePriceEstimateInHexWEI=function(e){return h(E(e))},a.getBasicGasEstimateLoadingStatus=function(e){return!1===v(e)},a.getCustomGasLimit=function(e){return e.gas.customData.limit},a.getCustomGasPrice=f,a.getDefaultActiveButtonIndex=function(e,t,a){return e.map((({priceInHexWei:e})=>e)).lastIndexOf((0,n.addHexPrefix)(t||a))},a.getFastPriceEstimate=T,a.getFastPriceEstimateInHexWEI=function(e){return h(T(e)||"0x0")},a.getGasPriceInHexWei=h,a.getIsCustomNetworkGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.ethGasPrice&&!(0,m.getIsMainnet)(e)},a.getIsEthGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.ethGasPrice&&(0,m.getIsMainnet)(e)},a.getIsGasEstimatesFetched=v,a.getNoGasPriceFetched=function(e){return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.none},a.getRenderableConvertedCurrencyFee=function(e,t,a,n){const s=_(new d.Numeric(e,10).toBase(16).toString(),t),i=(0,r.decEthToConvertedCurrency)(s,a,n);return(0,o.formatCurrency)(i,a)},a.getRenderableEthFee=function(e,t,a=9,n="ETH"){const r=_(new d.Numeric(e,10).toBase(16).toString(),t,a);return(0,s.formatETHFee)(r,n)},a.getSafeLowEstimate=g,a.isCustomPriceExcessive=function(e,t=!1){const a=t?(0,i.getGasPrice)(e):f(e),n=T(e);if(!a||!n)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(Math.floor(1.5*n),10)},a.isCustomPriceSafe=function(e){const t=g(e),a=f(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.isCustomPriceSafeForCustomNetwork=function(e){const t=E(e),a=f(e);if(!a)return!0;if(!t)return!1;return new d.Numeric(a,16,p.EtherDenomination.WEI).toDenomination(p.EtherDenomination.GWEI).greaterThan(t,10)},a.priceEstimateToWei=S;var n=e("../../app/scripts/lib/util"),r=e("../../shared/modules/conversion.utils"),o=e("../helpers/utils/confirm-tx.util"),s=e("../helpers/utils/formatters"),i=e("../ducks/send"),l=e("../../shared/constants/gas"),u=e("../ducks/metamask/metamask"),c=e("../../shared/lib/transactions-controller-utils"),d=e("../../shared/modules/Numeric"),p=e("../../shared/constants/common"),m=e(".");function f(e){return e.gas.customData.price}function g(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.low:null}function E(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.medium:null}function T(e){const t=(0,u.getGasFeeEstimates)(e);return(0,u.getGasEstimateType)(e)===l.GasEstimateTypes.legacy?null==t?void 0:t.high:null}function _(e,t,a=9){return new d.Numeric((0,c.calcGasTotal)(t,e),16,p.EtherDenomination.GWEI).round(a).toBase(10).toString()}function S(e){return new d.Numeric(e,16,p.EtherDenomination.GWEI).toDenomination(p.EtherDenomination.WEI).round(9).toString()}function h(e){const t=new d.Numeric(e,10).toBase(16).toString();return(0,n.addHexPrefix)(S(t))}function v(e){const t=(0,u.getGasEstimateType)(e);return!(0,u.isEIP1559Network)(e)&&t!==l.GasEstimateTypes.none}}}},{package:"$root$",file:"ui/selectors/custom-gas.js"}],[5337,{"../helpers/constants/routes":4919},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getFirstTimeFlowType=void 0,a.getFirstTimeFlowTypeRoute=function(e){const{firstTimeFlowType:t}=e.metamask;let a;a="create"===t?n.ONBOARDING_CREATE_PASSWORD_ROUTE:"import"===t?n.ONBOARDING_IMPORT_WITH_SRP_ROUTE:n.DEFAULT_ROUTE;return a},a.getOnboardingInitiator=void 0;var n=e("../helpers/constants/routes");a.getFirstTimeFlowType=e=>e.metamask.firstTimeFlowType;a.getOnboardingInitiator=e=>{const{onboardingTabs:t}=e.metamask;if(!t||1!==Object.keys(t).length)return null;const a=Object.keys(t)[0];return{location:a,tabId:t[a]}}}}},{package:"$root$",file:"ui/selectors/first-time-flow.js"}],[5338,{"./approvals":5333,"./confirm":5335,"./confirm-transaction":5334,"./custom-gas":5336,"./first-time-flow":5337,"./metametrics":5339,"./permissions":5340,"./selectors":5341,"./transactions":5342},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0});var n=e("./confirm");Object.keys(n).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===n[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return n[e]}}))}));var r=e("./confirm-transaction");Object.keys(r).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===r[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return r[e]}}))}));var o=e("./custom-gas");Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===o[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return o[e]}}))}));var s=e("./first-time-flow");Object.keys(s).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===s[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return s[e]}}))}));var i=e("./metametrics");Object.keys(i).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===i[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return i[e]}}))}));var l=e("./permissions");Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===l[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return l[e]}}))}));var u=e("./selectors");Object.keys(u).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===u[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return u[e]}}))}));var c=e("./transactions");Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===c[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return c[e]}}))}));var d=e("./approvals");Object.keys(d).forEach((function(e){"default"!==e&&"__esModule"!==e&&(e in a&&a[e]===d[e]||Object.defineProperty(a,e,{enumerable:!0,get:function(){return d[e]}}))}))}}},{package:"$root$",file:"ui/selectors/index.js"}],[5339,{reselect:3838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.selectMatchingFragment=a.selectFragments=a.selectFragmentBySuccessEvent=a.selectFragmentById=void 0;var n=e("reselect");const r=e=>e.metamask.fragments;a.selectFragments=r;const o=a.selectFragmentBySuccessEvent=(0,n.createSelector)(r,((e,t)=>t),((e,t)=>t.persist?Object.values(e).find((e=>e.successEvent===t.successEvent)):undefined)),s=a.selectFragmentById=(0,n.createSelector)(r,((e,t)=>t),((e,t)=>t&&null!=e&&e[t]?e[t]:undefined));a.selectMatchingFragment=(0,n.createSelector)(((e,t)=>o(e,t.fragmentOptions)),((e,t)=>s(e,t.existingId)),((e,t)=>t??e))}}},{package:"$root$",file:"ui/selectors/metametrics.js"}],[5340,{".":5338,"../../shared/constants/permissions":4080,"./approvals":5333,"./util":5343,"@metamask/controller-utils":1077,"@metamask/snaps-rpc-methods":1626},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.activeTabHasPermissions=function(e){var t;const{activeTab:a,metamask:n}=e,{subjects:r={}}=n;return Boolean(Object.keys((null===(t=r[a.origin])||void 0===t?void 0:t.permissions)||{}).length>0)},a.getAccountToConnectToActiveTab=function(e){const t=(0,l.getSelectedInternalAccount)(e),a=d(e),{metamask:{internalAccounts:{accounts:n}}}=e,r=Object.keys(n).length;if(a.length&&a.length!==r&&-1===a.findIndex((e=>e===t.address)))return(0,l.getInternalAccount)(e,t.id);return undefined},a.getAddressConnectedSubjectMap=function(e){const t=(0,l.getSubjectMetadata)(e),a=p(e),n={};return Object.keys(a).forEach((e=>{const{iconUrl:r,name:o}=t[e]||{};a[e].forEach((t=>{const a=o||e;n[t]=n[t]?{...n[t],[e]:{iconUrl:r,name:a}}:{[e]:{iconUrl:r,name:a}}}))})),n},a.getConnectedSubjectsForAllAddresses=function(e){const t=u(e),a=(0,l.getSubjectMetadata)(e),n={};return Object.entries(t).forEach((([e,t])=>{m(t).forEach((t=>{n[t]||(n[t]=[]),n[t].push(a[e]||{})}))})),n},a.getConnectedSubjectsForSelectedAddress=function(e){const{selectedAddress:t}=e.metamask,a=u(e),n=(0,l.getSubjectMetadata)(e),r=[];return Object.entries(a).forEach((([e,a])=>{if(!m(a).includes(t))return;const{extensionId:o,name:s,iconUrl:i}=n[e]||{};r.push({extensionId:o,origin:e,name:s,iconUrl:i})})),r},a.getFirstPermissionRequest=function(e){const t=T(e);return t&&t[0]?t[0]:null},a.getFirstSnapInstallOrUpdateRequest=function(e){var t;return(null===(t=E(e))||void 0===t?void 0:t[0])??null},a.getLastConnectedInfo=function(e){const{permissionHistory:t={}}=e.metamask;return Object.keys(t).reduce(((e,a)=>(t[a].eth_accounts&&(e[a]=JSON.parse(JSON.stringify(t[a].eth_accounts))),e)),{})},a.getOrderedConnectedAccountsForActiveTab=function(e){var t;const{activeTab:a,metamask:{permissionHistory:n}}=e,r=null===(t=n[a.origin])||void 0===t||null===(t=t.eth_accounts)||void 0===t?void 0:t.accounts,o=(0,l.getMetaMaskAccountsOrdered)(e),s=d(e);return o.filter((e=>s.includes(e.address))).map((e=>({...e,lastActive:null==r?void 0:r[e.address]}))).sort((({lastSelected:e},{lastSelected:t})=>e===t?0:e===undefined?1:t===undefined?-1:t-e))},a.getPermissionSubjects=u,a.getPermissionSubjectsDeepEqual=void 0,a.getPermissions=function(e,t){var a;return null===(a=u(e)[t])||void 0===a?void 0:a.permissions},a.getPermissionsForActiveTab=function(e){var t;const{activeTab:a,metamask:n}=e,{subjects:r={}}=n,o=(null===(t=r[a.origin])||void 0===t?void 0:t.permissions)??{};return Object.keys(o).map((e=>({key:e,value:o[e]})))},a.getPermissionsRequests=T,a.getPermittedAccounts=c,a.getPermittedAccountsByOrigin=p,a.getPermittedAccountsForCurrentTab=d,a.getRequestState=function(e,t){var a;return null===(a=e.metamask.pendingApprovals[t])||void 0===a?void 0:a.requestState},a.getRequestType=function(e,t){var a;return null===(a=e.metamask.pendingApprovals[t])||void 0===a?void 0:a.type},a.getSnapInstallOrUpdateRequests=E,a.getSubjectMetadataDeepEqual=void 0,a.getSubjectsWithPermission=function(e,t){const a=u(e),n=[];return Object.entries(a).forEach((([a,{permissions:r}])=>{if(r[t]){const{extensionId:t,name:r,iconUrl:o}=(0,l.getTargetSubjectMetadata)(e,a)||{};n.push({extensionId:t,origin:a,name:r,iconUrl:o})}})),n},a.getSubjectsWithSnapPermission=function(e,t){const a=u(e);return Object.entries(a).filter((([e,{permissions:a}])=>{var n;return null===(n=a[r.WALLET_SNAP_PERMISSION_KEY])||void 0===n?void 0:n.caveats[0].value[t]})).map((([t,a])=>{const{extensionId:n,name:r,iconUrl:o}=(0,l.getTargetSubjectMetadata)(e,t)||{};return{extensionId:n,origin:t,name:r,iconUrl:o}}))};var n=e("@metamask/controller-utils"),r=e("@metamask/snaps-rpc-methods"),o=e("../../shared/constants/permissions"),s=e("./approvals"),i=e("./util"),l=e(".");a.getPermissionSubjectsDeepEqual=(0,i.createDeepEqualSelector)((e=>e.metamask.subjects||{}),(e=>e)),a.getSubjectMetadataDeepEqual=(0,i.createDeepEqualSelector)((e=>e.metamask.subjectMetadata),(e=>e));function u(e){return e.metamask.subjects||{}}function c(e,t){return g(f(function(e,t){var a;return t&&(null===(a=e.metamask.subjects)||void 0===a?void 0:a[t])}(e,t)))}function d(e){return c(e,(0,l.getOriginOfCurrentTab)(e))}function p(e){const t=u(e);return Object.keys(t).reduce(((e,a)=>{const n=m(t[a]);return n.length>0&&(e[a]=n),e}),{})}function m(e){return g(f(e))}function f(e={}){var t;return(null===(t=e.permissions)||void 0===t?void 0:t.eth_accounts)||{}}function g(e){const t=function(e={}){return Array.isArray(e.caveats)&&e.caveats.find((e=>e.type===o.CaveatTypes.restrictReturnedAccounts))}(e);return t&&Array.isArray(t.value)?t.value:[]}function E(e){return Object.values(e.metamask.pendingApprovals).filter((({type:e})=>"wallet_installSnap"===e||"wallet_updateSnap"===e||"wallet_installSnapResult"===e)).map((({requestData:e})=>e))}function T(e){var t;return null===(t=(0,s.getApprovalRequestsByType)(e,n.ApprovalType.WalletRequestPermissions))||void 0===t?void 0:t.map((({requestData:e})=>e))}}}},{package:"$root$",file:"ui/selectors/permissions.js"}],[5341,{"../../app/scripts/lib/util":90,"../../shared/constants/bridge":4068,"../../shared/constants/hardware-wallets":4073,"../../shared/constants/keyring":4074,"../../shared/constants/labels":4075,"../../shared/constants/network":4078,"../../shared/constants/swaps":4086,"../../shared/constants/terms":4087,"../../shared/constants/time":4088,"../../shared/constants/tokens":4089,"../../shared/modules/conversion.utils":4105,"../../shared/modules/string-utils":4119,"../../shared/notifications":4123,"../ducks/app/app":4897,"../ducks/metamask/metamask":4906,"../helpers/constants/design-system":4914,"../helpers/constants/survey":4923,"../helpers/utils/util":4956,"../pages/confirmation/templates":5067,"./permissions":5340,"./transactions":5342,"./util":5343,"@metamask/controller-utils":1077,"@metamask/name-controller":1361,"@metamask/permission-controller":1432,"@metamask/snaps-utils":1724,"@metamask/transaction-controller":1753,lodash:3444,reselect:3838,semver:3884},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.accountsWithSendEtherInfoSelector=ee,a.checkIfMethodIsEnabled=function(e,t){const a=B(e);return Boolean(a.methods.includes(t))},a.checkNetworkAndAccountSupports1559=function(e){return(0,k.isEIP1559Network)(e)},a.checkNetworkOrAccountNotSupports1559=function(e){return(0,k.isNotEIP1559Network)(e)},a.doesAddressRequireLedgerHidConnection=function(e,t){const a=(0,k.isAddressLedger)(e,t),n=(0,k.getLedgerTransportType)(e)===f.LedgerTransportTypes.webhid,r=(0,w.getLedgerWebHidConnectedStatus)(e)!==f.WebHIDConnectedStatuses.connected,o=(0,w.getLedgerTransportStatus)(e)!==f.HardwareTransportStates.verified;return a&&n&&(r||o)},a.getAccountName=function(e,t){const a=e.find((e=>(0,A.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.metadata.name?a.metadata.name:""},a.getAccountType=function(e){return j(L(e))},a.getAccountTypeForKeyring=j,a.getAccountsWithLabels=function(e){return Q(e).map((({address:e,name:t,balance:a})=>({address:e,addressLabel:`${t.length<E.TRUNCATED_NAME_CHAR_LIMIT?t:`${t.slice(0,E.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,S.shortenAddress)(e)})`,label:t,balance:a})))},a.getAddressBook=Z,a.getAddressBookEntry=J,a.getAddressBookEntryOrAccountName=function(e,t){const a=J(e,t);if(a&&""!==a.name)return a.name;const n=Object.values(q(e)).find((e=>(0,A.isEqualCaseInsensitive)(e.address,t)));return(null==n?void 0:n.metadata.name)||t},a.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[M(e)]},a.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},a.getAllAccountsOnNetworkAreEmpty=function(e){const t=Y(e)??{},a=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),n=0===H(e);return a&&n},a.getAllConnectedAccounts=void 0,a.getAllEnabledNetworks=function(e){const t=Pe(e),a=De(e);return le(e)?a:t},a.getAllNetworks=De,a.getAllSnapAvailableUpdates=void 0,a.getAllTokens=function(e){return e.metamask.allTokens},a.getAnySnapUpdateAvailable=void 0,a.getAppIsLoading=function(e){return e.appState.isLoading},a.getBlockExplorerLinkText=function(e,t=!1){const a=Ge(e),n=Te(e);let r={firstPart:"addBlockExplorer",secondPart:""};n.blockExplorerUrl?r=t?{firstPart:"blockExplorerView",secondPart:(0,S.getURLHostName)(n.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===a&&(r=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return r},a.getConfirmationExchangeRates=void 0,a.getCurrentAccountWithSendEtherInfo=te,a.getCurrentChainId=M,a.getCurrentCurrency=function(e){return e.metamask.currentCurrency},a.getCurrentEthBalance=ae,a.getCurrentKeyring=L,a.getCurrentNetwork=function(e){const t=De(e),a=(0,k.getProviderConfig)(e),n="rpc"===a.type?e=>e.id===a.id:e=>e.id===a.type;return t.find(n)},a.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},a.getCustomNonceValue=function(e){return String(e.metamask.customNonceValue)},a.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},a.getDetectedTokensInCurrentNetwork=function(e){var t;const a=M(e),{address:n}=B(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[a])||void 0===t?void 0:t[n]},a.getDisabledRpcMethodPreferences=function(e){return e.metamask.disabledRpcMethodPreferences},a.getEnabledSnaps=void 0,a.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t])return e.metamask.ensResolutionsByAddress[t];const a=J(e,t)||W(e,t);return(null==a?void 0:a.name)||""},a.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[c.NameType.ETHEREUM_ADDRESS])||{}},a.getFeatureFlags=function(e){return e.metamask.featureFlags},a.getFullTxData=void 0,a.getGasIsLoading=function(e){return e.appState.gasIsLoading},a.getHardwareWalletType=function(e){const t=L(e);return F(e)?t.type:undefined},a.getHiddenAccountsList=Ie,a.getInfuraBlocked=function(e){return e.metamask.networksMetadata[R(e)].status===m.NetworkStatus.Blocked},a.getInsightSnaps=a.getInsightSnapIds=void 0,a.getInternalAccount=function(e,t){return e.metamask.internalAccounts.accounts[t]},a.getInternalAccountByAddress=W,a.getInternalAccounts=q,a.getInternalAccountsSortedByKeyring=function(e){return q(e).sort(((e,t)=>{const a=e.metadata.keyring.type,n=t.metadata.keyring.type;return a<n?-1:a>n?1:0}))},a.getIpfsGateway=function(e){return e.metamask.ipfsGateway},a.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},a.getIsBase=Me,a.getIsBridgeChain=function(e){const t=M(e);return _.ALLOWED_BRIDGE_CHAIN_IDS.includes(t)},a.getIsBuyableChain=function(e){const t=M(e);return Object.keys(m.BUYABLE_CHAINS_MAP).includes(t)},a.getIsCustomNetwork=Ge,a.getIsDesktopEnabled=function(e){return e.metamask.desktopEnabled},a.getIsDynamicTokenListAvailable=je,a.getIsLineaMainnet=oe,a.getIsMainnet=re,a.getIsMultiLayerFeeNetwork=function(e){return Fe(e)},a.getIsNetworkUsed=function(e){const t=M(e),{usedNetworks:a}=e.metamask;return Boolean(a[t])},a.getIsNonStandardEthChain=function(e){return!(re(e)||se(e))},a.getIsOpStack=Fe,a.getIsOpbnb=Le,a.getIsOptimism=Re,a.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},a.getIsSigningQRHardwareTransaction=function(e){var t;return(null===(t=e.metamask.qrHardware)||void 0===t||null===(t=t.sign)||void 0===t?void 0:t.request)!==undefined},a.getIsSwapsChain=function(e){const t=M(e);return T.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(t)},a.getIsTestnet=se,a.getIsTokenDetectionInactiveOnMainnet=Ue,a.getIsTokenDetectionSupported=function(e){const t=Ce(e),a=je(e);return t&&a},a.getIsTransactionSecurityCheckEnabled=function(e){return e.metamask.transactionSecurityCheckEnabled},a.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=Ce(e),a=re(e);return je(e)&&!t&&!a},a.getKeyringSnapAccounts=function(e){const t=q(e);return Object.values(t).filter((e=>{const{keyring:t}=e.metadata;return t.type===g.KeyringType.snap}))},a.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},a.getKnownMethodData=function(e,t){if(!t)return null;const a=(0,p.addHexPrefix)(t).slice(0,10),{knownMethodData:n,use4ByteResolution:r}=e.metamask;return r&&(null==n?void 0:n[a])},a.getMemoizedMetadataContractName=a.getMemoizedMetaMaskInternalAccounts=a.getMemoizedMetaMaskIdentities=a.getMemoizedAddressBook=void 0,a.getMetaMaskAccountBalances=$,a.getMetaMaskAccountsOrdered=a.getMetaMaskAccountsConnected=a.getMetaMaskAccounts=void 0,a.getMetaMaskCachedBalances=Y,a.getMetaMaskIdentities=K,a.getMetaMaskKeyrings=V,a.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},a.getMetadataContractName=function(e,t){const a=Oe(e),n=Object.values(a).find((e=>(0,A.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.name?n.name:""},a.getNameLookupSnapsIds=void 0,a.getNameSources=function(e){return e.metamask.nameSources||{}},a.getNames=function(e){return e.metamask.names||{}},a.getNativeCurrencyImage=function(e){const t=M(e);return m.CHAIN_ID_TOKEN_IMAGE_MAP[t]},a.getNetworkConfigurations=Ne,a.getNetworkIdentifier=function(e){const{type:t,nickname:a,rpcUrl:n}=(0,k.getProviderConfig)(e);return a||n||t},a.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},a.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},a.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},a.getNewTokensImported=function(e){return e.appState.newTokensImported},a.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},a.getNextSuggestedNonce=function(e){return Number(e.metamask.nextNonce)},a.getNonTestNetworks=Pe,a.getNotifications=ke,a.getNotifySnaps=void 0,a.getNumberOfTokens=H,a.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},a.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},a.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},a.getOriginOfCurrentTab=function(e){return e.activeTab.origin},a.getPinnedAccountsList=Ae,a.getPreferences=ie,a.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},a.getRpcPrefsForCurrentProvider=Te,a.getSelectedAccount=z,a.getSelectedAccountCachedBalance=X,a.getSelectedAddress=G,a.getSelectedIdentity=function(e){const t=G(e),{identities:a}=e.metamask;return a[t]},a.getSelectedInternalAccount=B,a.getSelectedInternalAccountWithBalance=function(e){const t=B(e),a=$(e)[t.address];return{...t,balance:a?a.balance:"0x0"}},a.getSelectedNetworkClientId=R,a.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=ie(e);return t},a.getShouldShowFiat=function(e){const t=re(e),a=oe(e),n=Ge(e),r=(0,k.getConversionRate)(e),o=We(e),{showFiatInTestnets:s}=ie(e);return Boolean((t||a||n||s)&&o&&r)},a.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:a,dismissSeedBackUpReminder:n}=e.metamask,r=B(e)?ae(e):0;return!1===a&&(parseInt(r,16)>0||t.length>0)&&!1===n},a.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},a.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},a.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=ie(e);return Boolean(t)},a.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},a.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*y.DAY},a.getShowProductTour=function(e){return e.metamask.showProductTour},a.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:a}=e.metamask,n=(new Date).getTime(),r=a?90*y.DAY:2*y.DAY;return n-t>=r},a.getShowSurveyToast=function(e){const{surveyLinkLastClickedOrClosed:t}=e.metamask,a=new Date(`${N.SURVEY_DATE} ${N.SURVEY_START_TIME}`).getTime(),n=new Date(`${N.SURVEY_DATE} ${N.SURVEY_END_TIME}`).getTime(),r=Date.now();return r>a&&r<n&&!t},a.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(b.TERMS_OF_USE_LAST_UPDATED).getTime()},a.getShowTestNetworks=le,a.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},a.getSnapLatestVersion=a.getSnap=void 0,a.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},a.getSnapRegistryData=void 0,a.getSnaps=ve,a.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},a.getSnapsList=function(e){const t=ve(e);return Object.entries(t).map((([t,a])=>{const n=de(e,null==a?void 0:a.id);return{key:t,id:a.id,iconUrl:null==n?void 0:n.iconUrl,subjectType:null==n?void 0:n.subjectType,packageName:(0,s.stripSnapPrefix)(a.id),name:(0,S.getSnapName)(a.id,n)}}))},a.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),a=function(e){const t=L(e),a=(null==t?void 0:t.type)===g.KeyringType.ledger,n=window.navigator.hid!==undefined,r=(0,k.getLedgerTransportType)(e)===f.LedgerTransportTypes.live,o=window.navigator.userAgent.includes("Firefox");return{1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:n&&a&&r,9:!1,10:!1,11:!1,12:!1,13:!1,14:!1,15:!1,16:!1,17:!1,18:!1,19:!1,20:a&&o,21:!1,22:!1,23:!1,24:!0===e.metamask.hadAdvancedGasFeesSetPriorToMigration92_3,[O.NOTIFICATION_DROP_LEDGER_FIREFOX]:a&&o,[O.NOTIFICATION_OPEN_BETA_SNAPS]:!0,[O.NOTIFICATION_BUY_SELL_BUTTON]:!0,[O.NOTIFICATION_U2F_LEDGER_LIVE]:a&&!o,[O.NOTIFICATION_BLOCKAID_DEFAULT]:!0}}(e),n=t.filter((e=>!e.isShown&&a[e.id]));return n.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},a.getSubjectMetadata=ue,a.getSuggestedNfts=function(e){var t;return(null===(t=ne(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var a;return t===o.ApprovalType.WatchAsset&&(null==e||null===(a=e.asset)||void 0===a?void 0:a.tokenId)!==undefined})))||[]},a.getSuggestedTokens=function(e){var t;return(null===(t=ne(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var a;return e===o.ApprovalType.WatchAsset&&(null==t||null===(a=t.asset)||void 0===a?void 0:a.tokenId)===undefined})))||[]},a.getSwapsDefaultToken=function(e){const t=z(e),a=null==t?void 0:t.balance,n=M(e);return{...T.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[n],balance:(0,I.hexToDecimal)(a),string:(0,I.getValueFromWeiHex)({value:a,numberOfDecimals:4,toDenomination:"ETH"})}},a.getTargetAccount=function(e,t){return U(e)[t]},a.getTargetAccountWithSendEtherInfo=function(e,t){const a=ee(e);return(0,S.getAccountByAddress)(a,t)},a.getTargetSubjectMetadata=de,a.getTestNetworkBackgroundColor=function(e){const t=e.metamask.providerConfig.ticker;switch(!0){case null==t?void 0:t.includes(m.GOERLI_DISPLAY_NAME):return C.BackgroundColor.goerli;case null==t?void 0:t.includes(m.SEPOLIA_DISPLAY_NAME):return C.BackgroundColor.sepolia;default:return undefined}},a.getTestNetworks=xe,a.getTheme=function(e){return e.metamask.theme},a.getTokenExchangeRates=a.getTokenDetectionSupportNetworkByChainId=void 0,a.getTokenList=Oe,a.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},a.getTotalUnapprovedMessagesCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:a=0,unapprovedDecryptMsgCount:n=0,unapprovedEncryptionPublicKeyMsgCount:r=0,unapprovedTypedMessagesCount:o=0}=e.metamask;return t+a+n+r+o},a.getTotalUnapprovedSignatureRequestCount=function(e){const{unapprovedMsgCount:t=0,unapprovedPersonalMsgCount:a=0,unapprovedTypedMessagesCount:n=0}=e.metamask;return t+a+n},a.getTxData=a.getTransaction=void 0,a.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,k.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},a.getUnapprovedConfirmations=ne,a.getUnapprovedTemplatedConfirmations=function(e){return ne(e).filter((e=>h.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))},a.getUnapprovedTransaction=void 0,a.getUnapprovedTxCount=function(e){const t=(0,x.getUnapprovedTransactions)(e);return Object.keys(t).length},a.getUnreadNotifications=we,a.getUnreadNotificationsCount=void 0,a.getUpdatedAndSortedAccounts=function(e){const t=Q(e),a=Ae(e),n=Ie(e);t.forEach((e=>{e.pinned=Boolean(a.includes(e.address)),e.hidden=Boolean(n.includes(e.address))}));const r=null==a?void 0:a.map((e=>t.find((t=>t.address===e)))).filter((e=>Boolean(e&&a.includes(e.address)&&!(null!=n&&n.includes(e.address))))),o=t.filter((e=>!a.includes(e.address)&&!n.includes(e.address))),s=t.filter((e=>n.includes(e.address)));return[...r,...o,...s]},a.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},a.getUseCurrencyRateCheck=We,a.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},a.getUseNonceField=function(e){return Boolean(e.metamask.useNonceField)},a.getUseRequestQueue=function(e){return e.metamask.useRequestQueue},a.getUseTokenDetection=Ce,a.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},a.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},a.isBalanceCached=function(e){var t;const{address:a}=B(e),n=null===(t=$(e)[a])||void 0===t?void 0:t.balance,r=X(e);return Boolean(!n&&r)},a.isCurrentProviderCustom=function(e){const t=(0,k.getProviderConfig)(e);return t.type===m.NETWORK_TYPES.RPC&&!Object.values(m.CHAIN_IDS).includes(t.chainId)},a.isHardwareWallet=F,a.isNetworkLoading=function(e){const t=R(e);return t&&e.metamask.networksMetadata[t].status!==m.NetworkStatus.Available},a.useSafeChainsListValidationSelector=a.selectInstalledSnaps=a.rawStateSelector=void 0;var n,r=e("@metamask/permission-controller"),o=e("@metamask/controller-utils"),s=e("@metamask/snaps-utils"),i=e("lodash"),l=(n=e("semver"))&&n.__esModule?n:{default:n},u=e("reselect"),c=e("@metamask/name-controller"),d=e("@metamask/transaction-controller"),p=e("../../app/scripts/lib/util"),m=e("../../shared/constants/network"),f=e("../../shared/constants/hardware-wallets"),g=e("../../shared/constants/keyring"),E=e("../../shared/constants/labels"),T=e("../../shared/constants/swaps"),_=e("../../shared/constants/bridge"),S=e("../helpers/utils/util"),h=e("../pages/confirmation/templates"),v=e("../../shared/constants/tokens"),y=e("../../shared/constants/time"),b=e("../../shared/constants/terms"),k=e("../ducks/metamask/metamask"),w=e("../ducks/app/app"),A=e("../../shared/modules/string-utils"),I=e("../../shared/modules/conversion.utils"),C=e("../helpers/constants/design-system"),O=e("../../shared/notifications"),N=e("../helpers/constants/survey"),x=e("./transactions"),P=e("./permissions"),D=e("./util");function R(e){return e.metamask.selectedNetworkClientId}function M(e){const{chainId:t}=(0,k.getProviderConfig)(e);return t}function L(e){const t=B(e);return t?t.metadata.keyring:null}function F(e){var t;const a=L(e);return Boolean(null==a||null===(t=a.type)||void 0===t?void 0:t.includes("Hardware"))}function j(e){if(!e)return"";const{type:t}=e;switch(t){case g.KeyringType.trezor:case g.KeyringType.ledger:case g.KeyringType.lattice:case g.KeyringType.qr:return"hardware";case g.KeyringType.imported:return"imported";case g.KeyringType.snap:return"snap";default:return"default"}}const U=a.getMetaMaskAccounts=(0,u.createSelector)(K,$,Y,((e,t,a)=>Object.keys(e).reduce(((e,n)=>{let r={};return t[n]&&(r={...r,...t[n]}),null!==r.balance&&r.balance!==undefined||(r={...r,balance:a&&a[n]}),{...e,[n]:r}}),{})));function G(e){return e.metamask.selectedAddress}function W(e,t){return Object.values(e.metamask.internalAccounts.accounts).find((e=>(0,A.isEqualCaseInsensitive)(e.address,t)))}function B(e){const t=e.metamask.internalAccounts.selectedAccount;return e.metamask.internalAccounts.accounts[t]}function q(e){return Object.values(e.metamask.internalAccounts.accounts)}function H(e){const{tokens:t}=e.metamask;return t?t.length:0}function V(e){return e.metamask.keyrings}function K(e){return e.metamask.identities}function $(e){return e.metamask.accounts}function Y(e){var t;const a=M(e);return null!==(t=e.metamask.accountsByChainId)&&void 0!==t&&t[a]?Object.entries(e.metamask.accountsByChainId[a]).reduce(((e,[t,a])=>(e[t]=a.balance,e)),{}):{}}const Q=a.getMetaMaskAccountsOrdered=(0,u.createSelector)(V,K,U,((e,t,a)=>e.reduce(((e,t)=>e.concat(t.accounts)),[]).filter((e=>Boolean(t[e]))).map((e=>({...t[e],...a[e]})))));a.getMetaMaskAccountsConnected=(0,u.createSelector)(Q,(e=>e.map((({address:e})=>e.toLowerCase()))));function X(e){const t=Y(e),{address:a}=B(e);return null==t?void 0:t[a]}function z(e){const t=U(e),a=B(e);return{...a,...t[a.address]}}a.getConfirmationExchangeRates=e=>e.metamask.confirmationExchangeRates;function Z(e){const t=M(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function J(e,t){return Z(e).find((e=>(0,A.isEqualCaseInsensitive)(e.address,t)))}function ee(e){const t=U(e),a=K(e);return Object.entries(a).map((([e,a])=>({...a,...t[e]})))}function te(e){const{address:t}=B(e),a=ee(e);return(0,S.getAccountByAddress)(a,t)}function ae(e){var t;return null===(t=te(e))||void 0===t?void 0:t.balance}function ne(e){const{pendingApprovals:t={}}=e.metamask;return Object.values(t)}function re(e){return M(e)===m.CHAIN_IDS.MAINNET}function oe(e){return M(e)===m.CHAIN_IDS.LINEA_MAINNET}function se(e){const t=M(e);return m.TEST_CHAINS.includes(t)}function ie({metamask:e}){return e.preferences}function le(e){const{showTestNetworks:t}=ie(e);return Boolean(t)}function ue(e){return e.metamask.subjectMetadata}a.getTokenExchangeRates=e=>e.metamask.contractExchangeRates;const ce=(0,i.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function de(e,t){const a=ue(e)[t];if((null==a?void 0:a.subjectType)===r.SubjectType.Snap){const{svgIcon:e,...t}=a;return{...t,iconUrl:e?ce(e):null}}return a}const pe=e=>e;a.rawStateSelector=pe;const me=e=>e.metamask.snaps;a.selectInstalledSnaps=me;const fe=a.getSnapRegistryData=(0,u.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},(e,t)=>t],((e,t)=>e?e[t]:null)),ge=a.getSnapLatestVersion=(0,u.createSelector)([fe],(e=>e?Object.keys(e.versions).reduce(((e,t)=>l.default.gt(t,e)?t:e),"0.0.0"):null)),Ee=a.getAllSnapAvailableUpdates=(0,u.createSelector)([me,pe],((e,t)=>{const a=new Map;return Object.keys(e).forEach((n=>{const r=ge(t,n);a.set(n,!!r&&l.default.gt(r,e[n].version))})),a}));a.getAnySnapUpdateAvailable=(0,u.createSelector)([Ee],(e=>[...e.values()].some((e=>!0===e))));function Te(e){const{rpcPrefs:t}=(0,k.getProviderConfig)(e);return t||{}}a.getMemoizedMetaMaskIdentities=(0,D.createDeepEqualSelector)(K,(e=>e)),a.getMemoizedMetaMaskInternalAccounts=(0,D.createDeepEqualSelector)(q,(e=>e)),a.getMemoizedAddressBook=(0,D.createDeepEqualSelector)(Z,(e=>e)),a.getMemoizedMetadataContractName=(0,D.createDeepEqualSelector)(Oe,((e,t)=>t),((e,t)=>{const a=Object.values(e).find((e=>(0,A.isEqualCaseInsensitive)(e.address,t)));return a&&""!==a.name?a.name:""}));const _e=e=>e.confirmTransaction.txData;a.getTxData=_e;const Se=a.getUnapprovedTransaction=(0,D.createDeepEqualSelector)((e=>(0,x.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),he=a.getTransaction=(0,D.createDeepEqualSelector)((e=>(0,x.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{}));a.getFullTxData=(0,D.createDeepEqualSelector)(_e,((e,t,a)=>a===d.TransactionStatus.unapproved?Se(e,t):he(e,t)),((e,t,a,n)=>n),((e,t,a)=>{let n={...e,...t};return t&&t.simulationFails&&(n.simulationFails={...t.simulationFails}),a&&(n={...n,txParams:{...n.txParams,data:a}}),n})),a.getAllConnectedAccounts=(0,D.createDeepEqualSelector)(P.getConnectedSubjectsForAllAddresses,(e=>Object.keys(e)));function ve(e){return e.metamask.snaps}a.getSnap=(0,D.createDeepEqualSelector)(ve,((e,t)=>t),((e,t)=>e[t]));const ye=a.getEnabledSnaps=(0,D.createDeepEqualSelector)(ve,(e=>Object.values(e).reduce(((e,t)=>(t.enabled&&(e[t.id]=t),e)),{}))),be=a.getInsightSnaps=(0,D.createDeepEqualSelector)(ye,P.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var a;return null===(a=t[e])||void 0===a?void 0:a.permissions["endowment:transaction-insight"]}))));a.getInsightSnapIds=(0,D.createDeepEqualSelector)(be,(e=>e.map((e=>e.id)))),a.getNameLookupSnapsIds=(0,D.createDeepEqualSelector)(ye,P.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var a;return null===(a=t[e])||void 0===a?void 0:a.permissions["endowment:name-lookup"]})).map((e=>e.id)))),a.getNotifySnaps=(0,D.createDeepEqualSelector)(ye,P.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var a;return null===(a=t[e])||void 0===a?void 0:a.permissions.snap_notify}))));function ke(e){return Object.values(e.metamask.notifications).sort(((e,t)=>new Date(t.createdDate)-new Date(e.createdDate)))}function we(e){return ke(e).filter((e=>null===e.readDate))}a.getUnreadNotificationsCount=(0,u.createSelector)(we,(e=>e.length));function Ae(e){return e.metamask.pinnedAccountList}function Ie(e){return e.metamask.hiddenAccountList}function Ce(e){return Boolean(e.metamask.useTokenDetection)}function Oe(e){return Ue(e)?v.STATIC_MAINNET_TOKEN_LIST:e.metamask.tokenList}function Ne(e){return e.metamask.networkConfigurations}function xe(e){const t=Ne(e)||{};return[{chainId:m.CHAIN_IDS.GOERLI,nickname:m.GOERLI_DISPLAY_NAME,rpcUrl:m.CHAIN_ID_TO_RPC_URL_MAP[m.CHAIN_IDS.GOERLI],providerType:m.NETWORK_TYPES.GOERLI,ticker:m.TEST_NETWORK_TICKER_MAP[m.NETWORK_TYPES.GOERLI],id:m.NETWORK_TYPES.GOERLI,removable:!1},{chainId:m.CHAIN_IDS.SEPOLIA,nickname:m.SEPOLIA_DISPLAY_NAME,rpcUrl:m.CHAIN_ID_TO_RPC_URL_MAP[m.CHAIN_IDS.SEPOLIA],providerType:m.NETWORK_TYPES.SEPOLIA,ticker:m.TEST_NETWORK_TICKER_MAP[m.NETWORK_TYPES.SEPOLIA],id:m.NETWORK_TYPES.SEPOLIA,removable:!1},{chainId:m.CHAIN_IDS.LINEA_GOERLI,nickname:m.LINEA_GOERLI_DISPLAY_NAME,rpcUrl:m.CHAIN_ID_TO_RPC_URL_MAP[m.CHAIN_IDS.LINEA_GOERLI],rpcPrefs:{imageUrl:m.LINEA_GOERLI_TOKEN_IMAGE_URL},providerType:m.NETWORK_TYPES.LINEA_GOERLI,ticker:m.TEST_NETWORK_TICKER_MAP[m.NETWORK_TYPES.LINEA_GOERLI],id:m.NETWORK_TYPES.LINEA_GOERLI,removable:!1},...Object.values(t).filter((({chainId:e})=>e===m.CHAIN_IDS.LOCALHOST)).map((e=>({...e,removable:!0})))]}function Pe(e){const t=Ne(e)||{};return[{chainId:m.CHAIN_IDS.MAINNET,nickname:m.MAINNET_DISPLAY_NAME,rpcUrl:m.CHAIN_ID_TO_RPC_URL_MAP[m.CHAIN_IDS.MAINNET],rpcPrefs:{imageUrl:m.ETH_TOKEN_IMAGE_URL},providerType:m.NETWORK_TYPES.MAINNET,ticker:m.CURRENCY_SYMBOLS.ETH,id:m.NETWORK_TYPES.MAINNET,removable:!1},{chainId:m.CHAIN_IDS.LINEA_MAINNET,nickname:m.LINEA_MAINNET_DISPLAY_NAME,rpcUrl:m.CHAIN_ID_TO_RPC_URL_MAP[m.CHAIN_IDS.LINEA_MAINNET],rpcPrefs:{imageUrl:m.LINEA_MAINNET_TOKEN_IMAGE_URL},providerType:m.NETWORK_TYPES.LINEA_MAINNET,ticker:m.TEST_NETWORK_TICKER_MAP[m.NETWORK_TYPES.LINEA_MAINNET],id:m.NETWORK_TYPES.LINEA_MAINNET,removable:!1},...Object.values(t).filter((({chainId:e})=>![m.CHAIN_IDS.LOCALHOST].includes(e))).map((e=>{var t;return{...e,rpcPrefs:{...e.rpcPrefs,imageUrl:(null==e||null===(t=e.rpcPrefs)||void 0===t?void 0:t.imageUrl)??m.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[e.chainId]},removable:!0}}))]}function De(e){return[...Pe(e),...xe(e)]}function Re(e){return M(e)===m.CHAIN_IDS.OPTIMISM||M(e)===m.CHAIN_IDS.OPTIMISM_TESTNET}function Me(e){return M(e)===m.CHAIN_IDS.BASE||M(e)===m.CHAIN_IDS.BASE_TESTNET}function Le(e){return M(e)===m.CHAIN_IDS.OPBNB||M(e)===m.CHAIN_IDS.OPBNB_TESTNET}function Fe(e){return Re(e)||Me(e)||Le(e)}function je(e){const t=M(e);return[m.CHAIN_IDS.MAINNET,m.CHAIN_IDS.BSC,m.CHAIN_IDS.POLYGON,m.CHAIN_IDS.AVALANCHE,m.CHAIN_IDS.LINEA_GOERLI,m.CHAIN_IDS.LINEA_MAINNET,m.CHAIN_IDS.ARBITRUM,m.CHAIN_IDS.OPTIMISM,m.CHAIN_IDS.BASE,m.CHAIN_IDS.ZKSYNC_ERA].includes(t)}function Ue(e){const t=re(e);return!Ce(e)&&t}function Ge(e){const t=M(e);return!m.CHAIN_ID_TO_RPC_URL_MAP[t]}a.getTokenDetectionSupportNetworkByChainId=e=>{switch(M(e)){case m.CHAIN_IDS.MAINNET:return m.MAINNET_DISPLAY_NAME;case m.CHAIN_IDS.BSC:return m.BSC_DISPLAY_NAME;case m.CHAIN_IDS.POLYGON:return m.POLYGON_DISPLAY_NAME;case m.CHAIN_IDS.AVALANCHE:return m.AVALANCHE_DISPLAY_NAME;case m.CHAIN_IDS.LINEA_GOERLI:return m.LINEA_GOERLI_DISPLAY_NAME;case m.CHAIN_IDS.LINEA_MAINNET:return m.LINEA_MAINNET_DISPLAY_NAME;case m.CHAIN_IDS.ARBITRUM:return m.ARBITRUM_DISPLAY_NAME;case m.CHAIN_IDS.OPTIMISM:return m.OPTIMISM_DISPLAY_NAME;case m.CHAIN_IDS.BASE:return m.BASE_DISPLAY_NAME;case m.CHAIN_IDS.ZKSYNC_ERA:return m.ZK_SYNC_ERA_DISPLAY_NAME;default:return""}};function We(e){return Boolean(e.metamask.useCurrencyRateCheck)}a.useSafeChainsListValidationSelector=e=>e.metamask.useSafeChainsListValidation}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[5342,{"../../shared/constants/transaction":4090,"../../shared/modules/conversion.utils":4105,"../ducks/metamask/metamask":4906,"../helpers/constants/transactions":4924,"../helpers/utils/tx-helper":4955,"./approvals":5333,"./selectors":5341,"./util":5343,"@metamask/controller-utils":1077,"@metamask/transaction-controller":1753,reselect:3838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.getUnapprovedTransactions=a.getCurrentNetworkTransactions=a.getApprovedAndSignedTransactions=void 0,a.hasTransactionPendingApprovals=function(e){return x(e)||(0,m.hasPendingApprovals)(e,P)},a.unapprovedTypedMessagesSelector=a.unapprovedPersonalMsgsSelector=a.unapprovedMsgsSelector=a.unapprovedMessagesSelector=a.unapprovedEncryptionPublicKeyMsgsSelector=a.unapprovedDecryptMsgsSelector=a.transactionsSelector=a.transactionSubSelector=a.submittedPendingTransactionsSelector=a.smartTransactionsListSelector=a.selectedAddressTxListSelector=a.nonceSortedTransactionsSelector=a.nonceSortedPendingTransactionsSelector=a.nonceSortedCompletedTransactionsSelector=a.incomingTxListSelector=void 0;var n,r=e("@metamask/controller-utils"),o=e("reselect"),s=e("@metamask/transaction-controller"),i=e("../helpers/constants/transactions"),l=(n=e("../helpers/utils/tx-helper"))&&n.__esModule?n:{default:n},u=e("../../shared/constants/transaction"),c=e("../../shared/modules/conversion.utils"),d=e("../ducks/metamask/metamask"),p=e("./selectors"),m=e("./approvals"),f=e("./util");const g=[s.TransactionType.cancel,s.TransactionType.retry],E=e=>e.metamask.unapprovedMsgs;a.unapprovedMsgsSelector=E;const T=a.getCurrentNetworkTransactions=(0,f.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask??{};if(null==t||!t.length)return[];const{chainId:a}=(0,d.getProviderConfig)(e);return t.filter((e=>e.chainId===a)).sort(((e,t)=>e.time-t.time))}),(e=>e)),_=a.getUnapprovedTransactions=(0,f.createDeepEqualSelector)((e=>T(e).filter((e=>e.status===s.TransactionStatus.unapproved)).reduce(((e,t)=>(e[t.id]=t,e)),{})),(e=>e)),S=(a.getApprovedAndSignedTransactions=(0,f.createDeepEqualSelector)((e=>T(e).filter((e=>[s.TransactionStatus.approved,s.TransactionStatus.signed].includes(e.status)))),(e=>e)),a.incomingTxListSelector=(0,f.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const a=T(e),{address:n}=(0,p.getSelectedInternalAccount)(e);return a.filter((e=>e.type===s.TransactionType.incoming&&e.txParams.to===n))}),(e=>e))),h=e=>e.metamask.unapprovedPersonalMsgs;a.unapprovedPersonalMsgsSelector=h;const v=e=>e.metamask.unapprovedDecryptMsgs;a.unapprovedDecryptMsgsSelector=v;const y=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;a.unapprovedEncryptionPublicKeyMsgsSelector=y;const b=e=>e.metamask.unapprovedTypedMessages;a.unapprovedTypedMessagesSelector=b;const k=e=>{var t;return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t||null===(t=t[(0,p.getCurrentChainId)(e)])||void 0===t?void 0:t.filter((e=>!e.confirmed)).map((e=>{var t;return{...e,transactionType:s.TransactionType.smart,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?u.SmartTransactionStatus.cancelled:e.status}}))};a.smartTransactionsListSelector=k;const w=a.selectedAddressTxListSelector=(0,o.createSelector)(p.getSelectedInternalAccount,T,k,((e,t=[],a=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==s.TransactionType.incoming)).concat(a))),A=a.unapprovedMessagesSelector=(0,o.createSelector)(E,h,v,y,b,p.getCurrentChainId,((e={},t={},a={},n={},r={},o)=>(0,l.default)({},e,t,a,n,r,o)||[])),I=a.transactionSubSelector=(0,o.createSelector)(A,S,((e=[],t=[])=>e.concat(t))),C=a.transactionsSelector=(0,o.createSelector)(I,w,((e=[],t=[])=>t.concat(e).sort(((e,t)=>t.time-e.time)))),O=(e,t)=>{const{primaryTransaction:{time:a}={}}=t;let n=e.length;for(let t=0;t<e.length;t++){const r=e[t],{primaryTransaction:{time:o}={}}=r;if(o>a){n=t;break}}e.splice(n,0,t)},N=a.nonceSortedTransactionsSelector=(0,o.createSelector)(C,((e=[])=>{const t=[],a=[],n=[],r={};e.forEach((e=>{const{txParams:{nonce:o}={},status:l,type:u,time:d,txReceipt:p}=e;if(void 0===o||u===s.TransactionType.incoming){const n={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:o};u===s.TransactionType.incoming?a.push(n):O(t,n)}else if(o in r){var m,f;const t=r[o];((e,t)=>{const{time:a}=t;let n=e.length;for(let t=0;t<e.length;t++)if(e[t].time>a){n=t;break}e.splice(n,0,t)})(t.transactions,e);const{primaryTransaction:{time:a=0}={},initialTransaction:{time:n=0}={}}=t,c={isOnChainFailure:"0x0"===(null==p?void 0:p.status),isEphemeral:l===s.TransactionStatus.failed&&"0x0"!==(null==p?void 0:p.status),isRetryOrCancel:g.includes(u),occurredAfterPrimary:d>a,hasPriorityStatus:l in i.PRIORITY_STATUS_HASH,isConfirmed:l===s.TransactionStatus.confirmed,occurredBeforeInitial:d<n,isValidRetry:u===s.TransactionType.retry&&(l in i.PRIORITY_STATUS_HASH||l===s.TransactionStatus.dropped),isValidCancel:u===s.TransactionType.cancel&&(l in i.PRIORITY_STATUS_HASH||l===s.TransactionStatus.dropped)};c.eligibleForInitial=!c.isRetryOrCancel&&!c.isEphemeral,c.shouldBePrimary=c.isConfirmed||c.isOnChainFailure;const E={isEphemeral:t.primaryTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(m=t.primaryTransaction)||void 0===m||null===(m=m.txReceipt)||void 0===m?void 0:m.status)},T={isEphemeral:t.initialTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(f=t.initialTransaction.txReceipt)||void 0===f?void 0:f.status)};(c.shouldBePrimary||E.isEphemeral||c.occurredAfterPrimary&&c.hasPriorityStatus)&&(t.primaryTransaction=e),(c.occurredBeforeInitial&&c.eligibleForInitial||T.isEphemeral&&c.eligibleForInitial)&&(t.initialTransaction=e),c.isValidRetry&&(t.hasRetried=!0),c.isValidCancel&&(t.hasCancelled=!0)}else r[o]={nonce:o,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===s.TransactionType.retry&&(e.status in i.PRIORITY_STATUS_HASH||e.status===s.TransactionStatus.dropped),hasCancelled:e.type===s.TransactionType.cancel&&(e.status in i.PRIORITY_STATUS_HASH||e.status===s.TransactionStatus.dropped)},((e,t)=>{let a=e.length;for(let n=0;n<e.length;n++){const r=e[n];if(Number((0,c.hexToDecimal)(r))>Number((0,c.hexToDecimal)(t))){a=n;break}}e.splice(a,0,t)})(n,o)}));const o=n.map((e=>r[e]));return((e,t)=>{t.forEach((t=>{O(e,t)}))})(o,a),t.concat(o).map((e=>{var t;if(g.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!g.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))})),x=(a.nonceSortedPendingTransactionsSelector=(0,o.createSelector)(N,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in i.PENDING_STATUS_HASH)))),a.nonceSortedCompletedTransactionsSelector=(0,o.createSelector)(N,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in i.PENDING_STATUS_HASH))).reverse())),a.submittedPendingTransactionsSelector=(0,o.createSelector)(C,((e=[])=>e.filter((e=>e.status===s.TransactionStatus.submitted)))),e=>{const t=_(e),a=(0,m.getApprovalRequestsByType)(e,r.ApprovalType.Transaction),n=(0,p.getCurrentChainId)(e);return a.filter((({id:e})=>t[e]&&t[e].chainId===n)).length>0}),P=[r.ApprovalType.EthDecrypt,r.ApprovalType.EthGetEncryptionPublicKey,r.ApprovalType.EthSign,r.ApprovalType.EthSignTypedData,r.ApprovalType.PersonalSign]}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[5343,{lodash:3444,reselect:3838},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.createDeepEqualSelector=void 0;var n=e("lodash"),r=e("reselect");a.createDeepEqualSelector=(0,r.createSelectorCreator)(r.defaultMemoize,n.isEqual)}}},{package:"$root$",file:"ui/selectors/util.js"}],[5344,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,a){Object.defineProperty(a,"__esModule",{value:!0}),a.UPDATE_TRANSACTION_PARAMS=a.UPDATE_METAMASK_STATE=a.UPDATE_CUSTOM_NONCE=a.UNLOCK_SUCCEEDED=a.UNLOCK_IN_PROGRESS=a.UNLOCK_FAILED=a.TRANSACTION_ERROR=a.TOGGLE_NETWORK_MENU=a.TOGGLE_GAS_LOADING_ANIMATION=a.TOGGLE_CURRENCY_INPUT_SWITCH=a.TOGGLE_ACCOUNT_MENU=a.SHOW_SEND_TOKEN_PAGE=a.SHOW_PRIVATE_KEY=a.SHOW_LOADING=a.SHOW_KEYRING_SNAP_REMOVAL_RESULT=a.SHOW_IPFS_MODAL_OPEN=a.SHOW_IPFS_MODAL_CLOSE=a.SHOW_CONF_TX_PAGE=a.SHOW_ACCOUNTS_PAGE=a.SET_WEBHID_CONNECTED_STATUS=a.SET_SMART_TRANSACTIONS_ERROR=a.SET_SELECTED_NETWORK_CONFIGURATION_ID=a.SET_REQUEST_ACCOUNT_TABS=a.SET_REMOVE_NFT_MESSAGE=a.SET_PENDING_TOKENS=a.SET_PARTICIPATE_IN_METAMETRICS=a.SET_OPEN_METAMASK_TAB_IDS=a.SET_NEXT_NONCE=a.SET_NEW_TOKENS_IMPORTED_ERROR=a.SET_NEW_TOKENS_IMPORTED=a.SET_NEW_NFT_ADDED_MESSAGE=a.SET_NEW_NETWORK_ADDED=a.SET_LEDGER_TRANSPORT_STATUS=a.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=a.SET_FIRST_TIME_FLOW_TYPE=a.SET_CUSTOM_TOKEN_AMOUNT=a.SET_CURRENT_LOCALE=a.SET_CONFIRMATION_EXCHANGE_RATES=a.SET_ACCOUNT_LABEL=a.SET_ACCOUNT_DETAILS_ADDRESS=a.SELECT_ACTION_MODAL_OPEN=a.SELECT_ACTION_MODAL_CLOSE=a.SELECTED_ADDRESS_CHANGED=a.SELECTED_ACCOUNT_CHANGED=a.QR_CODE_DETECTED=a.ONBOARDED_IN_THIS_UI_SESSION=a.NETWORK_DROPDOWN_OPEN=a.NETWORK_DROPDOWN_CLOSE=a.MODAL_OPEN=a.MODAL_CLOSE=a.LOCK_METAMASK=a.LOADING_METHOD_DATA_STARTED=a.LOADING_METHOD_DATA_FINISHED=a.IMPORT_TOKENS_POPOVER_OPEN=a.IMPORT_TOKENS_POPOVER_CLOSE=a.IMPORT_NFTS_MODAL_OPEN=a.IMPORT_NFTS_MODAL_CLOSE=a.HIDE_WHATS_NEW_POPUP=a.HIDE_WARNING=a.HIDE_LOADING=a.HIDE_KEYRING_SNAP_REMOVAL_RESULT=a.GO_HOME=a.GAS_FEE_ESTIMATES_UPDATED=a.FORCE_DISABLE_DESKTOP=a.DISPLAY_WARNING=a.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=a.COMPLETE_ONBOARDING=a.COMPLETED_TX=a.CLOSE_WELCOME_SCREEN=a.CLEAR_PENDING_TOKENS=a.CLEAR_ACCOUNT_DETAILS=a.CHAIN_CHANGED=a.CAPTURE_SINGLE_EXCEPTION=a.ALERT_OPEN=a.ALERT_CLOSE=a.ADDRESS_BOOK_UPDATED=a.ACCOUNT_CHANGED=void 0;a.GO_HOME="GO_HOME",a.MODAL_OPEN="UI_MODAL_OPEN",a.MODAL_CLOSE="UI_MODAL_CLOSE",a.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",a.ALERT_OPEN="UI_ALERT_OPEN",a.ALERT_CLOSE="UI_ALERT_CLOSE",a.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",a.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",a.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",a.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",a.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",a.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",a.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",a.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",a.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",a.SELECT_ACTION_MODAL_OPEN="UI_SELECT_ACTION_MODAL_OPEN",a.SELECT_ACTION_MODAL_CLOSE="UI_SELECT_ACTION_MODAL_CLOSE",a.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",a.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",a.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",a.ACCOUNT_CHANGED="ACCOUNT_CHANGED",a.CHAIN_CHANGED="CHAIN_CHANGED",a.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",a.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",a.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",a.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",a.UNLOCK_FAILED="UNLOCK_FAILED",a.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",a.LOCK_METAMASK="LOCK_METAMASK",a.DISPLAY_WARNING="DISPLAY_WARNING",a.HIDE_WARNING="HIDE_WARNING",a.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",a.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",a.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",a.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",a.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",a.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",a.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",a.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS",a.COMPLETED_TX="COMPLETED_TX",a.TRANSACTION_ERROR="TRANSACTION_ERROR",a.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",a.SET_NEXT_NONCE="SET_NEXT_NONCE",a.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",a.SHOW_LOADING="SHOW_LOADING_INDICATION",a.HIDE_LOADING="HIDE_LOADING_INDICATION",a.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU",a.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",a.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",a.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",a.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",a.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",a.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",a.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",a.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",a.SET_PENDING_TOKENS="SET_PENDING_TOKENS",a.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",a.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",a.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",a.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",a.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",a.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",a.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",a.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",a.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",a.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",a.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",a.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",a.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",a.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",a.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",a.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",a.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",a.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",a.FORCE_DISABLE_DESKTOP="FORCE_DISABLE_DESKTOP",a.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",a.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}]],[],{});